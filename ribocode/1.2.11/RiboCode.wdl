version 1.0

task RiboCode {
  input {
    String? an_not_dir
    String? config_file
    String? longest_orf
    String? pval_cut_off
    String? start_codon
    String? alt_start_codons
    String? stop_codon
    String? transl_table
    Int? min_aa_length
    Boolean? output_gtf
    Boolean? output_bed
    String? output_name
  }
  command <<<
    RiboCode \
      ~{if defined(an_not_dir) then ("--annot_dir " +  '"' + an_not_dir + '"') else ""} \
      ~{if defined(config_file) then ("--config_file " +  '"' + config_file + '"') else ""} \
      ~{if defined(longest_orf) then ("--longest-orf " +  '"' + longest_orf + '"') else ""} \
      ~{if defined(pval_cut_off) then ("--pval-cutoff " +  '"' + pval_cut_off + '"') else ""} \
      ~{if defined(start_codon) then ("--start_codon " +  '"' + start_codon + '"') else ""} \
      ~{if defined(alt_start_codons) then ("--alt_start_codons " +  '"' + alt_start_codons + '"') else ""} \
      ~{if defined(stop_codon) then ("--stop_codon " +  '"' + stop_codon + '"') else ""} \
      ~{if defined(transl_table) then ("--transl_table " +  '"' + transl_table + '"') else ""} \
      ~{if defined(min_aa_length) then ("--min-AA-length " +  '"' + min_aa_length + '"') else ""} \
      ~{true="--output-gtf" false="" output_gtf} \
      ~{true="--output-bed" false="" output_bed} \
      ~{if defined(output_name) then ("--output-name " +  '"' + output_name + '"') else ""}
  >>>
  parameter_meta {
    an_not_dir: "transcripts annotation directory, generated by prepare_transcripts."
    config_file: "list bam file and P-sites information in this file, please refer to the example file in data folder."
    longest_orf: "Default: yes, the region from most distal AUG to stop was defined as an ORF. If set to no , the position of start codon will be automatically determined by program."
    pval_cut_off: "P-value cutoff for ORF filtering, default 0.05"
    start_codon: "The canonical start codon. default: ATG"
    alt_start_codons: "The alternative start codon, such as CTG,GTG, default: None. Multiple codons should be separated by comma."
    stop_codon: "Stop codon, default: TAA,TAG,TGA"
    transl_table: "ORF translation table(Default: 1). Assign the correct genetic code based on your organism, [please refer: ht tps://www.ncbi.nlm.nih.gov/Taxonomy/Utils/wprintgc.cgi ]"
    min_aa_length: "The minimal length of predicted peptides,default 20"
    output_gtf: "output the gtf file of predicted ORFs"
    output_bed: "output the bed file of predicted ORFs"
    output_name: "output file name, default: final_result"
  }
}