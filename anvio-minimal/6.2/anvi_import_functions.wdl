version 1.0

task AnviImportFunctions {
  input {
    String? contigs_db
    String? parser
    File? s_one_more
    Boolean? drop_previous_annotations
  }
  command <<<
    anvi-import-functions \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(parser) then ("--parser " +  '"' + parser + '"') else ""} \
      ~{if defined(s_one_more) then ("-i " +  '"' + s_one_more + '"') else ""} \
      ~{true="--drop-previous-annotations" false="" drop_previous_annotations}
  >>>
  parameter_meta {
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen- contigs'"
    parser: "Parser to make sense of the input files (if you need one). There are currently 1 parsers readily available: ['interproscan']. IT IS OK if you do not select a parser if you have a standard, TAB-delimited input file for funcitonal annotation of genes. If this is not like 2018 and everything is already outdated, you should be able to go to this address and learn everything you need like a boss: http://merenlab.org/2016/06/18/importing-functions/"
    s_one_more: "(S) [FILE(S) ...], --input-files FILE(S) [FILE(S) ...] One or more input files should follow this parameter. The way these files will be handled will depend on which parser you selected (if you did select any)."
    drop_previous_annotations: "Use this flag if you want anvi'o to remove ALL previous functional annotations for your genes, and then import the new data. The default behavior will add any annotation source into the db incrementally unless there are already annotations from this source. In which case, it will first remove previous annotations for that source only (i.e., if source X is both in the db and in the incoming annotations data, it will replace the content of source X in the db)."
  }
}