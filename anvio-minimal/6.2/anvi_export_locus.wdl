version 1.0

task AnviExportLocus {
  input {
    String? contigs_db
    String? search_term
    String? gene_caller_ids
    String? delimiter
    String? output_dir
    File? output_file_prefix
    Boolean? overwrite_output_destinations
    Boolean? remove_partial_hits
    Boolean? never_reverse_complement
  }
  command <<<
    anvi-export-locus \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(search_term) then ("--search-term " +  '"' + search_term + '"') else ""} \
      ~{if defined(gene_caller_ids) then ("--gene-caller-ids " +  '"' + gene_caller_ids + '"') else ""} \
      ~{if defined(delimiter) then ("--delimiter " +  '"' + delimiter + '"') else ""} \
      ~{if defined(output_dir) then ("--output-dir " +  '"' + output_dir + '"') else ""} \
      ~{if defined(output_file_prefix) then ("--output-file-prefix " +  '"' + output_file_prefix + '"') else ""} \
      ~{true="--overwrite-output-destinations" false="" overwrite_output_destinations} \
      ~{true="--remove-partial-hits" false="" remove_partial_hits} \
      ~{true="--never-reverse-complement" false="" never_reverse_complement}
  >>>
  parameter_meta {
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen- contigs'"
    search_term: "search term."
    gene_caller_ids: "Gene caller ids. Multiple of them can be declared separated by a delimiter (the default is a comma). In anvi-gen-variability-profile, if you declare nothing you will get all genes matching your other filtering criteria. In other programs, you may get everything, nothing, or an error. It really depends on the situation. Fortunately, mistakes are cheap, so it's worth a try."
    delimiter: "The delimiter to parse multiple input terms. The default is ','."
    output_dir: "Directory path for output files"
    output_file_prefix: "A prefix to be used while naming the output files (no file type extensions please; just a prefix)."
    overwrite_output_destinations: "Overwrite if the output files and/or directories exist."
    remove_partial_hits: "By default anvi'o will return hits even if they are partial. Declaring this flag will make anvi'o filter all hits that are partial. Partial hits are hits in which you asked for n1 genes before and n2 genes after the gene that matched the search criteria but the search hits the end of the contig before finding the number of genes that you asked."
    never_reverse_complement: "By default, if a gene that is found by the search criteria is reverse in it's direction, then the sequence of the entire locus is reversed before it is saved to the output. If you wish to prevent this behavior then use the flag --never-reverse-complement."
  }
}