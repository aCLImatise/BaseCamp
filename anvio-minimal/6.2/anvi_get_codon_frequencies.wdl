version 1.0

task Anvigetcodonfrequencies {
  input {
    String? contigs_db
    String? gene_caller_id
    Boolean? return_aa_frequencies_instead
    File? output_file
    Boolean? percent_normalize
    Boolean? mere_ns_codon_normalization
  }
  command <<<
    anvi_get_codon_frequencies \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(gene_caller_id) then ("--gene-caller-id " +  '"' + gene_caller_id + '"') else ""} \
      ~{if (return_aa_frequencies_instead) then "--return-AA-frequencies-instead" else ""} \
      ~{if defined(output_file) then ("--output-file " +  '"' + output_file + '"') else ""} \
      ~{if (percent_normalize) then "--percent-normalize" else ""} \
      ~{if (mere_ns_codon_normalization) then "--merens-codon-normalization" else ""}
  >>>
  parameter_meta {
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen-\\ncontigs'"
    gene_caller_id: "OK. You can declare a single gene caller ID if you\\nwish, in which case anvi'o would only return results\\nfor a single gene call. If you don't declare anything,\\nwell, you must be prepared to brace yourself if you\\nare working with a very large contigs database with\\nhundreds of thousands of genes."
    return_aa_frequencies_instead: "By default, anvi'o will return codon frequencies (as\\nthe name suggests), but you can ask for amino acid\\nfrequencies instead, simply because you always need\\nmore data and more stuff. You're lucky this time, but\\nis there an end to this? Will you ever be satisfied\\nwith what you have? Anvi'o needs answers."
    output_file: "File path to store results."
    percent_normalize: "Instead of actual counts, report percent-normalized\\nfrequencies per gene (because you are too lazy to do\\nthings the proper way in R)."
    mere_ns_codon_normalization: "This is a flag to percent normalize codon frequenies\\nwithin those that encode for the same amino acid. It\\nis different from the flag --percent-normalize, since\\nit does not percent normalize frequencies of codons\\nwithin a gene based on all codon frequencies. Clearly\\nthis flag is not applicable if you wish to work with\\nboring amino acids. WHO WORKS WITH AMINO ACIDS\\nANYWAYS.\\n"
  }
  output {
    File out_stdout = stdout()
    File out_output_file = "${in_output_file}"
  }
}