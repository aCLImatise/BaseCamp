version 1.0

task Anvigengeneconsensussequences {
  input {
    Boolean? compress_samples
    String? profile_db
    String? contigs_db
    String? gene_caller_ids
    File? genes_of_interest
    File? samples_of_interest
    File? output_file
    File? tab_delimited
    String? engine
    Boolean? contigs_mode
  }
  command <<<
    anvi_gen_gene_consensus_sequences \
      ~{if (compress_samples) then "--compress-samples" else ""} \
      ~{if defined(profile_db) then ("--profile-db " +  '"' + profile_db + '"') else ""} \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(gene_caller_ids) then ("--gene-caller-ids " +  '"' + gene_caller_ids + '"') else ""} \
      ~{if defined(genes_of_interest) then ("--genes-of-interest " +  '"' + genes_of_interest + '"') else ""} \
      ~{if defined(samples_of_interest) then ("--samples-of-interest " +  '"' + samples_of_interest + '"') else ""} \
      ~{if defined(output_file) then ("--output-file " +  '"' + output_file + '"') else ""} \
      ~{if (tab_delimited) then "--tab-delimited" else ""} \
      ~{if defined(engine) then ("--engine " +  '"' + engine + '"') else ""} \
      ~{if (contigs_mode) then "--contigs-mode" else ""}
  >>>
  parameter_meta {
    compress_samples: "Normally all samples with variation will have their\\nown consensus sequence. If this flag is provided, the\\ncoverages from each sample of interest will be summed\\nand only a single consenus sequence for each\\ngene/contig will be output."
    profile_db: "Anvi'o profile database"
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen-\\ncontigs'"
    gene_caller_ids: "Gene caller ids. Multiple of them can be declared\\nseparated by a delimiter (the default is a comma). In\\nanvi-gen-variability-profile, if you declare nothing\\nyou will get all genes matching your other filtering\\ncriteria. In other programs, you may get everything,\\nnothing, or an error. It really depends on the\\nsituation. Fortunately, mistakes are cheap, so it's\\nworth a try."
    genes_of_interest: "A file with anvi'o gene caller IDs. There should be\\nonly one column in the file, and each line should\\ncorrespond to a unique gene caller id (without a\\ncolumn header)."
    samples_of_interest: "A file with samples names. There should be only one\\ncolumn in the file, and each line should correspond to\\na unique sample name (without a column header)."
    output_file: "The output file name. The boring default is\\n\\\"genes.fa\\\". You can change the output file format to a\\nTAB-delimited file using teh flag `--tab-delimited`,\\nin which case please do not forget to change the file\\nname, too."
    tab_delimited: "Use the TAB-delimited format for the output file."
    engine: "Variability engine. The default is 'NT'."
    contigs_mode: "Use this flag to output consensus sequences of\\ncontigs, instead of the default, which is genes\\n"
  }
  output {
    File out_stdout = stdout()
    File out_output_file = "${in_output_file}"
    File out_tab_delimited = "${in_tab_delimited}"
  }
}