version 1.0

task Anviscriptgendistributionofgenesinabin {
  input {
    String? contigs_db
    String? profile_db
    String? collection_name
    String? bin_id
    Float? min_detection
    Float? fraction_of_median_coverage
  }
  command <<<
    anvi_script_gen_distribution_of_genes_in_a_bin \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(profile_db) then ("--profile-db " +  '"' + profile_db + '"') else ""} \
      ~{if defined(collection_name) then ("--collection-name " +  '"' + collection_name + '"') else ""} \
      ~{if defined(bin_id) then ("--bin-id " +  '"' + bin_id + '"') else ""} \
      ~{if defined(min_detection) then ("--min-detection " +  '"' + min_detection + '"') else ""} \
      ~{if defined(fraction_of_median_coverage) then ("--fraction-of-median-coverage " +  '"' + fraction_of_median_coverage + '"') else ""}
  >>>
  parameter_meta {
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen-\\ncontigs'"
    profile_db: "Anvi'o profile database"
    collection_name: "Collection name."
    bin_id: "Bin name you are interested in."
    min_detection: "For this entire thing to work, the genome you are\\nfocusing on should be detected in at least one\\nmetagenome. If that is not the case, it would mean\\nthat you do not have any sample that represents the\\nniche for this organism (or you do not have enough\\ndepth of coverage) to investigate the detection of\\ngenes in the environment. By default, this script\\nrequires at least '0.5' of the genome to be detected\\nin at least one metagenome. This parameter allows you\\nto change that. 0 would mean no detection test\\nrequired, 1 would mean the entire genome must be\\ndetected."
    fraction_of_median_coverage: "The value set here will be used to remove a gene if\\nits total coverage across environments is less than\\nthe median coverage of all genes multiplied by this\\nvalue. The default is 0.25, which means, if the median\\ntotal coverage of all genes across all samples is\\n100X, then, a gene with a total coverage of less than\\n25X across all samples will be assumed not a part of\\nthe 'environmental core'.\\n"
  }
  output {
    File out_stdout = stdout()
  }
}