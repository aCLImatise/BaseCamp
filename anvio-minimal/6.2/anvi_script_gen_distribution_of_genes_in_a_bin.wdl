version 1.0

task AnviScriptGenDistributionOfGenesInABin {
  input {
    String? contigs_db
    String? profile_db
    String? collection_name
    String? bin_id
    Float? min_detection
    Float? fraction_of_median_coverage
  }
  command <<<
    anvi-script-gen-distribution-of-genes-in-a-bin \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(profile_db) then ("--profile-db " +  '"' + profile_db + '"') else ""} \
      ~{if defined(collection_name) then ("--collection-name " +  '"' + collection_name + '"') else ""} \
      ~{if defined(bin_id) then ("--bin-id " +  '"' + bin_id + '"') else ""} \
      ~{if defined(min_detection) then ("--min-detection " +  '"' + min_detection + '"') else ""} \
      ~{if defined(fraction_of_median_coverage) then ("--fraction-of-median-coverage " +  '"' + fraction_of_median_coverage + '"') else ""}
  >>>
  parameter_meta {
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen- contigs'"
    profile_db: "Anvi'o profile database"
    collection_name: "Collection name."
    bin_id: "Bin name you are interested in."
    min_detection: "For this entire thing to work, the genome you are focusing on should be detected in at least one metagenome. If that is not the case, it would mean that you do not have any sample that represents the niche for this organism (or you do not have enough depth of coverage) to investigate the detection of genes in the environment. By default, this script requires at least '0.5' of the genome to be detected in at least one metagenome. This parameter allows you to change that. 0 would mean no detection test required, 1 would mean the entire genome must be detected."
    fraction_of_median_coverage: "The value set here will be used to remove a gene if its total coverage across environments is less than the median coverage of all genes multiplied by this value. The default is 0.25, which means, if the median total coverage of all genes across all samples is 100X, then, a gene with a total coverage of less than 25X across all samples will be assumed not a part of the 'environmental core'."
  }
}