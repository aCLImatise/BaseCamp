version 1.0

task AnviScriptPredictCPRGenomes {
  input {
    String? contigs_db
    String? profile_db
    String? collection_name
    Boolean? list_collections
    Boolean? report_only_cpr
    Int? min_genome_size
    Int? min_percent_completion
    Int? max_percent_redundancy
    Int? min_class_probability
    File? output_file
    Boolean? just_do_it
    String classifier_file
  }
  command <<<
    anvi-script-predict-CPR-genomes \
      ~{classifier_file} \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(profile_db) then ("--profile-db " +  '"' + profile_db + '"') else ""} \
      ~{if defined(collection_name) then ("--collection-name " +  '"' + collection_name + '"') else ""} \
      ~{true="--list-collections" false="" list_collections} \
      ~{true="--report-only-cpr" false="" report_only_cpr} \
      ~{if defined(min_genome_size) then ("--min-genome-size " +  '"' + min_genome_size + '"') else ""} \
      ~{if defined(min_percent_completion) then ("--min-percent-completion " +  '"' + min_percent_completion + '"') else ""} \
      ~{if defined(max_percent_redundancy) then ("--max-percent-redundancy " +  '"' + max_percent_redundancy + '"') else ""} \
      ~{if defined(min_class_probability) then ("--min-class-probability " +  '"' + min_class_probability + '"') else ""} \
      ~{if defined(output_file) then ("--output-file " +  '"' + output_file + '"') else ""} \
      ~{true="--just-do-it" false="" just_do_it}
  >>>
  parameter_meta {
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen- contigs'"
    profile_db: "Anvi'o profile database"
    collection_name: "Collection name."
    list_collections: "Show available collections and exit."
    report_only_cpr: "Include only bins that look like CPR genomes."
    min_genome_size: "Minimum genome size to consider for CPR in Mbp. Default is 0.500000"
    min_percent_completion: "Minimum percent completion estimate based on anvi'o default single-copy gene collections. Default is 50"
    max_percent_redundancy: "Maxumum percent redundancy or single-copy genes in an anvi'o bin, or a genome to consider for classification. The default is 30"
    min_class_probability: "If the classification confidence is below this don't bother. Default is 75."
    output_file: "File path to store results."
    just_do_it: "Don't bother me with questions or warnings, just do it."
    classifier_file: "Model output generated by anvi-script-gen-CPR- classifier"
  }
}