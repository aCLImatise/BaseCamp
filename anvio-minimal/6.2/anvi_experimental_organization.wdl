version 1.0

task AnviExperimentalOrganization {
  input {
    String? profile_db
    String? contigs_db
    String? input_directory
    String? name
    String? distance
    String? linkage
    Boolean? skip_store_in_db
    File? output_file
    Boolean? dry_run
    File file
  }
  command <<<
    anvi-experimental-organization \
      ~{file} \
      ~{if defined(profile_db) then ("--profile-db " +  '"' + profile_db + '"') else ""} \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(input_directory) then ("--input-directory " +  '"' + input_directory + '"') else ""} \
      ~{if defined(name) then ("--name " +  '"' + name + '"') else ""} \
      ~{if defined(distance) then ("--distance " +  '"' + distance + '"') else ""} \
      ~{if defined(linkage) then ("--linkage " +  '"' + linkage + '"') else ""} \
      ~{true="--skip-store-in-db" false="" skip_store_in_db} \
      ~{if defined(output_file) then ("--output-file " +  '"' + output_file + '"') else ""} \
      ~{true="--dry-run" false="" dry_run}
  >>>
  parameter_meta {
    profile_db: "Anvi'o profile database"
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen- contigs'"
    input_directory: "Input directory where the input files addressed from the configuration file can be found (i.e., the profile database, if PROFILE.db::TABLE notation is used in the configuration file)."
    name: "The name to use when storing the resulting clustering in the database. This name will appear in the interactive interface and other relevant interfaces. Please consider using a short and descriptive single- word (if you do not do that you will make anvi'o complain)."
    distance: "The distance metric for the hierarchical clustering. If you do not use this flag, the distance metric you defined in your clustering config file will be used. If you have not defined one in your config file, then the system default will be used, which is \"euclidean\"."
    linkage: "Same story with the `--distance`, except, the system default for this one is ward."
    skip_store_in_db: "By default, analysis results are stored in the profile database. The use of this flag will let you skip that"
    output_file: "File path to store results."
    dry_run: "Don't do anything real. Test everything, and stop right before wherever the developer said 'well, this is enough testing', and decided to print out results."
    file: "Config file for clustering of contigs. See documentation for help."
  }
}