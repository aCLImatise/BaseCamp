!Command
command:
- assembly.py
- refine_assembly
positional:
- !Positional
  description: "Input assembly, FASTA format, pre-indexed for Picard,\nSamtools, and\
    \ Novoalign."
  position: 0
  name: inFasta
  optional: false
- !Positional
  description: Input reads, unaligned BAM format.
  position: 1
  name: inBam
  optional: false
- !Positional
  description: "Output refined assembly, FASTA format, indexed for\nPicard, Samtools,\
    \ and Novoalign."
  position: 2
  name: outFasta
  optional: false
- !Positional
  description: --min_coverage MIN_COVERAGE
  position: 0
  name: space.
  optional: false
- !Positional
  description: --major_cutoff MAJOR_CUTOFF
  position: 0
  name: unambiguous.
  optional: false
named:
- !Flag
  description: "BAM with reads that are already aligned to inFasta.\nThis bypasses\
    \ the alignment process by novoalign and\ninstead uses the given BAM to make an\
    \ assembly. When\nset, outBam is ignored."
  synonyms:
  - --already_realigned_bam
  args: !SimpleFlagArg
    name: ALREADY_REALIGNED_BAM
  optional: true
- !Flag
  description: "Reads aligned to inFasta. Unaligned and duplicate\nreads have been\
    \ removed. GATK indel realigned."
  synonyms:
  - --outBam
  args: !SimpleFlagArg
    name: OUTBAM
  optional: true
- !Flag
  description: GATK genotype calls for genome in inFasta coordinate
  synonyms:
  - --outVcf
  args: !SimpleFlagArg
    name: OUTVCF
  optional: true
- !Flag
  description: Alignment parameters for Novoalign.
  synonyms:
  - --novo_params
  args: !SimpleFlagArg
    name: NOVO_PARAMS
  optional: true
- !Flag
  description: "[CHR_NAMES [CHR_NAMES ...]]\nRename all output chromosomes (default:\
    \ retain\noriginal chromosome names)"
  synonyms:
  - --chr_names
  args: !EmptyFlagArg {}
  optional: true
- !Flag
  description: "Retain all reads in BAM file? Default is to remove\nunaligned and\
    \ duplicate reads."
  synonyms:
  - --keep_all_reads
  args: !EmptyFlagArg {}
  optional: true
- !Flag
  description: 'JVM virtual memory size (default: 2g)'
  synonyms:
  - --JVMmemory
  args: !SimpleFlagArg
    name: JVMMEMORY
  optional: true
- !Flag
  description: "A path containing the GATK jar file. This overrides\nthe GATK_ENV\
    \ environment variable or the GATK conda\npackage. (default: None)"
  synonyms:
  - --GATK_PATH
  args: !SimpleFlagArg
    name: GATK_PATH
  optional: true
- !Flag
  description: "A path to the novoalign.lic file. This overrides the\nNOVOALIGN_LICENSE_PATH\
    \ environment variable. (default:\nNone)"
  synonyms:
  - --NOVOALIGN_LICENSE_PATH
  args: !SimpleFlagArg
    name: NOVOALIGN_LICENSE_PATH
  optional: true
- !Flag
  description: 'Number of threads (default: 1)'
  synonyms:
  - --threads
  args: !SimpleFlagArg
    name: THREADS
  optional: true
- !Flag
  description: 'Verboseness of output. [default: DEBUG]'
  synonyms:
  - --loglevel
  args: !ChoiceFlagArg
    choices: !!set
      DEBUG:
      ERROR:
      EXCEPTION:
      CRITICAL:
      INFO:
      WARNING:
  optional: true
- !Flag
  description: 'Base directory for temp files. [default: /tmp]'
  synonyms:
  - --tmp_dir
  args: !SimpleFlagArg
    name: TMP_DIR
  optional: true
- !Flag
  description: "Keep the tmp_dir if an exception occurs while running.\nDefault is\
    \ to delete all temp files at the end, even\nif there's a failure.\n"
  synonyms:
  - --tmp_dirKeep
  args: !EmptyFlagArg {}
  optional: true
parent:
subcommands: []
usage: []
help_flag: !Flag
  description: show this help message and exit
  synonyms:
  - -h
  - --help
  args: !EmptyFlagArg {}
  optional: true
usage_flag:
version_flag: !Flag
  description: show program's version number and exit
  synonyms:
  - --version
  - -V
  args: !EmptyFlagArg {}
  optional: true
help_text: "usage: assembly.py subcommand refine_assembly [-h]\n                 \
  \                             [--already_realigned_bam ALREADY_REALIGNED_BAM]\n\
  \                                              [--outBam OUTBAM]\n             \
  \                                 [--outVcf OUTVCF]\n                          \
  \                    [--min_coverage MIN_COVERAGE]\n                           \
  \                   [--major_cutoff MAJOR_CUTOFF]\n                            \
  \                  [--novo_params NOVO_PARAMS]\n                               \
  \               [--chr_names [CHR_NAMES [CHR_NAMES ...]]]\n                    \
  \                          [--keep_all_reads]\n                                \
  \              [--JVMmemory JVMMEMORY]\n                                       \
  \       [--GATK_PATH GATK_PATH]\n                                              [--NOVOALIGN_LICENSE_PATH\
  \ NOVOALIGN_LICENSE_PATH]\n                                              [--threads\
  \ THREADS]\n                                              [--loglevel {DEBUG,INFO,WARNING,ERROR,CRITICAL,EXCEPTION}]\n\
  \                                              [--version] [--tmp_dir TMP_DIR]\n\
  \                                              [--tmp_dirKeep]\n               \
  \                               inFasta inBam outFasta\n\nThis a refinement step\
  \ where we take a crude assembly, align all reads back to\nit, and modify the assembly\
  \ to the majority allele at each position based on\nread pileups. This step considers\
  \ both SNPs as well as indels called by GATK\nand will correct the consensus based\
  \ on GATK calls. Reads are aligned with\nNovoalign, then PCR duplicates are removed\
  \ with Picard (in order to debias the\nallele counts in the pileups), and realigned\
  \ with GATK's IndelRealigner (in\norder to call indels). Output FASTA file is indexed\
  \ for Picard, Samtools, and\nNovoalign.\n\npositional arguments:\n  inFasta    \
  \           Input assembly, FASTA format, pre-indexed for Picard,\n            \
  \            Samtools, and Novoalign.\n  inBam                 Input reads, unaligned\
  \ BAM format.\n  outFasta              Output refined assembly, FASTA format, indexed\
  \ for\n                        Picard, Samtools, and Novoalign.\n\noptional arguments:\n\
  \  -h, --help            show this help message and exit\n  --already_realigned_bam\
  \ ALREADY_REALIGNED_BAM\n                        BAM with reads that are already\
  \ aligned to inFasta.\n                        This bypasses the alignment process\
  \ by novoalign and\n                        instead uses the given BAM to make an\
  \ assembly. When\n                        set, outBam is ignored.\n  --outBam OUTBAM\
  \       Reads aligned to inFasta. Unaligned and duplicate\n                    \
  \    reads have been removed. GATK indel realigned.\n  --outVcf OUTVCF       GATK\
  \ genotype calls for genome in inFasta coordinate\n                        space.\n\
  \  --min_coverage MIN_COVERAGE\n                        Minimum read coverage required\
  \ to call a position\n                        unambiguous.\n  --major_cutoff MAJOR_CUTOFF\n\
  \                        If the major allele is present at a frequency higher\n\
  \                        than this cutoff, we will call an unambiguous base at\n\
  \                        that position. If it is equal to or below this cutoff,\n\
  \                        we will call an ambiguous base representing all\n     \
  \                   possible alleles at that position. [default: 0.5]\n  --novo_params\
  \ NOVO_PARAMS\n                        Alignment parameters for Novoalign.\n  --chr_names\
  \ [CHR_NAMES [CHR_NAMES ...]]\n                        Rename all output chromosomes\
  \ (default: retain\n                        original chromosome names)\n  --keep_all_reads\
  \      Retain all reads in BAM file? Default is to remove\n                    \
  \    unaligned and duplicate reads.\n  --JVMmemory JVMMEMORY\n                 \
  \       JVM virtual memory size (default: 2g)\n  --GATK_PATH GATK_PATH\n       \
  \                 A path containing the GATK jar file. This overrides\n        \
  \                the GATK_ENV environment variable or the GATK conda\n         \
  \               package. (default: None)\n  --NOVOALIGN_LICENSE_PATH NOVOALIGN_LICENSE_PATH\n\
  \                        A path to the novoalign.lic file. This overrides the\n\
  \                        NOVOALIGN_LICENSE_PATH environment variable. (default:\n\
  \                        None)\n  --threads THREADS     Number of threads (default:\
  \ 1)\n  --loglevel {DEBUG,INFO,WARNING,ERROR,CRITICAL,EXCEPTION}\n             \
  \           Verboseness of output. [default: DEBUG]\n  --version, -V         show\
  \ program's version number and exit\n  --tmp_dir TMP_DIR     Base directory for\
  \ temp files. [default: /tmp]\n  --tmp_dirKeep         Keep the tmp_dir if an exception\
  \ occurs while running.\n                        Default is to delete all temp files\
  \ at the end, even\n                        if there's a failure.\n"
generated_using:
- --help
