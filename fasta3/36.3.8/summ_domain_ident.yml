!Command
positional: []
named: []
command:
- summ_domain_ident.pl
parent:
subcommands: []
help_flag:
usage_flag:
version_flag:
help_text: "#!/usr/bin/perl -w\n\n################################################################\n\
  # copyright (c) 2014 by William R. Pearson and The Rector &\n# Visitors of the University\
  \ of Virginia */\n################################################################\n\
  # Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not\
  \ use this file except in compliance with the License.\n# You may obtain a copy\
  \ of the License at\n#\n# http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless\
  \ required by applicable law or agreed to in writing,\n# software distributed under\
  \ this License is distributed on an \"AS\n# IS\" BASIS, WITHOUT WRRANTIES OR CONDITIONS\
  \ OF ANY KIND, either\n# express or implied.  See the License for the specific language\n\
  # governing permissions and limitations under the License. \n################################################################\n\
  \n# summ_domain_ident.pl takes a -m 8CC result file with query-annotated\n# domains,\
  \ and produces a tab-delimited summary of identity across the domains\n# parse:\n\
  # sp|P09488|GSTM1_HUMAN\tgi|121735|sp|P09488.3|GSTM1_HUMAN\t100.00\t218\t0\t0\t\
  1\t218\t1\t218\t2.9e-113\t408.2\t218M\t|RX:1-12:1-12:s=64;b=25.0;I=1.000;Q=47.5;C=exon_1|RX:13-37:13-37:s=128;b=49.9;I=1.000;Q=121.4;C=exon_2|RX:38-59:38-59:s=125;b=48.7;I=1.000;Q=117.9;C=exon_3|RX:60-86:60-86:s=145;b=56.5;I=1.000;Q=141.0;C=exon_4|RX:87-120:87-120:s=185;b=72.1;I=1.000;Q=187.2;C=exon_5|RX:121-152:121-152:s=174;b=67.8;I=1.000;Q=174.5;C=exon_6|RX:153-189:153-189:s=197;b=76.8;I=1.000;Q=201.0;C=exon_7|RX:190-218:190-218:s=151;b=58.9;I=1.000;Q=147.9;C=exon_8\n\
  \n\n\nuse strict;\nuse Getopt::Long;\nuse Pod::Usage;\n\nmy ($shelp, $help) = (0,\
  \ 0);\n\nGetOptions(\n    \"h|?\" => \\$shelp,\n    \"help\" => \\$help,\n    );\n\
  \npod2usage(1) if $shelp;\npod2usage(exitstatus => 0, verbose => 2) if $help;\n\
  pod2usage(1) unless @ARGV;\n\nmy $first_line =1;\n\nmy @a_field_names = qw( score_field\
  \ bits id qval comment );\nmy @domain_names = ();\n\nwhile (my $line = <>) {\n \
  \ next if $line =~ m/^#/;\n  chomp($line);\n  \n  # get last (annotation) field\n\
  \n  my @fields = split(/\\t/,$line);\n  $fields[1] =~ s/^gi\\|\\d+\\|//;\n  $fields[1]\
  \ =~ s/\\.\\d+\\|/\\|/;\n\n  my @annots = split(/\\|/,$fields[-1]);\n  shift @annots;\
  \ # first is blank\n\n  # $annots[...]:\n  # RX:1-12:1-12:s=64;b=25.0;I=1.000;Q=47.5;C=exon_1\n\
  \n  my %dom_ids = ();\n\n  for my $annot (@annots) {\n    my %a_fields = ();\n \
  \   @a_fields{@a_field_names} = split(/;/,$annot);\n    $a_fields{'id'} =~ s/^I=//;\n\
  \    $a_fields{'comment'} =~ s/^C=//;\n\n    $dom_ids{$a_fields{'comment'}} = $a_fields{'id'};\n\
  \n    if ($first_line) {\n      push @domain_names, $a_fields{'comment'};\n    }\n\
  \  }\n  if ($first_line) {\n    print join(\"\\t\",(\"subj_acc          \",\"ident\"\
  ,@domain_names)),\"\\n\";\n    $first_line = 0;\n  }\n\n  for my $dom ( @domain_names\
  \ ) {\n    if (defined($dom_ids{$dom})) {\n      if (100.0 * $dom_ids{$dom} >= $fields[2])\
  \ {\n\t$dom_ids{$dom} .= '+';\n      }\n      else {\n\t$dom_ids{$dom} .= '-';\n\
  \      }\n    }\n    else {\n      $dom_ids{$dom} = '';\n    }\n  }\n\n  print join(\"\
  \\t\",($fields[1],$fields[2],@dom_ids{@domain_names})),\"\\n\";\n}\n"
generated_using:
- --help
