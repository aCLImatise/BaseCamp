from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Int, Boolean, String

Iucn_Sim_Transition_Rates_V0_1_0 = CommandToolBuilder(tool="iucn_sim_transition_rates", base_command=["iucn_sim", "transition_rates"], inputs=[ToolInput(tag="in_species_data", input_type=File(optional=True), prefix="--species_data", doc=InputDocumentation(doc="File containing species list and current IUCN status\nof species, as well as generation length (GL) data\nestimates if available. GL data is only used for '--\nextinction_probs_mode 0' ('species_data.txt' output\nfrom get_iucn_data function).")), ToolInput(tag="in_iucn_history", input_type=File(optional=True), prefix="--iucn_history", doc=InputDocumentation(doc="File containing IUCN history of the reference group\nfor transition rate estimation ('*_iucn_history.txt'\noutput of get_iucn_data function).")), ToolInput(tag="in_outdir", input_type=File(optional=True), prefix="--outdir", doc=InputDocumentation(doc="Provide path to outdir where results will be saved.")), ToolInput(tag="in_extinction_probs_mode", input_type=Int(optional=True), prefix="--extinction_probs_mode", doc=InputDocumentation(doc="Set to '0' to use the critE EX mode to determine\nextinction probabilities for each status (e.g. Mooers\net al, 2008 approach). Set to '1' to use empirical EX\nmode, based on the recorded extinction in the IUCN\nhistory of the reference group (e.g. Monroe et al,\n2019 approach). GL data can only be used in the critE\nEX mode ('0').")), ToolInput(tag="in_possibly_extinct_list", input_type=File(optional=True), prefix="--possibly_extinct_list", doc=InputDocumentation(doc="File containing list of taxa that are likely extinct,\nbut that are listed as extant in IUCN, including the\nyear of their assessment as possibly extinct\n('possibly_extinct_reference_taxa.txt' output from\nget_iucn_data function). These species will then be\nmodeled as extinct by the esimate_rates function,\nwhich will effect the estimated extinction\nprobabilities when chosing `--extinction_probs_mode 1`")), ToolInput(tag="in_species_specific_regression", input_type=Boolean(optional=True), prefix="--species_specific_regression", doc=InputDocumentation(doc="Enables species-specific regression fitting to model\nLC, NT, and VU extinction probabilities. Only\napplicable with --extinction_probs_mode 0 (critE mode)\nand if GL is provided.")), ToolInput(tag="in_rate_samples", input_type=Int(optional=True), prefix="--rate_samples", doc=InputDocumentation(doc="How many rates to sample from the posterior transition\nrate estimates. These rates will be used to populate\ntransition rate q-matrices for downstream simulations.\nLater on you can still chose to run more simulation\nreplicates than the here specified number of produced\ntransition rate q-matrices, in which case the\n`run_sim` function will randomely resample from the\navailable q-matrices (default=100, this is ususally\nsufficient, larger numbers can lead to very high\noutput file size volumes).")), ToolInput(tag="in_n_gen", input_type=Int(optional=True), prefix="--n_gen", doc=InputDocumentation(doc="Number of generations for MCMC for transition rate\nestimation (default=100000).")), ToolInput(tag="in_burnin", input_type=Int(optional=True), prefix="--burnin", doc=InputDocumentation(doc="Burn-in for MCMC for transition rate estimation\n(default=1000).")), ToolInput(tag="in_seed", input_type=String(optional=True), prefix="--seed", doc=InputDocumentation(doc="Set starting seed for the MCMC."))], outputs=[ToolOutput(tag="out_iucn_history", output_type=File(optional=True), selector=InputSelector(input_to_select="in_iucn_history", type_hint=File()), doc=OutputDocumentation(doc="File containing IUCN history of the reference group\nfor transition rate estimation ('*_iucn_history.txt'\noutput of get_iucn_data function).")), ToolOutput(tag="out_possibly_extinct_list", output_type=File(optional=True), selector=InputSelector(input_to_select="in_possibly_extinct_list", type_hint=File()), doc=OutputDocumentation(doc="File containing list of taxa that are likely extinct,\nbut that are listed as extant in IUCN, including the\nyear of their assessment as possibly extinct\n('possibly_extinct_reference_taxa.txt' output from\nget_iucn_data function). These species will then be\nmodeled as extinct by the esimate_rates function,\nwhich will effect the estimated extinction\nprobabilities when chosing `--extinction_probs_mode 1`"))], container="quay.io/biocontainers/iucn_sim:2.2.0--pyr40_0", version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Iucn_Sim_Transition_Rates_V0_1_0().translate("wdl")

