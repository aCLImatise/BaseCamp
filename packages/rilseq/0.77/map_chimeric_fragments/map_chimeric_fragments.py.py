from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import Boolean, Int, Directory, File, Float, String

Map_Chimeric_Fragments_Py_V0_1_0 = CommandToolBuilder(tool="map_chimeric_fragments.py", base_command=["map_chimeric_fragments.py"], inputs=[ToolInput(tag="in_reverse_complement", input_type=Boolean(optional=True), prefix="--reverse_complement", doc=InputDocumentation(doc="Treat the reads as reverse complement. This means that\nthe first read is actually the 3' end of the fragment.\nUse this when using Jonathan Livny's protocol for\nlibrary construction (default: False)")), ToolInput(tag="in_transcripts", input_type=Int(optional=True), prefix="--transcripts", doc=InputDocumentation(doc="A gff file of transcripts. If given, screen reads that\nmight reside from the same transcript. Very useful for\nscreening ribosomal RNAs. Otherwise use only the size\nlimit. (default: None)")), ToolInput(tag="in_distance", input_type=Int(optional=True), prefix="--distance", doc=InputDocumentation(doc="Maximal distance between concordant reads. If they are\ngenerated from the same strand but larger than this\ndistance they will be considered as chimeric.\n(default: 1000)")), ToolInput(tag="in_dust_thr", input_type=Int(optional=True), prefix="--dust_thr", doc=InputDocumentation(doc="Threshold for dust filter. If 0 skip. (default: 10)")), ToolInput(tag="in_dir_out", input_type=Directory(optional=True), prefix="--dirout", doc=InputDocumentation(doc="Output directory, default is this directory. (default:\n./remapped-data/)")), ToolInput(tag="in_all_reads", input_type=File(optional=True), prefix="--all_reads", doc=InputDocumentation(doc="Map all reads in the BAM file, write all the fragments\nthat are not chimeric to the file specified here e.g.\n-a single_fragments_mapping.txt. By default these\nreads will be written to the standard output.\n(default: None)")), ToolInput(tag="in_add_all_reads", input_type=File(optional=True), prefix="--add_all_reads", doc=InputDocumentation(doc="By default map all reads in the BAM file, write all\nthe fragments, either chimeric ro single to the output\nfile (stdout). If this option is selected don't wirte\nthe single reads. (default: True)")), ToolInput(tag="in_keep_circular", input_type=Boolean(optional=True), prefix="--keep_circular", doc=InputDocumentation(doc="Remove reads that are probably a result of circular\nRNAs by default. If the reads are close but in\nopposite order they will be removed unless this\nargument is set. (default: False)")), ToolInput(tag="in_length", input_type=Int(optional=True), prefix="--length", doc=InputDocumentation(doc="Length of sequence to map. Take the ends of the\nfragment and map each to the genome. The length of the\nregion will be this length. (default: 25)")), ToolInput(tag="in_max_mismatches", input_type=Int(optional=True), prefix="--max_mismatches", doc=InputDocumentation(doc="Find alignment allowing this number of mismatches. If\nthere are more than one match with this number of\nmismatches the read will be treated as if it might\nmatch all of them and if there is one scenario in\nwhich the two ends are concordant it will be removed.\n(default: 3)")), ToolInput(tag="in_allowed_mismatches", input_type=Int(optional=True), prefix="--allowed_mismatches", doc=InputDocumentation(doc="This number of mismatches is allowed between the a\nmatch and the genome. If there are mapped reads with\nless than --max_mismatches mismatches but more than\nthis number the read will be ignored. (default: 1)")), ToolInput(tag="in_skip_mapping", input_type=Boolean(optional=True), prefix="--skip_mapping", doc=InputDocumentation(doc="Skip the mapping step, use previously mapped files.\n(default: False)")), ToolInput(tag="in_maxg", input_type=Float(optional=True), prefix="--maxG", doc=InputDocumentation(doc="If a read has more than this fraction of Gs remove\nthis readfrom the screen. This is due to nextseq\ntechnology which puts G where there is no signal, the\npoly G might just be noise. When using other\nsequencing technologies set to 1. (default: 0.8)")), ToolInput(tag="in_feature", input_type=File(optional=True), prefix="--feature", doc=InputDocumentation(doc="Name of features to count on the GTF file (column 2).\n(default: exon)")), ToolInput(tag="in_identifier", input_type=File(optional=True), prefix="--identifier", doc=InputDocumentation(doc="Name of identifier to print (in column 8 of the GTF\nfile). (default: gene_id)")), ToolInput(tag="in_bwa_exec", input_type=String(optional=True), prefix="--bwa_exec", doc=InputDocumentation(doc="bwa command (default: bwa)")), ToolInput(tag="in_sam_tools_cmd", input_type=String(optional=True), prefix="--samtools_cmd", doc=InputDocumentation(doc="Samtools executable. (default: samtools)")), ToolInput(tag="in_params_aln", input_type=Int(optional=True), prefix="--params_aln", doc=InputDocumentation(doc="Additional parameters for aln function of bwa.\n(default: -t 8 -N -M 0)")), ToolInput(tag="in_sam_se_params", input_type=Int(optional=True), prefix="--samse_params", doc=InputDocumentation(doc="Additional parameters for samse function of bwa.\n(default: -n 1000)\n")), ToolInput(tag="in_genome_fast_a", input_type=String(), position=0, doc=InputDocumentation(doc="Name of genome fasta file. The file must be indexed\nusingbwa index command prior to this run.")), ToolInput(tag="in_bam_files", input_type=String(), position=1, doc=InputDocumentation(doc="One or more bam files."))], outputs=[ToolOutput(tag="out_dir_out", output_type=Directory(optional=True), selector=InputSelector(input_to_select="in_dir_out", type_hint=File()), doc=OutputDocumentation(doc="Output directory, default is this directory. (default:\n./remapped-data/)")), ToolOutput(tag="out_all_reads", output_type=File(optional=True), selector=InputSelector(input_to_select="in_all_reads", type_hint=File()), doc=OutputDocumentation(doc="Map all reads in the BAM file, write all the fragments\nthat are not chimeric to the file specified here e.g.\n-a single_fragments_mapping.txt. By default these\nreads will be written to the standard output.\n(default: None)")), ToolOutput(tag="out_add_all_reads", output_type=File(optional=True), selector=InputSelector(input_to_select="in_add_all_reads", type_hint=File()), doc=OutputDocumentation(doc="By default map all reads in the BAM file, write all\nthe fragments, either chimeric ro single to the output\nfile (stdout). If this option is selected don't wirte\nthe single reads. (default: True)"))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Map_Chimeric_Fragments_Py_V0_1_0().translate("wdl", allow_empty_container=True)

