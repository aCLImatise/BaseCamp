version 1.0

task MageckPlot {
  input {
    String? count_table
    String? gene_summary
    String? genes
    String? samples
    String? output_prefix
    String? norm_method
    String? control_sg_rna
    String? control_gene
    Boolean? keep_tmp
  }
  command <<<
    mageck plot \
      ~{if defined(count_table) then ("--count-table " +  '"' + count_table + '"') else ""} \
      ~{if defined(gene_summary) then ("--gene-summary " +  '"' + gene_summary + '"') else ""} \
      ~{if defined(genes) then ("--genes " +  '"' + genes + '"') else ""} \
      ~{if defined(samples) then ("--samples " +  '"' + samples + '"') else ""} \
      ~{if defined(output_prefix) then ("--output-prefix " +  '"' + output_prefix + '"') else ""} \
      ~{if defined(norm_method) then ("--norm-method " +  '"' + norm_method + '"') else ""} \
      ~{if defined(control_sg_rna) then ("--control-sgrna " +  '"' + control_sg_rna + '"') else ""} \
      ~{if defined(control_gene) then ("--control-gene " +  '"' + control_gene + '"') else ""} \
      ~{true="--keep-tmp" false="" keep_tmp}
  >>>
  parameter_meta {
    count_table: "Provide a tab-separated count table instead of sam files. Each line in the table should include sgRNA name (1st column), gene name (2nd column) and read counts in each sample."
    gene_summary: "The gene summary file generated by the test command."
    genes: "A list of genes to be plotted, separated by comma. Default: none."
    samples: "A list of samples to be plotted, separated by comma. Default: using all samples in the count table."
    output_prefix: "The prefix of the output file(s). Default sample1."
    norm_method: "Method for normalization, including \"none\" (no normalization), \"median\" (median normalization, default), \"total\" (normalization by total read counts), \"control\" (normalization by control sgRNAs specified by the --control-sgrna option)."
    control_sg_rna: "A list of control sgRNAs for normalization and for generating the null distribution of RRA."
    control_gene: "A list of genes whose sgRNAs are used as control sgRNAs for normalization and for generating the null distribution of RRA."
    keep_tmp: "Keep intermediate files."
  }
}