version 1.0

task Evolve.py {
  input {
    String? output_dir
    String? write_backups_every
    String? write_state_every
    String? burnin_samples
    String? mcmc_samples
    String? mh_iterations
    String? random_seed
    String? tmp_dir
    String? params
    String ssm_file
    String cnv_file
  }
  command <<<
    evolve.py \
      ~{ssm_file} \
      ~{cnv_file} \
      ~{if defined(output_dir) then ("--output-dir " +  '"' + output_dir + '"') else ""} \
      ~{if defined(write_backups_every) then ("--write-backups-every " +  '"' + write_backups_every + '"') else ""} \
      ~{if defined(write_state_every) then ("--write-state-every " +  '"' + write_state_every + '"') else ""} \
      ~{if defined(burnin_samples) then ("--burnin-samples " +  '"' + burnin_samples + '"') else ""} \
      ~{if defined(mcmc_samples) then ("--mcmc-samples " +  '"' + mcmc_samples + '"') else ""} \
      ~{if defined(mh_iterations) then ("--mh-iterations " +  '"' + mh_iterations + '"') else ""} \
      ~{if defined(random_seed) then ("--random-seed " +  '"' + random_seed + '"') else ""} \
      ~{if defined(tmp_dir) then ("--tmp-dir " +  '"' + tmp_dir + '"') else ""} \
      ~{if defined(params) then ("--params " +  '"' + params + '"') else ""}
  >>>
  parameter_meta {
    output_dir: "Path to output directory (default: None)"
    write_backups_every: "Number of iterations to go between writing backups of program state (default: 100)"
    write_state_every: "Number of iterations between writing program state to disk. Higher values reduce IO burden at the cost of losing progress made if program is interrupted. (default: 10)"
    burnin_samples: "Number of burnin samples (default: 1000)"
    mcmc_samples: "Number of MCMC samples (default: 2500)"
    mh_iterations: "Number of Metropolis-Hastings iterations (default: 5000)"
    random_seed: "Random seed for initializing MCMC sampler (default: None)"
    tmp_dir: "Path to directory for temporary files (default: None)"
    params: "JSON file listing run parameters, generated by the parser (default: None)"
    ssm_file: "File listing SSMs (simple somatic mutations, i.e., single nucleotide variants. For proper format, see README.md."
    cnv_file: "File listing CNVs (copy number variations). For proper format, see README.md."
  }
}