from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import String, Directory, File, Int, Float, Boolean

Sciphi_V0_1_0 = CommandToolBuilder(tool="sciphi", base_command=["sciphi"], inputs=[ToolInput(tag="in_in", input_type=String(optional=True), prefix="--in", doc=InputDocumentation(doc="Name of the BAM files used to create the mpileup.")), ToolInput(tag="in_il", input_type=Directory(optional=True), prefix="--il", doc=InputDocumentation(doc="Directory from which to read intermediate results.")), ToolInput(tag="in_ex", input_type=File(optional=True), prefix="--ex", doc=InputDocumentation(doc="File name of exclusion list (VCF format), containing\nloci which should be ignored.")), ToolInput(tag="in_me", input_type=File(optional=True), prefix="--me", doc=InputDocumentation(doc="File name of mutations to exclude during the\nsequencing error rate estimation (VCF format).")), ToolInput(tag="in_inc", input_type=File(optional=True), prefix="--inc", doc=InputDocumentation(doc="File name of inclusion list (VCF format) containing\nVariants (CHROM, POS, REF, ALT) that should be\nincluded.")), ToolInput(tag="in_prefix_output_files", input_type=String(optional=True), prefix="-o", doc=InputDocumentation(doc="Prefix of output files.")), ToolInput(tag="in_ol", input_type=Directory(optional=True), prefix="--ol", doc=InputDocumentation(doc="This option is deprecated. The index will be saved in\na folder specified with -o in 'last_index'. If\ndesired, one can continue from here to explore more\nsearch space.")), ToolInput(tag="in_sa", input_type=Int(optional=True), prefix="--sa", doc=InputDocumentation(doc="Sampling step. If a value x different from 0 is\nspecified, every x iteration, after the burn in phase,\nan index will be writen to disk to provide a posterior\nsampling. [0]")), ToolInput(tag="in_maximal_number_iterations", input_type=Int(optional=True), prefix="-l", doc=InputDocumentation(doc="Maximal number of iterations before sampling form the\nposterior distribution of the mutation to cell\nassignment. [1000000]")), ToolInput(tag="in_ls", input_type=Int(optional=True), prefix="--ls", doc=InputDocumentation(doc="Number of iterations in which the mutation to cell\nassignment is sampled. [100000]")), ToolInput(tag="in_lz", input_type=Int(optional=True), prefix="--lz", doc=InputDocumentation(doc="Set to 1 if zygosity should be learned. The zygosity\nrate is the fraction of mutations which are homozygous\nin all cells. [0]")), ToolInput(tag="in_zy_g", input_type=Int(optional=True), prefix="--zyg", doc=InputDocumentation(doc="Zygosity rate. [0]")), ToolInput(tag="in_pr", input_type=Float(optional=True), prefix="--pr", doc=InputDocumentation(doc="Prior mutation rate [0.0001].")), ToolInput(tag="in_arg_mark_loci", input_type=Boolean(optional=True), prefix="-u", doc=InputDocumentation(doc="[ --uniq ] arg      Mark loci with this number of cells being mutated as\n'PASS'. [1]")), ToolInput(tag="in_parameter_estimation_rate", input_type=Float(optional=True), prefix="-e", doc=InputDocumentation(doc="Parameter estimation rate, i.e. the fraction of loops\nused to estimate the different parameters. [0.2]")), ToolInput(tag="in_ur", input_type=Float(optional=True), prefix="--ur", doc=InputDocumentation(doc="Data usage rate increment steps. In order to speed up\nthe algorithm one can choose to iteratively add more\nand more of the candidate loci while learning the tree\nmodel. For example, 0.1 would mean to start with 10%\nof the data, then use 20%, and so on. Per default, all\ndata is used from the start. [1]")), ToolInput(tag="in_seed", input_type=Int(optional=True), prefix="--seed", doc=InputDocumentation(doc="Seed for the random number generator. [42]")), ToolInput(tag="in_tree_score_type", input_type=Int(optional=True), prefix="-t", doc=InputDocumentation(doc="Tree score type [m (max), s (sum)]. [s]")), ToolInput(tag="in_wild_mean", input_type=Float(optional=True), prefix="--wildMean", doc=InputDocumentation(doc="Mean error rate. If the sequencing error rate should\nnot be learned '--ese 0' one can specify it. [0.001]")), ToolInput(tag="in_wild_over_dis", input_type=Int(optional=True), prefix="--wildOverDis", doc=InputDocumentation(doc="Initial overdispersion for wild type. The\noverdispersion is learned during the tree traversal.\n[100]")), ToolInput(tag="in_mutation_over_dis", input_type=Int(optional=True), prefix="--mutationOverDis", doc=InputDocumentation(doc="Initial overdispersion for mutant type. The\noverdispersion is learned during the tree\ntraversal.[2]")), ToolInput(tag="in_ese", input_type=Int(optional=True), prefix="--ese", doc=InputDocumentation(doc="Estimate the sequencing error rate. [1]")), ToolInput(tag="in_sub", input_type=Float(optional=True), prefix="--sub", doc=InputDocumentation(doc="PCR substitution rate. An error early during the PCR\namplification can result in high allele fractions.\nThese are typically filtered out by requiring at least\ntwo cells to be mutated. However, sometimes the PCR\nerror in one cell is a real mutation in others. If in\nsuch a scenario the coverage for the cell with the PCR\nerror is high, SCIPhI will introduce false positives.\nThis can be avoided by specifying the PCR error rate.\nAs these events are rather unlikely very small values,\nsuch as 0.0000001 should be chosen. In practice 0\nworks very well.  [0]")), ToolInput(tag="in_md", input_type=Int(optional=True), prefix="--md", doc=InputDocumentation(doc="Window size in which only x (see option '--mmw')\nmutations are allowed to be present. Some sequences\nare prone to produce sequencing errors, which can be\navoided by specifying a range in which only x\nmutations are allowed. [1]")), ToolInput(tag="in_mmw", input_type=Int(optional=True), prefix="--mmw", doc=InputDocumentation(doc="Maximum number of mutations allowed per window. [1]")), ToolInput(tag="in_cwm", input_type=Int(optional=True), prefix="--cwm", doc=InputDocumentation(doc="Number of tumor cells required to have a mutation in\norder to be called. [2]")), ToolInput(tag="in_mnp", input_type=Int(optional=True), prefix="--mnp", doc=InputDocumentation(doc="Number of cells which need to pass the filters\ndescribed below. [2]")), ToolInput(tag="in_mc", input_type=Int(optional=True), prefix="--mc", doc=InputDocumentation(doc="Minimum coverage required per cell. [1]")), ToolInput(tag="in_ms", input_type=Int(optional=True), prefix="--ms", doc=InputDocumentation(doc="Minimum number of reads required to support the\nalternative. [3]")), ToolInput(tag="in_mf", input_type=Int(optional=True), prefix="--mf", doc=InputDocumentation(doc="Minimum required frequency of reads supporting the\nalternative per cell. [0]")), ToolInput(tag="in_mff", input_type=Float(optional=True), prefix="--mff", doc=InputDocumentation(doc="Mean of acceptable variant allele frequency across all\ncells for a specific locus. Mapping artifacts may\nresult in low allele frequencies across cells. In\norder to filter these events out we apply a\nlog-likelihood ratio test where the sequencing error\nmodel has a mean of this value. [0.25]")), ToolInput(tag="in_bns", input_type=Int(optional=True), prefix="--bns", doc=InputDocumentation(doc="Loci with up to this number of alternative supporting\nreads in the bulk control sample will be skipped as\ngermline. [2]")), ToolInput(tag="in_bnc", input_type=Int(optional=True), prefix="--bnc", doc=InputDocumentation(doc="Minimum required coverage of reads in the bulk control\nsample. [6]")), ToolInput(tag="in_ncf", input_type=Int(optional=True), prefix="--ncf", doc=InputDocumentation(doc="Normal cell filter. Currently there are three options:\n(0) Do not use the normal cells for filtering; (1) use\na simple filtering scheme excluding mutations if the\nprobability of being mutated is higher than not being\nmutated for any cell independently; (2) filter\nmutations where the probability that at least one cell\nis mutated is higher than no cell is mutated. Note\nthat in contrast to (1) the cells are not independent\nand cells with no alternative support need to be\nexplained via dropout events. [1]")), ToolInput(tag="in_mnc", input_type=Int(optional=True), prefix="--mnc", doc=InputDocumentation(doc="Maximum number of control cells allowed to be mutated.\n[0]")), ToolInput(tag="in_unc", input_type=String(optional=True), prefix="--unc", doc=InputDocumentation(doc="Use normal cells for tree reconstruction. [false]"))], outputs=[], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Sciphi_V0_1_0().translate("wdl", allow_empty_container=True)

