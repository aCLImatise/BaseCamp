version 1.0

task Anviexportsplitsandcoverages {
  input {
    String? profile_db
    String? contigs_db
    File? output_dir
    File? output_file_prefix
    Boolean? splits_mode
    Boolean? report_contigs
    Boolean? use_q_two_q_three_coverages
  }
  command <<<
    anvi_export_splits_and_coverages \
      ~{if defined(profile_db) then ("--profile-db " +  '"' + profile_db + '"') else ""} \
      ~{if defined(contigs_db) then ("--contigs-db " +  '"' + contigs_db + '"') else ""} \
      ~{if defined(output_dir) then ("--output-dir " +  '"' + output_dir + '"') else ""} \
      ~{if defined(output_file_prefix) then ("--output-file-prefix " +  '"' + output_file_prefix + '"') else ""} \
      ~{if (splits_mode) then "--splits-mode" else ""} \
      ~{if (report_contigs) then "--report-contigs" else ""} \
      ~{if (use_q_two_q_three_coverages) then "--use-Q2Q3-coverages" else ""}
  >>>
  runtime {
    docker: "None"
  }
  parameter_meta {
    profile_db: "Anvi'o profile database"
    contigs_db: "Anvi'o contigs database generated by 'anvi-gen-\\ncontigs'"
    output_dir: "Directory path for output files"
    output_file_prefix: "A prefix to be used while naming the output files (no\\nfile type extensions please; just a prefix)."
    splits_mode: "Specify this flag if you would like to output\\ncoverages of individual 'splits', rather than their\\n'parent' contig coverages."
    report_contigs: "By default this program reports sequences and their\\ncoverages for 'splits'. By using this flag, you can\\nreport contig sequences and coverages instead. For\\nobvious reasons, you can't use this flag with\\n`--splits-mode` flag."
    use_q_two_q_three_coverages: "By default this program reports the mean coverage of a\\nsplit (or contig, see --report-contigs) for each\\nsample. By using this flag, you can report the mean\\nQ2Q3 coverage by excluding 25 percent of the\\nnucleotide positions with the smallest coverage\\nvalues, and 25 percent of the nucleotide positions\\nwith the largest coverage values. The hope is that\\nthis removes 'outlier' positions resulting from non-\\nspecific mapping, etc. that skew the mean coverage\\nestimate.\\n"
  }
  output {
    File out_stdout = stdout()
    File out_output_dir = "${in_output_dir}"
    File out_output_file_prefix = "${in_output_file_prefix}"
  }
}