from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Boolean, String, Float, Int

Percolator_V0_1_0 = CommandToolBuilder(tool="percolator", base_command=["percolator"], inputs=[ToolInput(tag="in_xml_output", input_type=File(optional=True), prefix="--xmloutput", doc=InputDocumentation(doc="Path to xml-output (pout) file.")), ToolInput(tag="in_std_input_tab", input_type=Boolean(optional=True), prefix="--stdinput-tab", doc=InputDocumentation(doc="Read percolator tab-input format\n(pin-tab) from standard input")), ToolInput(tag="in_std_input_xml", input_type=Boolean(optional=True), prefix="--stdinput-xml", doc=InputDocumentation(doc="Read percolator xml-input format\n(pin-xml) from standard input")), ToolInput(tag="in_decoy_xml_output", input_type=Boolean(optional=True), prefix="--decoy-xml-output", doc=InputDocumentation(doc="Include decoys (PSMs, peptides\nand/or proteins) in the\nxml-output. Only available if -X\nis set.")), ToolInput(tag="in_cpos", input_type=String(optional=True), prefix="--Cpos", doc=InputDocumentation(doc="Cpos, penalty for mistakes made on\npositive examples. Set by cross\nvalidation if not specified.")), ToolInput(tag="in_c_neg", input_type=String(optional=True), prefix="--Cneg", doc=InputDocumentation(doc="Cneg, penalty for mistakes made on\nnegative examples. Set by cross\nvalidation if not specified or if\n-p is not specified.")), ToolInput(tag="in_test_fdr", input_type=Float(optional=True), prefix="--testFDR", doc=InputDocumentation(doc="False discovery rate threshold for\nevaluating best cross validation\nresult and reported end result.\nDefault = 0.01.")), ToolInput(tag="in_train_fdr", input_type=Float(optional=True), prefix="--trainFDR", doc=InputDocumentation(doc="False discovery rate threshold to\ndefine positive examples in\ntraining. Set to testFDR if 0.\nDefault = 0.01.")), ToolInput(tag="in_maxiter", input_type=Int(optional=True), prefix="--maxiter", doc=InputDocumentation(doc="Maximal number of iterations.\nDefault = 10.")), ToolInput(tag="in_subset_max_train", input_type=Int(optional=True), prefix="--subset-max-train", doc=InputDocumentation(doc="Only train an SVM on a subset of\n<x> PSMs, and use the resulting\nscore vector to evaluate the other\nPSMs. Recommended when analyzing\nhuge numbers (>1 million) of PSMs.\nWhen set to 0, all PSMs are used\nfor training as normal. Default =\n0.")), ToolInput(tag="in_quick_validation", input_type=Boolean(optional=True), prefix="--quick-validation", doc=InputDocumentation(doc="Quicker execution by reduced\ninternal cross-validation.")), ToolInput(tag="in_tab_out", input_type=File(optional=True), prefix="--tab-out", doc=InputDocumentation(doc="Output computed features to given\nfile in pin-tab format.")), ToolInput(tag="in_tab_in", input_type=File(optional=True), prefix="--tab-in", doc=InputDocumentation(doc="[set by default] Input file given\nin pin-tab format. This is the\ndefault setting, flag only present\nfor backwards compatibility.")), ToolInput(tag="in_xml_in", input_type=File(optional=True), prefix="--xml-in", doc=InputDocumentation(doc="Input file given in deprecated\npin-xml format generated by e.g.\nsqt2pin with the -k option")), ToolInput(tag="in_weights", input_type=File(optional=True), prefix="--weights", doc=InputDocumentation(doc="Output final weights to the given")), ToolInput(tag="in_in_it_weights", input_type=File(optional=True), prefix="--init-weights", doc=InputDocumentation(doc="Read the unnormalized initial\nweights from the third line of the\ngiven file. This can be the output\nof the --weights option from a\nprevious Percolator analysis. Note\nthat the weights must be in the\nsame order as the features in the\nPSM input file(s).")), ToolInput(tag="in_static", input_type=Boolean(optional=True), prefix="--static", doc=InputDocumentation(doc="Use the provided initial weights\nas a static model. If used, the\n--init-weights option must be\nspecified.")), ToolInput(tag="in_default_direction", input_type=Boolean(optional=True), prefix="--default-direction", doc=InputDocumentation(doc="<[-]?featureName>        Use given feature name as initial\nsearch direction, can be negated\nto indicate that a lower value is\nbetter.")), ToolInput(tag="in_verbose", input_type=Int(optional=True), prefix="--verbose", doc=InputDocumentation(doc="Set verbosity of output: 0=no\nprocessing info, 5=all. Default =\n2")), ToolInput(tag="in_no_terminate", input_type=Boolean(optional=True), prefix="--no-terminate", doc=InputDocumentation(doc="Do not stop execution when\nencountering questionable SVM\ninputs or results.")), ToolInput(tag="in_unit_norm", input_type=Boolean(optional=True), prefix="--unitnorm", doc=InputDocumentation(doc="Use unit normalization [0-1]\ninstead of standard deviation\nnormalization")), ToolInput(tag="in_test_each_iteration", input_type=Boolean(optional=True), prefix="--test-each-iteration", doc=InputDocumentation(doc="Measure performance on test set\neach iteration")), ToolInput(tag="in_override", input_type=Boolean(optional=True), prefix="--override", doc=InputDocumentation(doc="Override error check and do not\nfall back on default score vector\nin case of suspect score vector\nfrom SVM.")), ToolInput(tag="in_seed", input_type=Int(optional=True), prefix="--seed", doc=InputDocumentation(doc="Set seed of the random number\ngenerator. Default = 1")), ToolInput(tag="in_doc", input_type=Boolean(optional=True), prefix="--doc", doc=InputDocumentation(doc="Include description of correct\nfeatures, i.e. features describing\nthe difference between the\nobserved and predicted isoelectric\npoint, retention time and\nprecursor mass.")), ToolInput(tag="in_klammer", input_type=Boolean(optional=True), prefix="--klammer", doc=InputDocumentation(doc="Retention time features are\ncalculated as in Klammer et al.\nOnly available if -D is set.")), ToolInput(tag="in_results_peptides", input_type=File(optional=True), prefix="--results-peptides", doc=InputDocumentation(doc="Output tab delimited results of\npeptides to a file instead of\nstdout (will be ignored if used\nwith -U option)")), ToolInput(tag="in_decoy_results_peptides", input_type=File(optional=True), prefix="--decoy-results-peptides", doc=InputDocumentation(doc="Output tab delimited results for\ndecoy peptides into a file (will\nbe ignored if used with -U option)")), ToolInput(tag="in_results_psms", input_type=File(optional=True), prefix="--results-psms", doc=InputDocumentation(doc="Output tab delimited results of\nPSMs to a file instead of stdout")), ToolInput(tag="in_decoy_results_psms", input_type=File(optional=True), prefix="--decoy-results-psms", doc=InputDocumentation(doc="Output tab delimited results for\ndecoy PSMs into a file")), ToolInput(tag="in_only_psms", input_type=Boolean(optional=True), prefix="--only-psms", doc=InputDocumentation(doc="Report results only at the PSM\nlevel. This flag causes Percolator\nto skip the step that selects the\ntop-scoring PSM per peptide;\nhence, peptide-level results are\nleft out and only PSM-level\nresults are reported.")), ToolInput(tag="in_post_processing_mix_max", input_type=Boolean(optional=True), prefix="--post-processing-mix-max", doc=InputDocumentation(doc="Use the mix-max method to assign\nq-values and PEPs. Note that this\noption only has an effect if the\ninput PSMs are from separate\ntarget and decoy searches. This is\nthe default setting.")), ToolInput(tag="in_post_processing_tdc", input_type=Boolean(optional=True), prefix="--post-processing-tdc", doc=InputDocumentation(doc="Replace the mix-max method by\ntarget-decoy competition for\nassigning q-values and PEPs. If\nthe input PSMs are from separate\ntarget and decoy searches,\nPercolator's SVM scores will be\nused to eliminate the lower\nscoring target or decoy PSM(s) of\neach scan+expMass combination. If\nthe input PSMs are detected to be\ncoming from a concatenated search,\nthis option will be turned on\nautomatically, as this is\nincompatible with the mix-max\nmethod. In case this detection\nfails, turn this option on\nexplicitly.")), ToolInput(tag="in_search_input", input_type=String(optional=True), prefix="--search-input", doc=InputDocumentation(doc="Specify the type of target-decoy\nsearch: 'auto' (Percolator\nattempts to detect the search type\nautomatically), 'concatenated'\n(single search on concatenated\ntarget-decoy protein db) or\n'separate' (two searches, one\nagainst target and one against\ndecoy protein db). Default =\n'auto'.")), ToolInput(tag="in_no_schema_validation", input_type=Boolean(optional=True), prefix="--no-schema-validation", doc=InputDocumentation(doc="Skip validation of input file\nagainst xml schema.")), ToolInput(tag="in_picked_protein", input_type=File(optional=True), prefix="--picked-protein", doc=InputDocumentation(doc="Use the picked protein-level FDR\nto infer protein probabilities.\nProvide the fasta file as the\nargument to this flag, which will\nbe used for protein grouping based\non an in-silico digest. If no\nfasta file is available or protein\ngrouping is not desired, set this\nflag to 'auto' to skip protein\ngrouping.")), ToolInput(tag="in_fido_protein", input_type=Boolean(optional=True), prefix="--fido-protein", doc=InputDocumentation(doc="Use the Fido algorithm to infer\nprotein probabilities")), ToolInput(tag="in_results_proteins", input_type=File(optional=True), prefix="--results-proteins", doc=InputDocumentation(doc="Output tab delimited results of\nproteins to a file instead of\nstdout (Only valid if option -A or\n-f is active)")), ToolInput(tag="in_decoy_results_proteins", input_type=File(optional=True), prefix="--decoy-results-proteins", doc=InputDocumentation(doc="Output tab delimited results for\ndecoy proteins into a file (Only\nvalid if option -A or -f is\nactive)")), ToolInput(tag="in_protein_decoy_pattern", input_type=File(optional=True), prefix="--protein-decoy-pattern", doc=InputDocumentation(doc="Define the text pattern to\nidentify decoy proteins in the\ndatabase for the picked-protein\nalgorithm. This will have no\neffect on the target/decoy labels\nspecified in the input file.\nDefault = 'random_'.")), ToolInput(tag="in_protein_enzyme", input_type=Boolean(optional=True), prefix="--protein-enzyme", doc=InputDocumentation(doc="Type of enzyme used for in silico\nprotein digestion for picked\nprotein-level FDR estimation. One\nof\n'no_enzyme','elastase','pepsin','p\nroteinasek','thermolysin','trypsin\np','chymotrypsin','lys-n','lys-c',\n'arg-c','asp-n','glu-c','trypsin'.\nDefault='trypsin'.")), ToolInput(tag="in_protein_report_fragments", input_type=Boolean(optional=True), prefix="--protein-report-fragments", doc=InputDocumentation(doc="By default, if the peptides\nassociated with protein A are a\nproper subset of the peptides\nassociated with protein B, then\nprotein A is eliminated and all\nthe peptides are considered as\nevidence for protein B. Note that\nthis filtering is done based on\nthe complete set of peptides in\nthe database, not based on the\nidentified peptides in the search\nresults. Alternatively, if this\noption is set and if all of the\nidentified peptides associated\nwith protein B are also associated\nwith protein A, then Percolator\nwill report a comma-separated list\nof protein IDs, where the\nfull-length protein B is first in\nthe list and the fragment protein\nA is listed second. Commas inside\nprotein IDs will be replaced by\nsemicolons. Not available for\nFido.")), ToolInput(tag="in_protein_report_duplicates", input_type=Boolean(optional=True), prefix="--protein-report-duplicates", doc=InputDocumentation(doc="If this option is set and multiple\ndatabase proteins contain exactly\nthe same set of peptides, then the\nIDs of these duplicated proteins\nwill be reported as a\ncomma-separated list, instead of\nthe default behavior of randomly\ndiscarding all but one of the\nproteins. Commas inside protein\nIDs will be replaced by\nsemicolons. Not available for\nFido.")), ToolInput(tag="in_fido_alpha", input_type=String(optional=True), prefix="--fido-alpha", doc=InputDocumentation(doc="Set Fido's probability with which\na present protein emits an\nassociated peptide.        Set by\ngrid search if not specified.")), ToolInput(tag="in_fido_beta", input_type=String(optional=True), prefix="--fido-beta", doc=InputDocumentation(doc="Set Fido's probability of creation\nof a peptide from noise. Set by\ngrid search if not specified.")), ToolInput(tag="in_fido_gamma", input_type=String(optional=True), prefix="--fido-gamma", doc=InputDocumentation(doc="Set Fido's prior probability that\na protein is present in the\nsample. Set by grid search if not\nspecified.")), ToolInput(tag="in_fido_empirical_protein_q", input_type=Boolean(optional=True), prefix="--fido-empirical-protein-q", doc=InputDocumentation(doc="Output empirical p-values and\nq-values for Fido using\ntarget-decoy analysis to XML\noutput (only valid if -X flag is\npresent).")), ToolInput(tag="in_fido_grid_search_depth", input_type=Int(optional=True), prefix="--fido-gridsearch-depth", doc=InputDocumentation(doc="Setting the gridsearch-depth to 0\n(fastest), 1 or 2 (slowest)\ncontrols how much computational\ntime is required for the\nestimation of alpha, beta and\ngamma parameters for Fido. Default\n= 0.")), ToolInput(tag="in_fido_fast_grid_search", input_type=Float(optional=True), prefix="--fido-fast-gridsearch", doc=InputDocumentation(doc="Apply the specified threshold to\nPSM, peptide and protein\nprobabilities to obtain a faster\nestimate of the alpha, beta and\ngamma parameters. Default = 0;\nRecommended when set = 0.2.")), ToolInput(tag="in_fido_no_split_large_components", input_type=Boolean(optional=True), prefix="--fido-no-split-large-components", doc=InputDocumentation(doc="Do not approximate the posterior\ndistribution by allowing large\ngraph components to be split into\nsubgraphs. The splitting is done\nby duplicating peptides with low\nprobabilities. Splitting continues\nuntil the number of possible\nconfigurations of each subgraph is\nbelow 2^18.")), ToolInput(tag="in_fido_protein_truncation_threshold", input_type=Float(optional=True), prefix="--fido-protein-truncation-threshold", doc=InputDocumentation(doc="To speed up inference, proteins\nfor which none of the associated\npeptides has a probability\nexceeding the specified threshold\nwill be assigned probability = 0.\nDefault = 0.01.")), ToolInput(tag="in_fido_grid_search_mse_threshold", input_type=Int(optional=True), prefix="--fido-gridsearch-mse-threshold", doc=InputDocumentation(doc="Q-value threshold that will be\nused in the computation of the MSE\nand ROC AUC score in the grid\nsearch. Recommended 0.05 for\nnormal size datasets and 0.1 for\nlarge datasets. Default = 0.1")), ToolInput(tag="in_num_threads", input_type=Int(optional=True), prefix="--num-threads", doc=InputDocumentation(doc="Number of total parallel threads\nfor SVM training during cross\nvalidation. Default (one thread\nper CV fold) = 3.")), ToolInput(tag="in_nested_xval_bins", input_type=Int(optional=True), prefix="--nested-xval-bins", doc=InputDocumentation(doc="Number of nested cross validation\nbins within each cross validation\nbin. This should reduce\noverfitting of the\nhyperparameters. Default = 1.")), ToolInput(tag="in_spectral_counting_fdr", input_type=String(optional=True), prefix="--spectral-counting-fdr", doc=InputDocumentation(doc="Activates spectral counting on\nprotein level (either\n--fido-protein or --picked-protein\nhas to be set) at the specified\nPSM q-value threshold. Adds two\ncolumns, 'spec_count_unique' and\n'spec_count_all', to the protein\ntab separated output, containing\nthe spectral count for the\npeptides unique to the protein and\nthe spectral count including\nshared peptides respectively.")), ToolInput(tag="in_train_best_positive", input_type=Boolean(optional=True), prefix="--train-best-positive", doc=InputDocumentation(doc="Enforce that, for each spectrum,\nat most one PSM is included in the\npositive set during each training\niteration. If the user only\nprovides one PSM per spectrum,\nthis filter will have no effect.")), ToolInput(tag="in_train_fdr_initial", input_type=String(optional=True), prefix="--train-fdr-initial", doc=InputDocumentation(doc="Set the FDR threshold for the\nfirst iteration. This is useful in\ncases where the original features\ndo not display a good separation\nbetween targets and decoys. In\nsubsequent iterations, the normal\n--trainFDR will be used.")), ToolInput(tag="in_parameter_file", input_type=File(optional=True), prefix="--parameter-file", doc=InputDocumentation(doc="Read flags from a parameter file.\nIf flags are specified on the\ncommand line as well, these will\noverride the ones in the parameter\nfile.\n")), ToolInput(tag="in_file", input_type=File(), position=0, doc=InputDocumentation(doc="-W <filename>"))], outputs=[ToolOutput(tag="out_xml_output", output_type=File(optional=True), selector=InputSelector(input_to_select="in_xml_output", type_hint=File()), doc=OutputDocumentation(doc="Path to xml-output (pout) file.")), ToolOutput(tag="out_tab_out", output_type=File(optional=True), selector=InputSelector(input_to_select="in_tab_out", type_hint=File()), doc=OutputDocumentation(doc="Output computed features to given\nfile in pin-tab format.")), ToolOutput(tag="out_results_peptides", output_type=File(optional=True), selector=InputSelector(input_to_select="in_results_peptides", type_hint=File()), doc=OutputDocumentation(doc="Output tab delimited results of\npeptides to a file instead of\nstdout (will be ignored if used\nwith -U option)")), ToolOutput(tag="out_decoy_results_peptides", output_type=File(optional=True), selector=InputSelector(input_to_select="in_decoy_results_peptides", type_hint=File()), doc=OutputDocumentation(doc="Output tab delimited results for\ndecoy peptides into a file (will\nbe ignored if used with -U option)")), ToolOutput(tag="out_results_psms", output_type=File(optional=True), selector=InputSelector(input_to_select="in_results_psms", type_hint=File()), doc=OutputDocumentation(doc="Output tab delimited results of\nPSMs to a file instead of stdout")), ToolOutput(tag="out_decoy_results_psms", output_type=File(optional=True), selector=InputSelector(input_to_select="in_decoy_results_psms", type_hint=File()), doc=OutputDocumentation(doc="Output tab delimited results for\ndecoy PSMs into a file")), ToolOutput(tag="out_results_proteins", output_type=File(optional=True), selector=InputSelector(input_to_select="in_results_proteins", type_hint=File()), doc=OutputDocumentation(doc="Output tab delimited results of\nproteins to a file instead of\nstdout (Only valid if option -A or\n-f is active)")), ToolOutput(tag="out_decoy_results_proteins", output_type=File(optional=True), selector=InputSelector(input_to_select="in_decoy_results_proteins", type_hint=File()), doc=OutputDocumentation(doc="Output tab delimited results for\ndecoy proteins into a file (Only\nvalid if option -A or -f is\nactive)"))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Percolator_V0_1_0().translate("wdl", allow_empty_container=True)

