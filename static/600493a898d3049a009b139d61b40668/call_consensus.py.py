from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Float, Int, String

Call_Consensus_Py_V0_1_0 = CommandToolBuilder(tool="call_consensus.py", base_command=["call_consensus.py"], inputs=[ToolInput(tag="in_out", input_type=File(optional=True), prefix="--out", doc=InputDocumentation(doc="path to output file")), ToolInput(tag="in_sample_depth", input_type=Float(optional=True), prefix="--sample_depth", doc=InputDocumentation(doc="minimum average read depth per sample (0.0)")), ToolInput(tag="in_sample_cov", input_type=Float(optional=True), prefix="--sample_cov", doc=InputDocumentation(doc="fraction of reference sites covered by at least 1 read (0.0)")), ToolInput(tag="in_max_samples", input_type=Int(optional=True), prefix="--max_samples", doc=InputDocumentation(doc="maximum number of samples to process.\nuseful for quick tests (use all)")), ToolInput(tag="in_keep_samples", input_type=String(optional=True), prefix="--keep_samples", doc=InputDocumentation(doc="comma-separated list of samples to include\nsamples will still be subject to other filters")), ToolInput(tag="in_exclude_samples", input_type=String(optional=True), prefix="--exclude_samples", doc=InputDocumentation(doc="comma-separated list of samples to exclude.\nsamples will still be subject to other filters")), ToolInput(tag="in_site_list", input_type=File(optional=True), prefix="--site_list", doc=InputDocumentation(doc="path to list of sites to include; other filters still apply")), ToolInput(tag="in_site_depth", input_type=Int(optional=True), prefix="--site_depth", doc=InputDocumentation(doc="minimum number of mapped reads per site (2)")), ToolInput(tag="in_site_prev", input_type=Float(optional=True), prefix="--site_prev", doc=InputDocumentation(doc="site has at least <site_depth> coverage in at least <site_prev> proportion of samples (0.0)\na value of 1.0 will select sites that have sufficent coverage in all samples.\na value of 0.0 will select all sites, including those with low coverage in many samples\nNAs recorded for included sites with less than <site_depth> in a sample")), ToolInput(tag="in_site_maf", input_type=Float(optional=True), prefix="--site_maf", doc=InputDocumentation(doc="minimum average-minor-allele-frequency of site across samples (0.0)\nsetting this above zero (e.g. 0.01, 0.02, 0.05) will only retain variable sites\nby default invariant sites are also retained.")), ToolInput(tag="in_site_ratio", input_type=Float(optional=True), prefix="--site_ratio", doc=InputDocumentation(doc="maximum ratio of site-depth to mean-genome-depth (None)\na value of 10 will filter genomic sites with 10x greater coverage than the genomic background")), ToolInput(tag="in_allele_support", input_type=Float(optional=True), prefix="--allele_support", doc=InputDocumentation(doc="minimum fraction of reads supporting consensus allele (0.5)")), ToolInput(tag="in_locus_type", input_type=String(optional=True), prefix="--locus_type", doc=InputDocumentation(doc="use genomic sites that intersect: 'CDS': coding genes, 'RNA': rRNA and tRNA genes, 'IGS': intergenic regions")), ToolInput(tag="in_site_type", input_type=String(optional=True), prefix="--site_type", doc=InputDocumentation(doc="if locus_type == 'CDS', use genomic sites with specified degeneracy: 4D indicates synonymous and 1D non-synonymous sites")), ToolInput(tag="in_max_sites", input_type=Int(optional=True), prefix="--max_sites", doc=InputDocumentation(doc="maximum number of sites to include in output (use all)\nuseful for quick tests")), ToolInput(tag="in_core_genome", input_type=Int(optional=True), prefix="-core-genome", doc=InputDocumentation(doc="defined as >=5 reads in >=90% of samples")), ToolInput(tag="in_use", input_type=Int(optional=True), prefix="-use", doc=InputDocumentation(doc="variable positions (>=1% minor allele frequency across samples)")), ToolInput(tag="in_only", input_type=Int(optional=True), prefix="-only", doc=InputDocumentation(doc="samples with sufficient data (>=10x mean-depth, >=40% of sites with >=1 mapped read)")), ToolInput(tag="in_exclude", input_type=Int(optional=True), prefix="-exclude", doc=InputDocumentation(doc="with abnormal depth (>5x mean-depth or <1/5 mean-depth)")), ToolInput(tag="in_path", input_type=File(), position=0, doc=InputDocumentation(doc="path to output from `merge_midas.py snps` for one species\ndirectory should be named according to a species_id and contains files 'snps_*.txt')"))], outputs=[ToolOutput(tag="out_out", output_type=File(optional=True), selector=InputSelector(input_to_select="in_out", type_hint=File()), doc=OutputDocumentation(doc="path to output file"))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Call_Consensus_Py_V0_1_0().translate("wdl", allow_empty_container=True)

