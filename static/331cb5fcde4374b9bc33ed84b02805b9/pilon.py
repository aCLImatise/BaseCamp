from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import String, File, Directory, Boolean, Int

Pilon_V0_1_0 = CommandToolBuilder(tool="pilon", base_command=["pilon"], inputs=[ToolInput(tag="in_genome", input_type=String(optional=True), prefix="--genome", doc=InputDocumentation(doc="The input genome we are trying to improve, which must be the reference used\nfor the bam alignments.  At least one of --frags or --jumps must also be given.")), ToolInput(tag="in_frags", input_type=File(optional=True), prefix="--frags", doc=InputDocumentation(doc="A bam file consisting of fragment paired-end alignments, aligned to the --genome\nargument using bwa or bowtie2.  This argument may be specifed more than once.")), ToolInput(tag="in_jumps", input_type=File(optional=True), prefix="--jumps", doc=InputDocumentation(doc="A bam file consisting of jump (mate pair) paired-end alignments, aligned to the\n--genome argument using bwa or bowtie2.  This argument may be specifed more than once.")), ToolInput(tag="in_unpaired", input_type=File(optional=True), prefix="--unpaired", doc=InputDocumentation(doc="A bam file consisting of unpaired alignments, aligned to the --genome argument\nusing bwa or bowtie2.  This argument may be specifed more than once.")), ToolInput(tag="in_bam", input_type=File(optional=True), prefix="--bam", doc=InputDocumentation(doc="A bam file of unknown type; Pilon will scan it and attempt to classify it as one\nof the above bam types.")), ToolInput(tag="in_nano_pore", input_type=File(optional=True), prefix="--nanopore", doc=InputDocumentation(doc="A bam file containing Oxford Nanopore read alignments. Experimental.")), ToolInput(tag="in_pac_bio", input_type=File(optional=True), prefix="--pacbio", doc=InputDocumentation(doc="A bam file containing Pacific Biosciences read alignments. Experimental.")), ToolInput(tag="in_output", input_type=String(optional=True), prefix="--output", doc=InputDocumentation(doc="Prefix for output files")), ToolInput(tag="in_outdir", input_type=Directory(optional=True), prefix="--outdir", doc=InputDocumentation(doc="Use this directory for all output files.")), ToolInput(tag="in_changes", input_type=File(optional=True), prefix="--changes", doc=InputDocumentation(doc="If specified, a file listing changes in the <output>.fasta will be generated.")), ToolInput(tag="in_vcf", input_type=Boolean(optional=True), prefix="--vcf", doc=InputDocumentation(doc="If specified, a vcf file will be generated")), ToolInput(tag="in_vcf_qe", input_type=Boolean(optional=True), prefix="--vcfqe", doc=InputDocumentation(doc="If specified, the VCF will contain a QE (quality-weighted evidence) field rather\nthan the default QP (quality-weighted percentage of evidence) field.")), ToolInput(tag="in_tracks", input_type=Boolean(optional=True), prefix="--tracks", doc=InputDocumentation(doc="This options will cause many track files (*.bed, *.wig) suitable for viewing in\na genome browser to be written.")), ToolInput(tag="in_variant", input_type=Boolean(optional=True), prefix="--variant", doc=InputDocumentation(doc="Sets up heuristics for variant calling, as opposed to assembly improvement;\nequivalent to '--vcf --fix all,breaks'.")), ToolInput(tag="in_chunksize", input_type=Boolean(optional=True), prefix="--chunksize", doc=InputDocumentation(doc="Input FASTA elements larger than this will be processed in smaller pieces not to\nexceed this size (default 10000000).")), ToolInput(tag="in_diploid", input_type=Boolean(optional=True), prefix="--diploid", doc=InputDocumentation(doc="Sample is from diploid organism; will eventually affect calling of heterozygous SNPs")), ToolInput(tag="in_fix", input_type=File(optional=True), prefix="--fix", doc=InputDocumentation(doc="A comma-separated list of categories of issues to try to fix:\n'snps': try to fix individual base errors;\n'indels': try to fix small indels;\n'gaps': try to fill gaps;\n'local': try to detect and fix local misassemblies;\n'all': all of the above (default);\n'bases': shorthand for 'snps' and 'indels' (for back compatibility);\n'none': none of the above; new fasta file will not be written.\nThe following are experimental fix types:\n'amb': fix ambiguous bases in fasta output (to most likely alternative);\n'breaks': allow local reassembly to open new gaps (with 'local');\n'circles': try to close circlar elements when used with long corrected reads;\n'novel': assemble novel sequence from unaligned non-jump reads.")), ToolInput(tag="in_dump_reads", input_type=Boolean(optional=True), prefix="--dumpreads", doc=InputDocumentation(doc="Dump reads for local re-assemblies.")), ToolInput(tag="in_duplicates", input_type=Boolean(optional=True), prefix="--duplicates", doc=InputDocumentation(doc="Use reads marked as duplicates in the input BAMs (ignored by default).")), ToolInput(tag="in_iupac", input_type=File(optional=True), prefix="--iupac", doc=InputDocumentation(doc="Output IUPAC ambiguous base codes in the output FASTA file when appropriate.")), ToolInput(tag="in_non_pf", input_type=Boolean(optional=True), prefix="--nonpf", doc=InputDocumentation(doc="Use reads which failed sequencer quality filtering (ignored by default).")), ToolInput(tag="in_targets", input_type=File(optional=True), prefix="--targets", doc=InputDocumentation(doc="Only process the specified target(s).  Targets are comma-separated, and each target\nis a fasta element name optionally followed by a base range.\nExample: 'scaffold00001,scaffold00002:10000-20000' would result in processing all of\nscaffold00001 and coordinates 10000-20000 of scaffold00002.\nIf 'targetlist' is the name of a file, each line will be treated as a target\nspecification.")), ToolInput(tag="in_verbose", input_type=Boolean(optional=True), prefix="--verbose", doc=InputDocumentation(doc="More verbose output.")), ToolInput(tag="in_debug", input_type=Boolean(optional=True), prefix="--debug", doc=InputDocumentation(doc="Debugging output (implies verbose).")), ToolInput(tag="in_default_qual", input_type=Int(optional=True), prefix="--defaultqual", doc=InputDocumentation(doc="Assumes bases are of this quality if quals are no present in input BAMs (default 10).")), ToolInput(tag="in_flank", input_type=Int(optional=True), prefix="--flank", doc=InputDocumentation(doc="Controls how much of the well-aligned reads will be used; this many bases at each\nend of the good reads will be ignored (default 10).")), ToolInput(tag="in_gap_margin", input_type=Boolean(optional=True), prefix="--gapmargin", doc=InputDocumentation(doc="Closed gaps must be within this number of bases of true size to be closed (100000)")), ToolInput(tag="in_kmer_size_used", input_type=Boolean(optional=True), prefix="--K", doc=InputDocumentation(doc="Kmer size used by internal assembler (default 47).")), ToolInput(tag="in_min_depth", input_type=Int(optional=True), prefix="--mindepth", doc=InputDocumentation(doc="Variants (snps and indels) will only be called if there is coverage of good pairs\nat this depth or more; if this value is >= 1, it is an absolute depth, if it is a\nfraction < 1, then minimum depth is computed by multiplying this value by the mean\ncoverage for the region, with a minumum value of 5 (default 0.1: min depth to call\nis 10% of mean coverage or 5, whichever is greater).")), ToolInput(tag="in_min_gap", input_type=Boolean(optional=True), prefix="--mingap", doc=InputDocumentation(doc="Minimum size for unclosed gaps (default 10)")), ToolInput(tag="in_min_mq", input_type=Boolean(optional=True), prefix="--minmq", doc=InputDocumentation(doc="Minimum alignment mapping quality for a read to count in pileups (default 0)")), ToolInput(tag="in_min_qual", input_type=Boolean(optional=True), prefix="--minqual", doc=InputDocumentation(doc="Minimum base quality to consider for pileups (default 0)")), ToolInput(tag="in_no_strays", input_type=Boolean(optional=True), prefix="--nostrays", doc=InputDocumentation(doc="Skip making a pass through the input BAM files to identify stray pairs, that is,\nthose pairs in which both reads are aligned but not marked valid because they have\ninconsistent orientation or separation. Identifying stray pairs can help fill gaps\nand assemble larger insertions, especially of repeat content.  However, doing so\nsometimes consumes considerable memory.\n"))], outputs=[ToolOutput(tag="out_outdir", output_type=Directory(optional=True), selector=InputSelector(input_to_select="in_outdir", type_hint=File()), doc=OutputDocumentation(doc="Use this directory for all output files.")), ToolOutput(tag="out_changes", output_type=File(optional=True), selector=InputSelector(input_to_select="in_changes", type_hint=File()), doc=OutputDocumentation(doc="If specified, a file listing changes in the <output>.fasta will be generated.")), ToolOutput(tag="out_fix", output_type=File(optional=True), selector=InputSelector(input_to_select="in_fix", type_hint=File()), doc=OutputDocumentation(doc="A comma-separated list of categories of issues to try to fix:\n'snps': try to fix individual base errors;\n'indels': try to fix small indels;\n'gaps': try to fill gaps;\n'local': try to detect and fix local misassemblies;\n'all': all of the above (default);\n'bases': shorthand for 'snps' and 'indels' (for back compatibility);\n'none': none of the above; new fasta file will not be written.\nThe following are experimental fix types:\n'amb': fix ambiguous bases in fasta output (to most likely alternative);\n'breaks': allow local reassembly to open new gaps (with 'local');\n'circles': try to close circlar elements when used with long corrected reads;\n'novel': assemble novel sequence from unaligned non-jump reads.")), ToolOutput(tag="out_iupac", output_type=File(optional=True), selector=InputSelector(input_to_select="in_iupac", type_hint=File()), doc=OutputDocumentation(doc="Output IUPAC ambiguous base codes in the output FASTA file when appropriate."))], container="quay.io/biocontainers/pilon:1.24--hdfd78af_0", version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Pilon_V0_1_0().translate("wdl")

