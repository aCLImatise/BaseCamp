version 1.0

task MageckPlot {
  input {
    Int? count_table
    File? gene_summary
    String? genes
    String? samples
    File? output_prefix
    String? norm_method
    String? control_sg_rna
    String? control_gene
    Boolean? keep_tmp
  }
  command <<<
    mageck plot \
      ~{if defined(count_table) then ("--count-table " +  '"' + count_table + '"') else ""} \
      ~{if defined(gene_summary) then ("--gene-summary " +  '"' + gene_summary + '"') else ""} \
      ~{if defined(genes) then ("--genes " +  '"' + genes + '"') else ""} \
      ~{if defined(samples) then ("--samples " +  '"' + samples + '"') else ""} \
      ~{if defined(output_prefix) then ("--output-prefix " +  '"' + output_prefix + '"') else ""} \
      ~{if defined(norm_method) then ("--norm-method " +  '"' + norm_method + '"') else ""} \
      ~{if defined(control_sg_rna) then ("--control-sgrna " +  '"' + control_sg_rna + '"') else ""} \
      ~{if defined(control_gene) then ("--control-gene " +  '"' + control_gene + '"') else ""} \
      ~{if (keep_tmp) then "--keep-tmp" else ""}
  >>>
  parameter_meta {
    count_table: "Provide a tab-separated count table instead of sam\\nfiles. Each line in the table should include sgRNA\\nname (1st column), gene name (2nd column) and read\\ncounts in each sample."
    gene_summary: "The gene summary file generated by the test command."
    genes: "A list of genes to be plotted, separated by comma.\\nDefault: none."
    samples: "A list of samples to be plotted, separated by comma.\\nDefault: using all samples in the count table."
    output_prefix: "The prefix of the output file(s). Default sample1."
    norm_method: "Method for normalization, including \\\"none\\\" (no\\nnormalization), \\\"median\\\" (median normalization,\\ndefault), \\\"total\\\" (normalization by total read\\ncounts), \\\"control\\\" (normalization by control sgRNAs\\nspecified by the --control-sgrna option)."
    control_sg_rna: "A list of control sgRNAs for normalization and for\\ngenerating the null distribution of RRA."
    control_gene: "A list of genes whose sgRNAs are used as control\\nsgRNAs for normalization and for generating the null\\ndistribution of RRA."
    keep_tmp: "Keep intermediate files."
  }
  output {
    File out_stdout = stdout()
    File out_output_prefix = "${in_output_prefix}"
  }
}