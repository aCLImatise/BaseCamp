from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Directory, Int, Boolean

Lotus2_V0_1_0 = CommandToolBuilder(tool="lotus2", base_command=["lotus2"], inputs=[ToolInput(tag="in_map", input_type=File(optional=True), prefix="-map", doc=InputDocumentation(doc="Mapping file")), ToolInput(tag="in_case_fastqfile_fnafile", input_type=File(optional=True), prefix="-i", doc=InputDocumentation(doc="In case that fastqFile or fnaFile and qualFile were\nspecified in the mapping file, this has to be the\ndirectory with input files")), ToolInput(tag="in_warning_directory_completelyremoved", input_type=Directory(optional=True), prefix="-o", doc=InputDocumentation(doc="Warning: The output directory will be completely\nremoved at the beginning of the LotuS2 run. Please\nensure this is a new directory or contains only\ndisposable data!")), ToolInput(tag="in_input_qual_file", input_type=File(optional=True), prefix="-q", doc=InputDocumentation(doc="input qual file (not defined in case of fastq or\ninput directory)")), ToolInput(tag="in_lotuscfg_config_file", input_type=File(optional=True), prefix="-c", doc=InputDocumentation(doc="LotuS.cfg, config file with program paths")), ToolInput(tag="in_sequencing_platform_pacbio", input_type=Int(optional=True), prefix="-p", doc=InputDocumentation(doc="sequencing platform: PacBio, 454, miSeq or hiSeq")), ToolInput(tag="in_barcode", input_type=File(optional=True), prefix="-barcode", doc=InputDocumentation(doc="Filepath to fastq formated file with barcodes (this\nis a processed mi/hiSeq format). The complementary\noption in a mapping file would be the column\n'MIDfqFile'")), ToolInput(tag="in_sdm_option_file", input_type=File(optional=True), prefix="-s", doc=InputDocumentation(doc="SDM option file, defaults to \'sdm_options.txt\' in\ncurrent dir")), ToolInput(tag="in_tmpdir", input_type=Directory(optional=True), prefix="-tmpDir", doc=InputDocumentation(doc="temporary directory used to save intermediate results")), ToolInput(tag="in_threads", input_type=Int(optional=True), prefix="-threads", doc=InputDocumentation(doc="number of threads to be used")), ToolInput(tag="in_tolerate_corrupt_fq", input_type=Int(optional=True), prefix="-tolerateCorruptFq", doc=InputDocumentation(doc="(1) Continue reading fastq files, even if single\nentries are incomplete (e.g. half of qual values\nmissing). (0) Abort lotus run, if fastq file is\ncorrupt. (Default: 0)")), ToolInput(tag="in_verbosity", input_type=Int(optional=True), prefix="-verbosity", doc=InputDocumentation(doc="Level of verbosity from printing all program calls\nand program output (3) to not even printing errors\n(0). Default: 1")), ToolInput(tag="in_tax_only", input_type=File(optional=True), prefix="-taxOnly", doc=InputDocumentation(doc="Skip most of the lotus pipeline and only run a\ntaxonomic classification on a fasta file. E.g.\n./lotus2.pl -taxOnly <some16S.fna> -refDB SLV")), ToolInput(tag="in_keep_tmp_files", input_type=Int(optional=True), prefix="-keepTmpFiles", doc=InputDocumentation(doc="(1) save extra tmp files like chimeric OTUs or the\nraw blast output in extra dir. (0) do not save these.\n(Default: 0)")), ToolInput(tag="in_save_demultiplex", input_type=Int(optional=True), prefix="-saveDemultiplex", doc=InputDocumentation(doc="(1) Saves all demultiplexed reads (unfiltered) in the\n[outputdir]/demultiplexed folder, for easier data\nupload. (2) Only saves quality filtered demultiplexed\nreads and continues LotuS2 run subsequently. (3) Saves\ndemultiplexed file into a single fq, saving sample ID\nin fastq/a header. (0) No demultiplexed reads are\nsaved. (Default: 0)")), ToolInput(tag="in_keep_off_targets", input_type=Int(optional=True), prefix="-keepOfftargets", doc=InputDocumentation(doc="(0)?!?: keep offtarget hits against offtargetDB in\noutput fasta and otu matrix, default 0")), ToolInput(tag="in_redo_tax_only", input_type=Int(optional=True), prefix="-redoTaxOnly", doc=InputDocumentation(doc="(1) Only redo the taxonomic assignments (useful for\nreplacing a DB used on a finished lotus run). (0)\nNormal lotus run. (Default: 0)")), ToolInput(tag="in_keep_un_class_fied", input_type=Int(optional=True), prefix="-keepUnclassfied", doc=InputDocumentation(doc="(1) Includes unclassified OTUs (i.e. no match in\nRDP/Blast database) in OTU and taxa abundance matrix\ncalculations. (0) does not take these OTUs into\naccount. (Default: 0)")), ToolInput(tag="in_rdp_thr", input_type=Int(optional=True), prefix="-rdp_thr", doc=InputDocumentation(doc="Confidence thresshold for RDP.(Default: 0.8)")), ToolInput(tag="in_ref_db", input_type=Int(optional=True), prefix="-refDB", doc=InputDocumentation(doc="(SLV) Silva LSU (23/28S) or SSU (16/18S), (GG\ngreengenes (only SSU available), (HITdb) (SSU, human\ngut specific), (PR2) LSU spezialized on Ocean\nenvironmentas, (UNITE) ITS fungi specific, (beetax)\nbee gut specific database and tax names. \nDecide\nwhich reference DB will be used for a similarity based\ntaxonomy annotation. Databases can be combined, with\nthe first having the highest prioirty. E.g. 'PR2,SLV'\nwould first use PR2 to assign OTUs and all unaasigned\nOTUs would be searched for with SILVA, given that\n\'-amplicon_type LSU\' was set. Can also be a custom\nfasta formatted database: in this case provide the\npath to the fasta file as well as the path to the\ntaxonomy for the sequences using -tax4refDB. See also\nonline help on how to create a custom DB. (Default:\nGG)")), ToolInput(tag="in_green_genes_species", input_type=Int(optional=True), prefix="-greengenesSpecies", doc=InputDocumentation(doc="(1) Create greengenes output labels instead of OTU\n(to be used with greengenes specific programs such as\nBugBase). (Default: 0)")), ToolInput(tag="in_build_phylo", input_type=Boolean(optional=True), prefix="-buildPhylo", doc=InputDocumentation(doc="<0,1,2,>    (0) do not build OTU phylogeny; (1) use fasttree2;\n(2) use iqtree2. (Default: 1)")), ToolInput(tag="in_u_tax_thr", input_type=Int(optional=True), prefix="-utax_thr", doc=InputDocumentation(doc="Confidence thresshold for UTAX. (Default: 0.8)")), ToolInput(tag="in_tax_group", input_type=Int(optional=True), prefix="-tax_group", doc=InputDocumentation(doc="(bacteria) bacterial 16S rDNA annnotation, (fungi)\nfungal 18S/23S/ITS annotation. (Default: bacteria)")), ToolInput(tag="in_tax_aligner", input_type=Int(optional=True), prefix="-taxAligner", doc=InputDocumentation(doc="Previously doBlast. (0) deavtivated (just use RDP);\n(1) or (blast) use Blast; (2) or (lambda) use LAMBDA\nto search against a 16S reference database for\ntaxonomic profiling of OTUs; (3) or (utax): use UTAX\nwith custom databases; (4) or (vsearch) use VSEARCH to\nalign OTUs to custom databases; (5) or (usearch) use\nUSEARCH to align OTUs to custom databases. (Default:\n0)")), ToolInput(tag="in_its_x_partial", input_type=Int(optional=True), prefix="-itsx_partial", doc=InputDocumentation(doc="Parameters for ITSx to extract partial (%) ITS\nregions as well. (0) deactivate. (Default: 0)")), ToolInput(tag="in_use_best_blast_hit_only", input_type=Int(optional=True), prefix="-useBestBlastHitOnly", doc=InputDocumentation(doc="(1) do not use LCA (lowest common ancestor) to\ndetermine most likely taxnomic level (not\nrecommended), instead just use the best blast hit. (0)\nLCA algorithm. (Default: 0)")), ToolInput(tag="in_tax_four_ref_db", input_type=File(optional=True), prefix="-tax4refDB", doc=InputDocumentation(doc="In conjunction with a custom fasta file provided to\nargument -refDB, this file contains for each fasta\nentry in the reference DB a taxonomic annotation\nstring, with the same number of taxonomic levels for\neach, tab separated.")), ToolInput(tag="in_lulu", input_type=Int(optional=True), prefix="-lulu", doc=InputDocumentation(doc="(1) use LULU (https://github.com/tobiasgf/lulu) to\nmerge OTUs based on their occurence. (Default: 1)")), ToolInput(tag="in_lca_cover", input_type=Int(optional=True), prefix="-LCA_cover", doc=InputDocumentation(doc="Min horizontal coverage of an OTU sequence against\nref DB. (Default: 0.5)")), ToolInput(tag="in_its_x", input_type=Int(optional=True), prefix="-ITSx", doc=InputDocumentation(doc="(1) use ITSx to only retain OTUs fitting to ITS1/ITS2\nhmm models; (0) deactivate. (Default: 1)")), ToolInput(tag="in_lca_frac", input_type=Int(optional=True), prefix="-LCA_frac", doc=InputDocumentation(doc="Min fraction of reads with identical taxonomy.\n(Default: 0.9)")), ToolInput(tag="in_amplicon_type", input_type=Int(optional=True), prefix="-amplicon_type", doc=InputDocumentation(doc="(LSU) large subunit (23S/28S) or (SSU) small subunit\n(16S/18S). (Default: SSU)")), ToolInput(tag="in_end_rem", input_type=File(optional=True), prefix="-endRem", doc=InputDocumentation(doc="DNA sequence, usually reverse primer or reverse\nadaptor; all sequence beyond this point will be\nremoved from OTUs. This is redundant with the\n'ReversePrimer' option from the mapping file, but\ngives more control (e.g. there is a problem with\nadaptors in the OTU output). (Default: '')")), ToolInput(tag="in_swarm_distance", input_type=Int(optional=True), prefix="-swarm_distance", doc=InputDocumentation(doc="Clustering threshold for OTUs when using swarm\nclustering. (Default: 1)")), ToolInput(tag="in_flash_param", input_type=Int(optional=True), prefix="-flash_param", doc=InputDocumentation(doc="custom flash parameters, since this contains spaces\nthe command needs to be in parentheses: e.g.\n-flash_param '-r 150 -s 20'. Note that this option\ncompletely replaces the default -m and -M flash\noptions (i.e. need to be reinserted, if wanted)]")), ToolInput(tag="in_x_talk", input_type=Int(optional=True), prefix="-xtalk", doc=InputDocumentation(doc="(1) check for crosstalk. Note that this requires in\nmost cases 64bit usearch. (Default: 0)")), ToolInput(tag="in_read_overlap", input_type=Int(optional=True), prefix="-readOverlap", doc=InputDocumentation(doc="The maximum number of basepairs that two reads are\noverlapping. (Default: 300)")), ToolInput(tag="in_chim_skew", input_type=Int(optional=True), prefix="-chim_skew", doc=InputDocumentation(doc="Skew in chimeric fragment abundance (uchime option).\n(Default: 2)")), ToolInput(tag="in_deactivate_chimera_check", input_type=Int(optional=True), prefix="-deactivateChimeraCheck", doc=InputDocumentation(doc="(0) do OTU chimera checks. (1) no chimera check at\nall. (2) Deactivate deNovo chimera check. (3)\nDeactivate ref based chimera check. (Default: 0)")), ToolInput(tag="in_count_chimeras", input_type=Boolean(optional=True), prefix="-count_chimeras", doc=InputDocumentation(doc="Minimum size of dereplicated clustered, one form of\nnoise removal. Can be complex terms like '10:1,3:3' ->\nmeaning at least 10x in 1 sample or 3x in 3 different\nsamples. (Default: 2)")), ToolInput(tag="in_clustering", input_type=Int(optional=True), prefix="-clustering", doc=InputDocumentation(doc="Sequence clustering algorithm: (1) UPARSE, (2) swarm,\n(3) cd-hit, (6) unoise3, (7) dada2. Short keyword or\nnumber can be used to indicate clustering (Default:\nuparse)")), ToolInput(tag="in_id", input_type=Int(optional=True), prefix="-id", doc=InputDocumentation(doc="Clustering threshold for OTUs. (Default: 0.97)"))], outputs=[ToolOutput(tag="out_warning_directory_completelyremoved", output_type=Directory(optional=True), selector=InputSelector(input_to_select="in_warning_directory_completelyremoved", type_hint=File()), doc=OutputDocumentation(doc="Warning: The output directory will be completely\nremoved at the beginning of the LotuS2 run. Please\nensure this is a new directory or contains only\ndisposable data!")), ToolOutput(tag="out_end_rem", output_type=File(optional=True), selector=InputSelector(input_to_select="in_end_rem", type_hint=File()), doc=OutputDocumentation(doc="DNA sequence, usually reverse primer or reverse\nadaptor; all sequence beyond this point will be\nremoved from OTUs. This is redundant with the\n'ReversePrimer' option from the mapping file, but\ngives more control (e.g. there is a problem with\nadaptors in the OTU output). (Default: '')"))], container="quay.io/biocontainers/lotus2:2.01--hdfd78af_1", version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Lotus2_V0_1_0().translate("wdl")

