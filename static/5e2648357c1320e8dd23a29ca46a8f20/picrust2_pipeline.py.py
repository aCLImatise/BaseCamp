from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Directory, Int, String, Float, Boolean

Picrust2_Pipeline_Py_V0_1_0 = CommandToolBuilder(tool="picrust2_pipeline.py", base_command=["picrust2_pipeline.py"], inputs=[ToolInput(tag="in_study_fast_a", input_type=File(optional=True), prefix="--study_fasta", doc=InputDocumentation(doc="FASTA of unaligned study sequences (i.e. OTUs or\nASVs).")), ToolInput(tag="in_input", input_type=File(optional=True), prefix="--input", doc=InputDocumentation(doc="Input table of sequence abundances (BIOM, TSV or\nmothur shared file format).")), ToolInput(tag="in_output", input_type=Directory(optional=True), prefix="--output", doc=InputDocumentation(doc="Output folder for final files.")), ToolInput(tag="in_processes", input_type=Int(optional=True), prefix="--processes", doc=InputDocumentation(doc="Number of processes to run in parallel (default: 1).")), ToolInput(tag="in_sepp__tool", input_type=String(optional=True), prefix="-t", doc=InputDocumentation(doc="|sepp, --placement_tool epa-ng|sepp\nPlacement tool to use when placing sequences into\nreference tree. One of 'epa-ng' or 'sepp' must be\ninput (default: epa-ng)")), ToolInput(tag="in_ref_dir", input_type=File(optional=True), prefix="--ref_dir", doc=InputDocumentation(doc="Directory containing reference sequence files\n(default: /usr/local/lib/python3.6/site-\npackages/picrust2/default_files/prokaryotic/pro_ref).\nPlease see the online documentation for how to name\nthe files in this directory.")), ToolInput(tag="in_in_traits", input_type=String(optional=True), prefix="--in_traits", doc=InputDocumentation(doc="Comma-delimited list (with no spaces) of which gene\nfamilies to predict from this set: COG, EC, KO, PFAM,\nTIGRFAM. Note that EC numbers will always be predicted\nunless --no_pathways is set (default: EC,KO).")), ToolInput(tag="in_custom_trait_tables", input_type=File(optional=True), prefix="--custom_trait_tables", doc=InputDocumentation(doc="Optional path to custom trait tables with gene\nfamilies as columns and genomes as rows (overrides\n--in_traits setting) to be used for hidden-state\nprediction. Multiple tables can be specified by\ndelimiting filenames by commas. Importantly, the first\ncustom table specified will be used for inferring\npathway abundances. Typically this command would be\nused with a custom marker gene table\n(--marker_gene_table) as well.")), ToolInput(tag="in_marker_gene_table", input_type=File(optional=True), prefix="--marker_gene_table", doc=InputDocumentation(doc="Path to marker gene copy number table (16S copy\nnumbers by default).")), ToolInput(tag="in_pathway_map", input_type=Float(optional=True), prefix="--pathway_map", doc=InputDocumentation(doc="MinPath mapfile. The default mapfile maps MetaCyc\nreactions to prokaryotic pathways (default:\n/usr/local/lib/python3.6/site-packages/picrust2/defaul\nt_files/pathway_mapfiles/metacyc_path2rxn_struc_filt_p\nro.txt).")), ToolInput(tag="in_reaction_func", input_type=File(optional=True), prefix="--reaction_func", doc=InputDocumentation(doc="Functional database to use as reactions for inferring\npathway abundances (default: EC). This should be\neither the short-form of the database as specified in\n--in_traits, or the path to the file as would be\nspecified for --custom_trait_tables. Note that when\nfunctions besides the default EC numbers are used\ntypically the --no_regroup option would also be set.")), ToolInput(tag="in_no_pathways", input_type=Boolean(optional=True), prefix="--no_pathways", doc=InputDocumentation(doc="Flag to indicate that pathways should NOT be inferred\n(otherwise they will be inferred by default).\nPredicted EC number abundances are used to infer\npathways when the default reference files are used.")), ToolInput(tag="in_regroup_map", input_type=Float(optional=True), prefix="--regroup_map", doc=InputDocumentation(doc="Mapfile of ids to regroup gene families to before\nrunning MinPath. The default mapfile is for regrouping\nEC numbers to MetaCyc reactions (default:\n/usr/local/lib/python3.6/site-packages/picrust2/defaul\nt_files/pathway_mapfiles/ec_level4_to_metacyc_rxn.tsv)\n.")), ToolInput(tag="in_no_regroup", input_type=Boolean(optional=True), prefix="--no_regroup", doc=InputDocumentation(doc="Do not regroup input gene families to reactions as\nspecified in the regrouping mapfile. This option\nshould only be used if you are using custom reference\nand/or mapping files.")), ToolInput(tag="in_stratified", input_type=Boolean(optional=True), prefix="--stratified", doc=InputDocumentation(doc="Flag to indicate that stratified tables should be\ngenerated at all steps (will increase run-time).")), ToolInput(tag="in_max_nsti", input_type=Float(optional=True), prefix="--max_nsti", doc=InputDocumentation(doc="Sequences with NSTI values above this value will be\nexcluded (default: 2).")), ToolInput(tag="in_min_reads", input_type=Int(optional=True), prefix="--min_reads", doc=InputDocumentation(doc="Minimum number of reads across all samples for each\ninput ASV. ASVs below this cut-off will be counted as\npart of the 'RARE' category in the stratified output\n(default: 1).")), ToolInput(tag="in_min_samples", input_type=Int(optional=True), prefix="--min_samples", doc=InputDocumentation(doc="Minimum number of samples that an ASV needs to be\nidentfied within. ASVs below this cut-off will be\ncounted as part of the 'RARE' category in the\nstratified output (default: 1).")), ToolInput(tag="in_hsp_method", input_type=String(optional=True), prefix="--hsp_method", doc=InputDocumentation(doc="HSP method to use.'mp': predict discrete traits using\nmax parsimony. 'emp_prob': predict discrete traits\nbased on empirical state probabilities across tips.\n'subtree_average': predict continuous traits using\nsubtree averaging. 'pic': predict continuous traits\nwith phylogentic independent contrast. 'scp':\nreconstruct continuous traits using squared-change\nparsimony (default: mp).")), ToolInput(tag="in_edge_exponent", input_type=Int(optional=True), prefix="--edge_exponent", doc=InputDocumentation(doc="Setting for maximum parisomony hidden-state\nprediction. Specifies weighting transition costs by\nthe inverse length of edge lengths. If 0, then edge\nlengths do not influence predictions. Must be a non-\nnegative real-valued number (default: 0).")), ToolInput(tag="in_min_align", input_type=Int(optional=True), prefix="--min_align", doc=InputDocumentation(doc="Proportion of the total length of an input query\nsequence that must align with reference sequences. Any\nsequences with lengths below this value after making\nan alignment with reference sequences will be excluded\nfrom the placement and all subsequent steps. (default:\n0).")), ToolInput(tag="in_skip_nsti", input_type=Boolean(optional=True), prefix="--skip_nsti", doc=InputDocumentation(doc="Do not calculate nearest-sequenced taxon index (NSTI).")), ToolInput(tag="in_skip_min_path", input_type=Boolean(optional=True), prefix="--skip_minpath", doc=InputDocumentation(doc="Do not run MinPath to identify which pathways are\npresent as a first pass (on by default).")), ToolInput(tag="in_no_gap_fill", input_type=Boolean(optional=True), prefix="--no_gap_fill", doc=InputDocumentation(doc="Do not perform gap filling before predicting pathway\nabundances (Gap filling is on otherwise by default.")), ToolInput(tag="in_coverage", input_type=Boolean(optional=True), prefix="--coverage", doc=InputDocumentation(doc="Calculate pathway coverages as well as abundances,\nwhich are experimental and only useful for advanced\nusers.")), ToolInput(tag="in_per_sequence_contrib", input_type=Boolean(optional=True), prefix="--per_sequence_contrib", doc=InputDocumentation(doc="Flag to specify that MinPath is run on the genes\ncontributed by each sequence (i.e. a predicted genome)\nindividually. Note this will greatly increase the\nruntime. The output will be the predicted pathway\nabundance contributed by each individual sequence.\nThis is in contrast to the default stratified output,\nwhich is the contribution to the community-wide\npathway abundances. Pathway coverage stratified by\ncontributing sequence will also be output when\n--coverage is set (default: False).")), ToolInput(tag="in_wide_table", input_type=Boolean(optional=True), prefix="--wide_table", doc=InputDocumentation(doc="Output wide-format stratified table of metagenome and\npathway predictions when '--stratified' is set. This\nis the deprecated method of generating stratified\ntables since it is extremely memory intensive. The\nstratified filenames contain 'strat' rather than\n'contrib' when this option is used.")), ToolInput(tag="in_skip_norm", input_type=Boolean(optional=True), prefix="--skip_norm", doc=InputDocumentation(doc="Skip normalizing sequence abundances by predicted\nmarker gene copy numbers (typically 16S rRNA genes).\nThis step will be performed automatically unless this\noption is specified.")), ToolInput(tag="in_remove_intermediate", input_type=Boolean(optional=True), prefix="--remove_intermediate", doc=InputDocumentation(doc="Remove the intermediate outfiles of the sequence\nplacement and pathway inference steps.")), ToolInput(tag="in_verbose", input_type=Boolean(optional=True), prefix="--verbose", doc=InputDocumentation(doc="Print out details as commands are run."))], outputs=[ToolOutput(tag="out_output", output_type=Directory(optional=True), selector=InputSelector(input_to_select="in_output", type_hint=File()), doc=OutputDocumentation(doc="Output folder for final files."))], container="quay.io/biocontainers/picrust2:2.4.1--py_0", version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Picrust2_Pipeline_Py_V0_1_0().translate("wdl")

