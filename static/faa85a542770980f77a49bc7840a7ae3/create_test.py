from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import Boolean, File, String, Directory, Int

Create_Test_V0_1_0 = CommandToolBuilder(tool="create_test", base_command=["create_test"], inputs=[ToolInput(tag="in_debug", input_type=Boolean(optional=True), prefix="--debug", doc=InputDocumentation(doc="Print debug information (very verbose) to file /create_test.log")), ToolInput(tag="in_verbose", input_type=Boolean(optional=True), prefix="--verbose", doc=InputDocumentation(doc="Add additional context (time and file) to log messages")), ToolInput(tag="in_silent", input_type=Boolean(optional=True), prefix="--silent", doc=InputDocumentation(doc="Print only warnings and error messages")), ToolInput(tag="in_no_run", input_type=Boolean(optional=True), prefix="--no-run", doc=InputDocumentation(doc="Do not run generated tests")), ToolInput(tag="in_no_build", input_type=Boolean(optional=True), prefix="--no-build", doc=InputDocumentation(doc="Do not build generated tests, implies --no-run")), ToolInput(tag="in_no_setup", input_type=Boolean(optional=True), prefix="--no-setup", doc=InputDocumentation(doc="Do not setup generated tests, implies --no-build and --no-run")), ToolInput(tag="in_use_existing", input_type=Boolean(optional=True), prefix="--use-existing", doc=InputDocumentation(doc="Use pre-existing case directories they will pick up at the\nlatest PEND state or re-run the first failed state. Requires test-id")), ToolInput(tag="in_save_timing", input_type=Boolean(optional=True), prefix="--save-timing", doc=InputDocumentation(doc="Enable archiving of performance data.")), ToolInput(tag="in_no_batch", input_type=Boolean(optional=True), prefix="--no-batch", doc=InputDocumentation(doc="Do not submit jobs to batch system, run locally.\nIf false, this will default to machine setting.")), ToolInput(tag="in_single_exe", input_type=Boolean(optional=True), prefix="--single-exe", doc=InputDocumentation(doc="Use a single build for all cases. This can\ndrastically improve test throughput but is currently use-at-your-own risk.\nIt's up to the user to ensure that all cases are build-compatible.\nE3SM tests belonging to a suite with share enabled will always share exes.")), ToolInput(tag="in_single_submit", input_type=Boolean(optional=True), prefix="--single-submit", doc=InputDocumentation(doc="Use a single interactive allocation to run all the tests. This can\ndrastically reduce queue waiting but only makes sense on batch machines.")), ToolInput(tag="in_test_root", input_type=File(optional=True), prefix="--test-root", doc=InputDocumentation(doc="Where test cases will be created. The default is output root\nas defined in the config_machines file")), ToolInput(tag="in_output_root", input_type=String(optional=True), prefix="--output-root", doc=InputDocumentation(doc="Where the case output is written.")), ToolInput(tag="in_baseline_root", input_type=Directory(optional=True), prefix="--baseline-root", doc=InputDocumentation(doc="Specifies a root directory for baseline datasets that will\nbe used for Bit-for-bit generate and/or compare testing.")), ToolInput(tag="in_clean", input_type=Boolean(optional=True), prefix="--clean", doc=InputDocumentation(doc="Specifies if tests should be cleaned after run. If set, all object\nexecutables and data files will be removed after the tests are run.")), ToolInput(tag="in_machine", input_type=File(optional=True), prefix="--machine", doc=InputDocumentation(doc="The machine for creating and building tests. This machine must be defined\nin the config_machines.xml file for the given model. The default is to\nto match the name of the machine in the test name or the name of the\nmachine this script is run on to the NODENAME_REGEX field in\nconfig_machines.xml. WARNING: This option is highly unsafe and should\nonly be used if you are an expert.")), ToolInput(tag="in_mpi_lib", input_type=String(optional=True), prefix="--mpilib", doc=InputDocumentation(doc="Specify the mpilib. To see list of supported MPI libraries for each machine,\ninvoke ./query_config. The default is the first listing .")), ToolInput(tag="in_baseline_name", input_type=Directory(optional=True), prefix="--baseline-name", doc=InputDocumentation(doc="If comparing or generating baselines, use this directory under baseline root.\nDefault will be current branch name.")), ToolInput(tag="in_compare", input_type=Boolean(optional=True), prefix="--compare", doc=InputDocumentation(doc="While testing, compare baselines")), ToolInput(tag="in_generate", input_type=Boolean(optional=True), prefix="--generate", doc=InputDocumentation(doc="While testing, generate baselines.\nNOTE: this can also be done after the fact with bless_test_results")), ToolInput(tag="in_compiler", input_type=String(optional=True), prefix="--compiler", doc=InputDocumentation(doc="Compiler for building cime. Default will be the name in the\nTestname or the default defined for the machine.")), ToolInput(tag="in_name_lists_only", input_type=Boolean(optional=True), prefix="--namelists-only", doc=InputDocumentation(doc="Only perform namelist actions for tests")), ToolInput(tag="in_project", input_type=Directory(optional=True), prefix="--project", doc=InputDocumentation(doc="Specify a project id for the case (optional).\nUsed for accounting and directory permissions when on a batch system.\nThe default is user or machine specified by PROJECT.\nAccounting (only) may be overridden by user or machine specified CHARGE_ACCOUNT.")), ToolInput(tag="in_test_id", input_type=File(optional=True), prefix="--test-id", doc=InputDocumentation(doc="Specify an 'id' for the test. This is simply a string that is appended\nto the end of a test name. If no test-id is specified, a time stamp plus a\nrandom string will be used (ensuring a high probability of uniqueness).\nIf a test-id is specified, it is the user's responsibility to ensure that\neach run of create_test uses a unique test-id. WARNING: problems will occur\nif you use the same test-id twice on the same file system, even if the test\nlists are completely different.")), ToolInput(tag="in_parallel_jobs", input_type=Int(optional=True), prefix="--parallel-jobs", doc=InputDocumentation(doc="Number of tasks create_test should perform simultaneously. The default\nis min(num_cores, num_tests).")), ToolInput(tag="in_proc_pool", input_type=Int(optional=True), prefix="--proc-pool", doc=InputDocumentation(doc="The size of the processor pool that create_test can use. The default is\nMAX_MPITASKS_PER_NODE + 25 percent.")), ToolInput(tag="in_wall_time", input_type=String(optional=True), prefix="--walltime", doc=InputDocumentation(doc="Set the wallclock limit for all tests in the suite.\nUse the variable CIME_GLOBAL_WALLTIME to set this for all tests.")), ToolInput(tag="in_queue", input_type=String(optional=True), prefix="--queue", doc=InputDocumentation(doc="Force batch system to use a certain queue")), ToolInput(tag="in_test_file", input_type=File(optional=True), prefix="--testfile", doc=InputDocumentation(doc="A file containing an ascii list of tests to run")), ToolInput(tag="in_allow_baseline_overwrite", input_type=Boolean(optional=True), prefix="--allow-baseline-overwrite", doc=InputDocumentation(doc="If the --generate option is given, then an attempt to overwrite\nan existing baseline directory will raise an error. WARNING: Specifying this\noption will allow existing baseline directories to be silently overwritten.")), ToolInput(tag="in_wait", input_type=Boolean(optional=True), prefix="--wait", doc=InputDocumentation(doc="On batch systems, wait for submitted jobs to complete")), ToolInput(tag="in_allow_pnl", input_type=Boolean(optional=True), prefix="--allow-pnl", doc=InputDocumentation(doc="Do not pass skip-pnl to case.submit")), ToolInput(tag="in_wait_check_throughput", input_type=Boolean(optional=True), prefix="--wait-check-throughput", doc=InputDocumentation(doc="If waiting, fail if throughput check fails")), ToolInput(tag="in_wait_check_memory", input_type=Boolean(optional=True), prefix="--wait-check-memory", doc=InputDocumentation(doc="If waiting, fail if memory check fails")), ToolInput(tag="in_wait_ignore_name_lists", input_type=Boolean(optional=True), prefix="--wait-ignore-namelists", doc=InputDocumentation(doc="If waiting, ignore if namelist diffs")), ToolInput(tag="in_wait_ignore_memleak", input_type=Boolean(optional=True), prefix="--wait-ignore-memleak", doc=InputDocumentation(doc="If waiting, ignore if there's a memleak")), ToolInput(tag="in_force_procs", input_type=Int(optional=True), prefix="--force-procs", doc=InputDocumentation(doc="For all tests to run with this number of processors")), ToolInput(tag="in_force_threads", input_type=Int(optional=True), prefix="--force-threads", doc=InputDocumentation(doc="For all tests to run with this number of threads")), ToolInput(tag="in_input_dir", input_type=String(optional=True), prefix="--input-dir", doc=InputDocumentation(doc="Use a non-default location for input files")), ToolInput(tag="in_pes_file", input_type=File(optional=True), prefix="--pesfile", doc=InputDocumentation(doc="Full pathname of an optional pes specification file. The file\ncan follow either the config_pes.xml or the env_mach_pes.xml format.")), ToolInput(tag="in_retry", input_type=Int(optional=True), prefix="--retry", doc=InputDocumentation(doc="Automatically retry failed tests. >0 implies --wait")), ToolInput(tag="in_non_local", input_type=Boolean(optional=True), prefix="--non-local", doc=InputDocumentation(doc="Use when you've requested a machine that you aren't on. Will reduce errors for missing directories etc.")), ToolInput(tag="in_workflow", input_type=String(optional=True), prefix="--workflow", doc=InputDocumentation(doc="A workflow from config_workflow.xml to apply to this case.")), ToolInput(tag="in_mail_user", input_type=String(optional=True), prefix="--mail-user", doc=InputDocumentation(doc="Email to be used for batch notification.")), ToolInput(tag="in_mail_type", input_type=String(optional=True), prefix="--mail-type", doc=InputDocumentation(doc="When to send user email. Options are: never, all, begin, end, fail.\nYou can specify multiple types with either comma-separated args or multiple -M flags.\n")), ToolInput(tag="in_test_args", input_type=String(), position=0, doc=InputDocumentation(doc="Tests or test suites to run. Testname form is TEST.GRID.COMPSET[.MACHINE_COMPILER]"))], outputs=[ToolOutput(tag="out_test_root", output_type=File(optional=True), selector=InputSelector(input_to_select="in_test_root", type_hint=File()), doc=OutputDocumentation(doc="Where test cases will be created. The default is output root\nas defined in the config_machines file"))], container="quay.io/biocontainers/fates-emerald:2.0.1", version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Create_Test_V0_1_0().translate("wdl")

