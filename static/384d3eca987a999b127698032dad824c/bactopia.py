from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Int, String, Boolean, Directory

Bactopia_V0_1_0 = CommandToolBuilder(tool="bactopia", base_command=["bactopia"], inputs=[ToolInput(tag="in_fast_qs", input_type=File(optional=True), prefix="--fastqs", doc=InputDocumentation(doc="An input file containing the sample name and\nabsolute paths to FASTQ/FASTAs to process")), ToolInput(tag="in_r_one", input_type=Int(optional=True), prefix="--R1", doc=InputDocumentation(doc="First set of reads for paired end in compressed (gzip)\nFASTQ format")), ToolInput(tag="in_r_two", input_type=Int(optional=True), prefix="--R2", doc=InputDocumentation(doc="Second set of reads for paired end in compressed (gzip)\nFASTQ format")), ToolInput(tag="in_se", input_type=String(optional=True), prefix="--SE", doc=InputDocumentation(doc="Single end set of reads in compressed (gzip) FASTQ format")), ToolInput(tag="in_hybrid", input_type=Boolean(optional=True), prefix="--hybrid", doc=InputDocumentation(doc="The SE should be treated as long reads for hybrid assembly.")), ToolInput(tag="in_sample", input_type=String(optional=True), prefix="--sample", doc=InputDocumentation(doc="The name of the input sequences")), ToolInput(tag="in_accessions", input_type=Boolean(optional=True), prefix="--accessions", doc=InputDocumentation(doc="An input file containing ENA/SRA Experiment accessions or\nNCBI Assembly accessions to be processed")), ToolInput(tag="in_accession", input_type=Boolean(optional=True), prefix="--accession", doc=InputDocumentation(doc="A single ENA/SRA Experiment accession or NCBI Assembly accession\nto be processed")), ToolInput(tag="in_assembly", input_type=String(optional=True), prefix="--assembly", doc=InputDocumentation(doc="A assembled genome in compressed FASTA format.")), ToolInput(tag="in_reassemble", input_type=Boolean(optional=True), prefix="--reassemble", doc=InputDocumentation(doc="The simulated reads will be used to create a new assembly.\nDefault: Use the original assembly, do not reassemble")), ToolInput(tag="in_datasets", input_type=File(optional=True), prefix="--datasets", doc=InputDocumentation(doc="The path to available datasets that have\nalready been set up")), ToolInput(tag="in_species", input_type=String(optional=True), prefix="--species", doc=InputDocumentation(doc="Determines which species-specific dataset to\nuse for the input sequencing")), ToolInput(tag="in_coverage", input_type=Int(optional=True), prefix="--coverage", doc=InputDocumentation(doc="Reduce samples to a given coverage\nDefault: 100x")), ToolInput(tag="in_genome_size", input_type=Int(optional=True), prefix="--genome_size", doc=InputDocumentation(doc="Expected genome size (bp) for all samples, a value of '0'\nwill disable read error correction and read subsampling.\nSpecial values (requires --species):\n'min': uses minimum completed genome size of species\n'median': uses median completed genome size of species\n'mean': uses mean completed genome size of species\n'max': uses max completed genome size of species\nDefault: Mash estimate")), ToolInput(tag="in_outdir", input_type=Directory(optional=True), prefix="--outdir", doc=InputDocumentation(doc="Directory to write results to\nDefault: .")), ToolInput(tag="in_max_time", input_type=Int(optional=True), prefix="--max_time", doc=InputDocumentation(doc="The maximum number of minutes a single task should run before being halted.\nDefault: 240 minutes")), ToolInput(tag="in_max_memory", input_type=Int(optional=True), prefix="--max_memory", doc=InputDocumentation(doc="The maximum amount of memory (Gb) allowed to a single task.\nDefault: 64 Gb")), ToolInput(tag="in_cpus", input_type=Int(optional=True), prefix="--cpus", doc=InputDocumentation(doc="Number of processors made available to a single task.\nDefault: 4")), ToolInput(tag="in_infodir", input_type=Directory(optional=True), prefix="--infodir", doc=InputDocumentation(doc="Directory to write Nextflow summary files to\nDefault: ./bactopia-info")), ToolInput(tag="in_cond_a_dir", input_type=Directory(optional=True), prefix="--condadir", doc=InputDocumentation(doc="Directory to Nextflow should use for Conda environments\nDefault: Bactopia's Nextflow directory")), ToolInput(tag="in_nf_config", input_type=File(optional=True), prefix="--nfconfig", doc=InputDocumentation(doc="A Nextflow compatible config file for custom profiles. This allows\nyou to create profiles specific to your environment (e.g. SGE,\nAWS, SLURM, etc...). This config file is loaded last and will\noverwrite existing variables if set.\nDefault: Bactopia's default configs")), ToolInput(tag="in_nf_dir", input_type=Boolean(optional=True), prefix="--nfdir", doc=InputDocumentation(doc="Print directory Nextflow has pulled Bactopia to")), ToolInput(tag="in_overwrite", input_type=Boolean(optional=True), prefix="--overwrite", doc=InputDocumentation(doc="Nextflow will overwrite existing output files.\nDefault: false")), ToolInput(tag="in_con_a_tainer_path", input_type=Boolean(optional=True), prefix="--conatainerPath", doc=InputDocumentation(doc="Path to Singularity containers to be used by the 'slurm'")), ToolInput(tag="in_sleep_time", input_type=Boolean(optional=True), prefix="--sleep_time", doc=InputDocumentation(doc="After reading datases, the amount of time (seconds) Nextflow\nwill wait before execution.\nDefault: 5 seconds")), ToolInput(tag="in_publish_mode", input_type=File(optional=True), prefix="--publish_mode", doc=InputDocumentation(doc="Set Nextflow's method for publishing output files. Allowed methods are:\n'copy' (default)    Copies the output files into the published directory.\n'copyNoFollow' Copies the output files into the published directory\nwithout following symlinks ie. copies the links themselves.\n'link'    Creates a hard link in the published directory for each\nprocess output file.\n'rellink' Creates a relative symbolic link in the published directory\nfor each process output file.\n'symlink' Creates an absolute symbolic link in the published directory\nfor each process output file.\nDefault: copy")), ToolInput(tag="in_force", input_type=Boolean(optional=True), prefix="--force", doc=InputDocumentation(doc="Nextflow will overwrite existing output files.\nDefault: false")), ToolInput(tag="in_resume", input_type=Boolean(optional=True), prefix="-resume", doc=InputDocumentation(doc="Nextflow will attempt to resume a previous run. Please notice it is\nonly a single '-'")), ToolInput(tag="in_available_datasets", input_type=Boolean(optional=True), prefix="--available_datasets", doc=InputDocumentation(doc="Print a list of available datasets found based\non location given by '--datasets'")), ToolInput(tag="in_example_fast_qs", input_type=Boolean(optional=True), prefix="--example_fastqs", doc=InputDocumentation(doc="Print example of expected input for FASTQs file")), ToolInput(tag="in_check_fast_qs", input_type=Boolean(optional=True), prefix="--check_fastqs", doc=InputDocumentation(doc="Verify '--fastqs' produces the expected inputs")), ToolInput(tag="in_compress", input_type=Boolean(optional=True), prefix="--compress", doc=InputDocumentation(doc="Compress (gzip) select outputs (e.g. annotation, variant calls)\nto reduce overall storage footprint.")), ToolInput(tag="in_keep_all_files", input_type=Boolean(optional=True), prefix="--keep_all_files", doc=InputDocumentation(doc="Keeps all analysis files created. By default, intermediate\nfiles are removed. This will not affect the ability\nto resume Nextflow runs, and only occurs at the end\nof the process.")), ToolInput(tag="in_dry_run", input_type=Boolean(optional=True), prefix="--dry_run", doc=InputDocumentation(doc="Mimics workflow execution, to help determine if conda environments\nor container images are properly set up.")), ToolInput(tag="in_help_all", input_type=Boolean(optional=True), prefix="--help_all", doc=InputDocumentation(doc="Show a complete list of adjustable parameters")), ToolInput(tag="in_profile_dot", input_type=String(), position=0, doc=InputDocumentation(doc="Default: /opt/bactopia/singularity"))], outputs=[ToolOutput(tag="out_publish_mode", output_type=File(optional=True), selector=InputSelector(input_to_select="in_publish_mode", type_hint=File()), doc=OutputDocumentation(doc="Set Nextflow's method for publishing output files. Allowed methods are:\n'copy' (default)    Copies the output files into the published directory.\n'copyNoFollow' Copies the output files into the published directory\nwithout following symlinks ie. copies the links themselves.\n'link'    Creates a hard link in the published directory for each\nprocess output file.\n'rellink' Creates a relative symbolic link in the published directory\nfor each process output file.\n'symlink' Creates an absolute symbolic link in the published directory\nfor each process output file.\nDefault: copy"))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Bactopia_V0_1_0().translate("wdl", allow_empty_container=True)

