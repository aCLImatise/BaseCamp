from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import Array, String, File, Boolean, Int, Float

Methylpy_Single_End_Pipeline_V0_1_0 = CommandToolBuilder(tool="methylpy_single_end_pipeline", base_command=["methylpy", "single-end-pipeline"], inputs=[ToolInput(tag="in_read_files", input_type=Array(t=String(), optional=True), prefix="--read-files", doc=InputDocumentation(doc="list of all the fastq files you would like to run\nthrough the pipeline. Note that globbing is supported\nhere (i.e., you can use * in your paths) (default:\nNone)")), ToolInput(tag="in_sample", input_type=String(optional=True), prefix="--sample", doc=InputDocumentation(doc="String indicating the name of the sample you are\nprocessing. It will be included in the output files.\n(default: None)")), ToolInput(tag="in_forward_ref", input_type=File(optional=True), prefix="--forward-ref", doc=InputDocumentation(doc="string indicating the path to the forward strand\nreference created by build_ref (default: None)")), ToolInput(tag="in_reverse_ref", input_type=File(optional=True), prefix="--reverse-ref", doc=InputDocumentation(doc="string indicating the path to the reverse strand\nreference created by build_ref (default: None)")), ToolInput(tag="in_ref_fast_a", input_type=File(optional=True), prefix="--ref-fasta", doc=InputDocumentation(doc="string indicating the path to a fasta file containing\nthe sequences you used for mapping (default: None)")), ToolInput(tag="in_libraries", input_type=Array(t=String(), optional=True), prefix="--libraries", doc=InputDocumentation(doc="list of library IDs (in the same order as the files\nlist) indiciating which libraries each set of fastq\nfiles belong to. If you use a glob, you only need to\nindicate the library ID for those fastqs once (i.e.,\nthe length of files and libraries should be the same)\n(default: ['libA'])")), ToolInput(tag="in_path_to_output", input_type=File(optional=True), prefix="--path-to-output", doc=InputDocumentation(doc="Path to a directory where you would like the output to\nbe stored. The default is the same directory as the\ninput fastqs. (default: )")), ToolInput(tag="in_pb_at", input_type=Boolean(optional=True), prefix="--pbat", doc=InputDocumentation(doc="Boolean indicating whether to process data in PBAT\n(Post-Bisulfite Adaptor Tagging) mode, in which reads\nwill be mapped to opposite strand of C-T converted\ngenome and the forward strand of G-A converted genome.\n(default: False)")), ToolInput(tag="in_check_dependency", input_type=Boolean(optional=True), prefix="--check-dependency", doc=InputDocumentation(doc="Boolean indicating whether to check dependency\nrequirements are met. (default: False)")), ToolInput(tag="in_num_procs", input_type=Int(optional=True), prefix="--num-procs", doc=InputDocumentation(doc="Number of processors you wish to use to parallelize\nthis function (default: 1)")), ToolInput(tag="in_sort_mem", input_type=Int(optional=True), prefix="--sort-mem", doc=InputDocumentation(doc="Parameter to pass to unix sort with -S/--buffer-size\ncommand (default: 500M)")), ToolInput(tag="in_num_upstream_bases", input_type=Int(optional=True), prefix="--num-upstream-bases", doc=InputDocumentation(doc="Number of base(s) upstream of each cytosine that you\nwish to include in output file. Recommend value 1 for\nNOMe-seq processing since the upstream base is\nrequired to tell apart cytosine at GC context.\n(default: 0)")), ToolInput(tag="in_num_downstream_bases", input_type=Int(optional=True), prefix="--num-downstream-bases", doc=InputDocumentation(doc="Number of base(s) downstream of each cytosine that you\nwish to include in output file. Recommend value to be\nat least 1 to separate cytosines at different sequence\ncontext. (default: 2)")), ToolInput(tag="in_generate_all_c_file", input_type=File(optional=True), prefix="--generate-allc-file", doc=InputDocumentation(doc="Boolean indicating whether to generate the final\noutput file that contains the methylation state of\neach cytosine. If set to be false, only alignment file\n(in BAM format) will be generated. (default: True)")), ToolInput(tag="in_generate_m_pile_up_file", input_type=File(optional=True), prefix="--generate-mpileup-file", doc=InputDocumentation(doc="Boolean indicating whether to generate intermediate\nmpileup file to save space. However, skipping mpileup\nstep may cause problem due to the nature of python.\nNot skipping this step is recommended. (default: True)")), ToolInput(tag="in_compress_output", input_type=Boolean(optional=True), prefix="--compress-output", doc=InputDocumentation(doc="Boolean indicating whether to compress (by gzip) the\nfinal output (allc file(s)). (default: True)")), ToolInput(tag="in_b_gzip", input_type=Boolean(optional=True), prefix="--bgzip", doc=InputDocumentation(doc="Boolean indicating whether to bgzip compressed allc\nfiles and tabix index. (default: False)")), ToolInput(tag="in_path_to_b_gzip", input_type=File(optional=True), prefix="--path-to-bgzip", doc=InputDocumentation(doc="Path to bgzip installation (default: )")), ToolInput(tag="in_path_to_tab_ix", input_type=File(optional=True), prefix="--path-to-tabix", doc=InputDocumentation(doc="Path to tabix installation (default: )")), ToolInput(tag="in_trim_reads", input_type=Boolean(optional=True), prefix="--trim-reads", doc=InputDocumentation(doc="Boolean indicating whether to trim reads using\ncutadapt. (default: True)")), ToolInput(tag="in_path_to_cut_adapt", input_type=File(optional=True), prefix="--path-to-cutadapt", doc=InputDocumentation(doc="Path to cutadapt installation (default: )")), ToolInput(tag="in_path_to_aligner", input_type=File(optional=True), prefix="--path-to-aligner", doc=InputDocumentation(doc="Path to bowtie/bowtie2 installation (default: )")), ToolInput(tag="in_aligner", input_type=Int(optional=True), prefix="--aligner", doc=InputDocumentation(doc="Aligner to use. Currently, methylpy supports bowtie,\nbowtie2 and minimap2. (default: bowtie2)")), ToolInput(tag="in_aligner_options", input_type=Array(t=String(), optional=True), prefix="--aligner-options", doc=InputDocumentation(doc="list of strings indicating options you would like\npassed to bowtie (e.g., '-k 1 -l 2') (default: None)")), ToolInput(tag="in_merge_by_max_mapq", input_type=Int(optional=True), prefix="--merge-by-max-mapq", doc=InputDocumentation(doc="Boolean indicates whether to merge alignment results\nfrom two converted genomes by MAPQ score. Be default,\nwe only keep reads that are mapped to only one of the\ntwo converted genomes. If this option is set to True,\nfor a read that could be mapped to both converted\ngenomes, the alignment that achieves larger MAPQ score\nwill be kept. (default: False)")), ToolInput(tag="in_remove_clonal", input_type=Boolean(optional=True), prefix="--remove-clonal", doc=InputDocumentation(doc="Boolean indicates whether to remove clonal reads or\nnot (default: False)")), ToolInput(tag="in_path_to_picard", input_type=File(optional=True), prefix="--path-to-picard", doc=InputDocumentation(doc="The path to the picard.jar in picard tools. The jar\nfile can be downloaded from\nhttps://broadinstitute.github.io/picard/index.html\n(default is current dir) (default: )")), ToolInput(tag="in_keep_clonal_stats", input_type=Boolean(optional=True), prefix="--keep-clonal-stats", doc=InputDocumentation(doc="Boolean indicates whether to store the metric file\nfrom picard. (default: True)")), ToolInput(tag="in_java_options", input_type=String(optional=True), prefix="--java-options", doc=InputDocumentation(doc="String indicating the option pass the java when\nrunning picard. (default: -Xmx20g)")), ToolInput(tag="in_path_to_sam_tools", input_type=File(optional=True), prefix="--path-to-samtools", doc=InputDocumentation(doc="Path to samtools installation (default: )")), ToolInput(tag="in_adapter_seq", input_type=Int(optional=True), prefix="--adapter-seq", doc=InputDocumentation(doc="sequence of an adapter that was ligated to the 3' end.\nThe adapter itself and anything that follows is\ntrimmed. (default: AGATCGGAAGAGCACACGTCTG)")), ToolInput(tag="in_remove_chr_prefix", input_type=Boolean(optional=True), prefix="--remove-chr-prefix", doc=InputDocumentation(doc="Boolean indicates whether to remove in the final\noutput the 'chr' prefix in the chromosome name\n(default: True)")), ToolInput(tag="in_add_snp_info", input_type=Boolean(optional=True), prefix="--add-snp-info", doc=InputDocumentation(doc="Boolean indicates whether to add extra two columns in\nthe output (allc) file regarding the genotype\ninformation of each site. The first (second) column\ncontain the number of basecalls that support the\nreference gentype (variant) for nucleotides in the\nsequence context. (default: False)")), ToolInput(tag="in_unmethylated_control", input_type=Float(optional=True), prefix="--unmethylated-control", doc=InputDocumentation(doc="name of the chromosome/region that you want to use to\nestimate the non-conversion rate of your sample, or\nthe non-conversion rate you would like to use.\nConsequently, control is either a string, or a\ndecimal. If control is a string then it should be in\nthe following format: 'chrom:start-end'. If you would\nlike to specify an entire chromosome simply use\n'chrom:' (default: None)")), ToolInput(tag="in_bin_om_test", input_type=String(optional=True), prefix="--binom-test", doc=InputDocumentation(doc="Indicates that you would like to perform a binomial\ntest on each cytosine to delineate cytosines that are\nsignificantly methylated than noise due to the failure\nof bisulfite conversion. (default: False)")), ToolInput(tag="in_sig_cut_off", input_type=Float(optional=True), prefix="--sig-cutoff", doc=InputDocumentation(doc="float indicating the adjusted p-value cutoff you wish\nto use for determining whether or not a site is\nmethylated (default: 0.01)")), ToolInput(tag="in_min_mapq", input_type=Int(optional=True), prefix="--min-mapq", doc=InputDocumentation(doc="Minimum MAPQ for reads to be included. (default: 30)")), ToolInput(tag="in_min_cov", input_type=Int(optional=True), prefix="--min-cov", doc=InputDocumentation(doc="Integer indicating the minimum number of reads for a\nsite to be tested. (default: 0)")), ToolInput(tag="in_max_adapter_removal", input_type=Int(optional=True), prefix="--max-adapter-removal", doc=InputDocumentation(doc="Indicates the maximum number of times to try to remove\nadapters. Useful when an adapter gets appended\nmultiple times. (default: None)")), ToolInput(tag="in_overlap_length", input_type=Int(optional=True), prefix="--overlap-length", doc=InputDocumentation(doc="Minimum overlap length. If the overlap between the\nread and the adapter is shorter than LENGTH, the read\nis not modified. This reduces the no. of bases trimmed\npurely due to short random adapter matches. (default:\nNone)")), ToolInput(tag="in_zero_cap", input_type=String(optional=True), prefix="--zero-cap", doc=InputDocumentation(doc="Flag that causes negative quality values to be set to\nzero (workaround to avoid segmentation faults in BWA)\n(default: None)")), ToolInput(tag="in_error_rate", input_type=Int(optional=True), prefix="--error-rate", doc=InputDocumentation(doc="maximum allowed error rate (no. of errors divided by\nthe length of the matching region) (default: None)")), ToolInput(tag="in_min_qual_score", input_type=Int(optional=True), prefix="--min-qual-score", doc=InputDocumentation(doc="allows you to trim low-quality ends from reads before\nadapter removal. The algorithm is the same as the one\nused by BWA (Subtract CUTOFF from all qualities;\ncompute partial sums from all indices to the end of\nthe sequence; cut sequence at the index at which the\nsum is minimal). (default: 10)")), ToolInput(tag="in_min_read_len", input_type=Int(optional=True), prefix="--min-read-len", doc=InputDocumentation(doc="indicates the minimum length a read must be to be\nkept. Reads that are too short even before adapter\nremoval are also discarded. In colorspace, an initial\nprimer is not counted. (default: 30)")), ToolInput(tag="in_min_base_quality", input_type=Int(optional=True), prefix="--min-base-quality", doc=InputDocumentation(doc="Integer indicating the minimum PHRED quality score for\na base to be included in the mpileup file (and\nsubsequently to be considered for methylation\ncalling). (default: 1)")), ToolInput(tag="in_keep_temp_files", input_type=Boolean(optional=True), prefix="--keep-temp-files", doc=InputDocumentation(doc="Boolean indicating that you would like to keep the\nintermediate files generated by this function. This\ncan be useful for debugging, but in general should be\nleft False. (default: False)\n"))], outputs=[ToolOutput(tag="out_path_to_output", output_type=File(optional=True), selector=InputSelector(input_to_select="in_path_to_output", type_hint=File()), doc=OutputDocumentation(doc="Path to a directory where you would like the output to\nbe stored. The default is the same directory as the\ninput fastqs. (default: )"))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Methylpy_Single_End_Pipeline_V0_1_0().translate("wdl", allow_empty_container=True)

