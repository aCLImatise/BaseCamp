from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import Int, Boolean, Float, String

Eqtlbma_Avg_Bfs_V0_1_0 = CommandToolBuilder(tool="eqtlbma_avg_bfs", base_command=["eqtlbma_avg_bfs"], inputs=[ToolInput(tag="in_verbose", input_type=Int(optional=True), prefix="--verbose", doc=InputDocumentation(doc="level (0/default=1/2/3)")), ToolInput(tag="in_in", input_type=Boolean(optional=True), prefix="--in", doc=InputDocumentation(doc="pattern to glob '_l10abfs_raw' files from 'eqtlbma_bf'")), ToolInput(tag="in_g_wts", input_type=Boolean(optional=True), prefix="--gwts", doc=InputDocumentation(doc="file with grid weights (one per line, only the value)")), ToolInput(tag="in_gtk", input_type=Boolean(optional=True), prefix="--gtk", doc=InputDocumentation(doc="ind-ex/icies of grid weights to keep (all by default)\ne.g. '1+3+5+7+9' to keep only those with no heterogeneity")), ToolInput(tag="in_model", input_type=Boolean(optional=True), prefix="--model", doc=InputDocumentation(doc="which model (default=configs/types)")), ToolInput(tag="in_n_sub_grp", input_type=Int(optional=True), prefix="--nsubgrp", doc=InputDocumentation(doc="of subgroups")), ToolInput(tag="in_dim", input_type=Boolean(optional=True), prefix="--dim", doc=InputDocumentation(doc="dimension of the model (nb of active configs or types)")), ToolInput(tag="in_cwts", input_type=Boolean(optional=True), prefix="--cwts", doc=InputDocumentation(doc="file with configuration weights (one per line, name<sep>value)\nonly a subset of the configs can be given, in agreement with --nsubgrp and --dim")), ToolInput(tag="in_t_swts", input_type=Boolean(optional=True), prefix="--tswts", doc=InputDocumentation(doc="file with type and subgroup weights (one per line, name<sep>value)")), ToolInput(tag="in_save", input_type=Boolean(optional=True), prefix="--save", doc=InputDocumentation(doc="precise what to save (bf/post/bf+post)\n'post' requires also options --pi0 and --post")), ToolInput(tag="in_pi_zero", input_type=Boolean(optional=True), prefix="--pi0", doc=InputDocumentation(doc="proba for a gene to have no eQTL in any subgroup\nif not provided, BFs will be saved instead of posterior probability")), ToolInput(tag="in_post", input_type=Boolean(optional=True), prefix="--post", doc=InputDocumentation(doc="save various kinds of posterior probabilities (e.g. 'a+b')\na: the gene has at least one eQTL\nb: the SNP is 'the' eQTL for the gene, in at least one subgroup, given that the gene has exactly one eQTL,\nassuming all cis SNPs are equally likely and a single eQTL per gene\nc: the SNP is 'an' eQTL for the gene, in at least one subgroup, given that the gene contains at least one eQTL\nand that SNPs are independent\nd: the SNP is an eQTL in subgroup s, given that it is 'the' eQTL for the gene, the configs/types being marginalized")), ToolInput(tag="in_gene", input_type=Boolean(optional=True), prefix="--gene", doc=InputDocumentation(doc="file with subset of gene(s) to keep (one per line)")), ToolInput(tag="in_snp", input_type=Boolean(optional=True), prefix="--snp", doc=InputDocumentation(doc="file with subset of snp(s) to keep (one per line)\ncaution, it can change the gene-level BFs and posteriors")), ToolInput(tag="in_gene_snp", input_type=Boolean(optional=True), prefix="--gene-snp", doc=InputDocumentation(doc="file with subset of gene-snp pai(s) to keep (gene<tab>snp, one per line)\ncaution, it can change the gene-level BFs and posteriors")), ToolInput(tag="in_best_snp", input_type=Float(optional=True), prefix="--bestsnp", doc=InputDocumentation(doc="the best SNP(s) per gene\n0: report all SNPs (default)\n1: report only the single best SNP (pick one if tie)\n2: report the best SNP(s) listed in decreasing order of their probability of being the eQTL (conditional on the gene containing an eQTL), such that the sum of these probabilities exceeds 0.95")), ToolInput(tag="in_best_dim", input_type=String(optional=True), prefix="--bestdim", doc=InputDocumentation(doc="the best config/type per SNP (and its posterior)")), ToolInput(tag="in_all_dim", input_type=Boolean(optional=True), prefix="--alldim", doc=InputDocumentation(doc="report also BF and/or posterior for all dimensions (configs or types)\ncaution, the number of configurations can be big")), ToolInput(tag="in_out", input_type=Boolean(optional=True), prefix="--out", doc=InputDocumentation(doc="name of the output file (gzipped)\nif --cwts is not provided, the output file will be used as input for 'eqtlbma_hm'")), ToolInput(tag="in_thread", input_type=Boolean(optional=True), prefix="--thread", doc=InputDocumentation(doc="number of threads (default=1)"))], outputs=[], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Eqtlbma_Avg_Bfs_V0_1_0().translate("wdl", allow_empty_container=True)

