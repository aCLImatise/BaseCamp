from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, String, Int, Boolean, Float

Breseq_V0_1_0 = CommandToolBuilder(tool="breseq", base_command=["breseq"], inputs=[ToolInput(tag="in_reference", input_type=File(optional=True), prefix="--reference", doc=InputDocumentation(doc="File containing reference sequences in GenBank, GFF3, or FASTA format. Option may be provided multiple times for multiple files (REQUIRED)")), ToolInput(tag="in_name", input_type=String(optional=True), prefix="--name", doc=InputDocumentation(doc="Human-readable name of the analysis run for output (DEFAULT=<none>)")), ToolInput(tag="in_num_processors", input_type=Int(optional=True), prefix="--num-processors", doc=InputDocumentation(doc="Number of processors to use in multithreaded steps (DEFAULT=1)")), ToolInput(tag="in_output", input_type=File(optional=True), prefix="--output", doc=InputDocumentation(doc="Path to breseq output (DEFAULT=.)")), ToolInput(tag="in_polymorphism_prediction", input_type=Boolean(optional=True), prefix="--polymorphism-prediction", doc=InputDocumentation(doc="The sample is not clonal. Predict polymorphic (mixed) mutations. Setting this flag changes from CONSENSUS MODE (the default) to POLYMORPHISM MODE")), ToolInput(tag="in_limit_fold_coverage", input_type=Int(optional=True), prefix="--limit-fold-coverage", doc=InputDocumentation(doc="Analyze a subset of the input FASTQ sequencing reads with enough bases to provide this theoretical coverage of the reference sequences. A value between 60 and 120 will usually speed up the analysis with no loss in sensitivity for clonal samples. The actual coverage achieved will be somewhat less because not all reads will map (DEFAULT=OFF)")), ToolInput(tag="in_aligned_sam", input_type=Boolean(optional=True), prefix="--aligned-sam", doc=InputDocumentation(doc="Input files are aligned SAM files, rather than FASTQ files. Junction prediction steps will be skipped. Be aware that breseq assumes: (1) Your SAM file is sorted such that all alignments for a given read are on consecutive lines. You can use 'samtools sort -n' if you are not sure that this is true for the output of your alignment program. (2) You EITHER have alignment scores as additional SAM fields with the form 'AS:i:n', where n is a positive integer and higher values indicate a better alignment OR it defaults to calculating an alignment score that is equal to the number of bases in the read minus the number of inserted bases, deleted bases, and soft clipped bases in the alignment to the reference. The default highly penalizes split-read matches (with CIGAR strings such as M35D303M65).")), ToolInput(tag="in_read_min_length", input_type=Int(optional=True), prefix="--read-min-length", doc=InputDocumentation(doc="Reads in the input FASTQ file that are shorter than this length will be ignored. (0 = OFF) (DEFAULT=18)")), ToolInput(tag="in_read_max_same_base_fraction", input_type=Int(optional=True), prefix="--read-max-same-base-fraction", doc=InputDocumentation(doc="Reads in the input FASTQ file in which this fraction or more of the bases are the same will be ignored. (0 = OFF) (DEFAULT=0.9)")), ToolInput(tag="in_read_max_n_fraction", input_type=Int(optional=True), prefix="--read-max-N-fraction", doc=InputDocumentation(doc="Reads in the input FASTQ file in which this fraction or more of the bases are uncalled as N will be ignored. (0 = OFF) (DEFAULT=0.5)")), ToolInput(tag="in_use_version_for_seq_id", input_type=Boolean(optional=True), prefix="--use-version-for-seq-id", doc=InputDocumentation(doc="If present, use the full VERSION in an input GenBank file (e.g., NC_001416.1) as the sequence ID instead of the LOCUS (e.g., NC_001416). You will need to use the converted reference file (data/reference.gff) for further breseq and gdtools operations on breseq output generated using this option.")), ToolInput(tag="in_contig_reference", input_type=Int(optional=True), prefix="--contig-reference", doc=InputDocumentation(doc="File containing reference sequences in GenBank, GFF3, or FASTA format. The same coverage distribution will be fit to all of the reference sequences in this file simultaneously. This is appropriate when they are all contigs from a genome that should be present with the same copy number. Use of this option will improve performance when there are many contigs and especially when some are very short (≤1,000 bases). (DEFAULT=0)")), ToolInput(tag="in_junction_only_reference", input_type=File(optional=True), prefix="--junction-only-reference", doc=InputDocumentation(doc="File containing reference sequences in GenBank, GFF3, or FASTA format. These references are only used for calling junctions with other reference sequences. An example of appropriate usage is including a transposon sequence not present in a reference genome. Option may be provided multiple times for multiple files. (DEFAULT=0)")), ToolInput(tag="in_targeted_sequencing", input_type=Boolean(optional=True), prefix="--targeted-sequencing", doc=InputDocumentation(doc="Reference sequences were targeted for ultra-deep sequencing (using pull-downs or amplicons). Do not fit coverage distribution.")), ToolInput(tag="in_user_evidence_gd", input_type=File(optional=True), prefix="--user-evidence-gd", doc=InputDocumentation(doc="User supplied Genome Diff file of JC and/or RA evidence items. The breseq output will report the support for these sequence changes even if they do not pass the normal filters for calling mutations in this sample.")), ToolInput(tag="in_minimum_mapping_quality", input_type=Int(optional=True), prefix="--minimum-mapping-quality", doc=InputDocumentation(doc="Ignore alignments with less than this mapping quality (MQ) when calling mutations. MQ scores are equal to -10log10(P), where P is the probability that the best alignment is not to the correct location in the reference genome. The range of MQ scores returned by bowtie2 is 0 to 255. (DEFAULT=0)")), ToolInput(tag="in_base_quality_cut_off", input_type=Int(optional=True), prefix="--base-quality-cutoff", doc=InputDocumentation(doc="Ignore bases with quality scores lower than this value (DEFAULT=3)")), ToolInput(tag="in_quality_score_trim", input_type=Boolean(optional=True), prefix="--quality-score-trim", doc=InputDocumentation(doc="Trim the ends of reads past any base with a quality score below --base-quality-score-cutoff.")), ToolInput(tag="in_require_match_length", input_type=Int(optional=True), prefix="--require-match-length", doc=InputDocumentation(doc="Only consider alignments that cover this many bases of a read (DEFAULT=0)")), ToolInput(tag="in_require_match_fraction", input_type=Float(optional=True), prefix="--require-match-fraction", doc=InputDocumentation(doc="Only consider alignments that cover this fraction of a read (DEFAULT=0.9)")), ToolInput(tag="in_maximum_read_mismatches", input_type=String(optional=True), prefix="--maximum-read-mismatches", doc=InputDocumentation(doc="Don't consider reads with this many or more bases or indels that are different from the reference sequence. Unaligned bases at the end of a read also count as mismatches. Unaligned bases at the beginning of the read do NOT count as mismatches. (DEFAULT=OFF)")), ToolInput(tag="in_deletion_coverage_propagation_cut_off", input_type=Int(optional=True), prefix="--deletion-coverage-propagation-cutoff", doc=InputDocumentation(doc="Value for coverage above which deletions are cutoff. 0 = calculated from coverage distribution (DEFAULT=0)")), ToolInput(tag="in_deletion_coverage_seed_cut_off", input_type=Int(optional=True), prefix="--deletion-coverage-seed-cutoff", doc=InputDocumentation(doc="Value for coverage below which deletions are seeded (DEFAULT=0)")), ToolInput(tag="in_bowtie_two_scoring", input_type=Int(optional=True), prefix="--bowtie2-scoring", doc=InputDocumentation(doc="All calls to bowtie2 must use the same commands for assigning scores to read alignments. Larger scores are assumed to be better by breseq. Each call to bowtie2 has this option added to its command line. (DEFAULT='--ma 1 --mp 3 --np 0 --rdg 2,3 --rfg 2,3 --ignore-quals')")), ToolInput(tag="in_bowtie_two_stage_one", input_type=Int(optional=True), prefix="--bowtie2-stage1", doc=InputDocumentation(doc="Settings for mapping criteria used for the stage 1 alignment. This step is normally meant for quickly aligning near-perfect matches. (DEFAULT='--local -i S,1,0.25 --score-min L,1,0.9 -k 2000')")), ToolInput(tag="in_bowtie_two_stage_two", input_type=Int(optional=True), prefix="--bowtie2-stage2", doc=InputDocumentation(doc="Settings for mapping criteria used for the stage 2 alignment. If set to the empty string '', then stage 2 alignment is skipped. This step is normally meant for exhaustively mapping reads that were unmapped by stage 1. (DEFAULT='--local -i S,1,0.25 --score-min L,6,0.2 -k 2000')")), ToolInput(tag="in_bowtie_two_junction", input_type=Int(optional=True), prefix="--bowtie2-junction", doc=InputDocumentation(doc="Settings for mapping criteria used in aligning reads to candidate junctions. (DEFAULT='--local -i S,1,0.25 --score-min L,1,0.70 -k 2000')")), ToolInput(tag="in_no_junction_prediction", input_type=Boolean(optional=True), prefix="--no-junction-prediction", doc=InputDocumentation(doc="Do not predict new sequence junctions")), ToolInput(tag="in_junction_in_del_split_length", input_type=Int(optional=True), prefix="--junction-indel-split-length", doc=InputDocumentation(doc="Split read alignments on indels of this many or more bases. Indel mutations of this length or longer will be predicted by JC evidence and those that are shorter will be predicted from RA evience (DEFAULT=3)")), ToolInput(tag="in_junction_alignment_pair_limit", input_type=Int(optional=True), prefix="--junction-alignment-pair-limit", doc=InputDocumentation(doc="Only consider this many passed alignment pairs when creating candidate junction sequences (0 = DO NOT LIMIT) (DEFAULT=100000)")), ToolInput(tag="in_junction_minimum_candidates", input_type=Int(optional=True), prefix="--junction-minimum-candidates", doc=InputDocumentation(doc="Test at least this many of the top-scoring junction candidates, regardless of their length (DEFAULT=100)")), ToolInput(tag="in_junction_maximum_candidates", input_type=Int(optional=True), prefix="--junction-maximum-candidates", doc=InputDocumentation(doc="Test no more than this many of the top-scoring junction candidates (0 = DO NOT LIMIT) (DEFAULT=5000)")), ToolInput(tag="in_junction_candidate_length_factor", input_type=Int(optional=True), prefix="--junction-candidate-length-factor", doc=InputDocumentation(doc="Accept top-scoring junction candidates to test until their cumulative length is this factor times the total reference sequence length (0 = DO NOT LIMIT) (DEFAULT=0.1)")), ToolInput(tag="in_junction_minimum_candidate_pos_hash_score", input_type=Int(optional=True), prefix="--junction-minimum-candidate-pos-hash-score", doc=InputDocumentation(doc="Minimum number of distinct spanning read start positions required to create a junction candidate for further testing (DEFAULT=2)")), ToolInput(tag="in_junction_score_cut_off", input_type=Float(optional=True), prefix="--junction-score-cutoff", doc=InputDocumentation(doc="Maximum negative log10 probability of uneven coverage across a junction breakpoint to accept (0 = OFF) (DEFAULT=3.0)")), ToolInput(tag="in_junction_minimum_pos_hash_score", input_type=Int(optional=True), prefix="--junction-minimum-pos-hash-score", doc=InputDocumentation(doc="Minimum number of distinct spanning read start positions required to accept a junction (DEFAULT = consensus mode, 3; polymorphism mode, 3)")), ToolInput(tag="in_junction_minimum_side_match", input_type=Int(optional=True), prefix="--junction-minimum-side-match", doc=InputDocumentation(doc="Minimum number of bases a read must extend past any overlap or read-only sequence at the breakpoint of a junction on each side to count as support for the junction (DEFAULT = consensus mode, 1; polymorphism mode, 6)")), ToolInput(tag="in_junction_minimum_pr_no_read_start_per_position", input_type=Float(optional=True), prefix="--junction-minimum-pr-no-read-start-per-position", doc=InputDocumentation(doc="Minimum probablilty assigned that no mapped read will start at a given position and strand for junction prediction (DEFAULT=0.1)")), ToolInput(tag="in_junction_allow_suboptimal_matches", input_type=Boolean(optional=True), prefix="--junction-allow-suboptimal-matches", doc=InputDocumentation(doc="Assign a read to the junction candidate with the most overall support as long as its match to this junction is better than to any location in the reference sequence, even if it matches a different junction candidate better. This behavior was the default before v0.35.0. It will align more reads to junctions but risks misassigning some reads to the wrong junction candidates. It is only recommended that you use this option in CONSENSUS mode")), ToolInput(tag="in_consensus_score_cut_off", input_type=Int(optional=True), prefix="--consensus-score-cutoff", doc=InputDocumentation(doc="Log10 E-value cutoff for consensus base substitutions and small indels (DEFAULT = 10)")), ToolInput(tag="in_consensus_frequency_cut_off", input_type=Float(optional=True), prefix="--consensus-frequency-cutoff", doc=InputDocumentation(doc="Only predict consensus mutations when the variant allele frequency is above this value. (DEFAULT = consensus mode, 0.8; polymorphism mode, 0.8)")), ToolInput(tag="in_consensus_minimum_variant_coverage", input_type=Int(optional=True), prefix="--consensus-minimum-variant-coverage", doc=InputDocumentation(doc="Only predict consensus mutations when at least this many reads support the mutation. (DEFAULT = consensus mode, 0; polymorphism mode, 0)")), ToolInput(tag="in_consensus_minimum_total_coverage", input_type=Int(optional=True), prefix="--consensus-minimum-total-coverage", doc=InputDocumentation(doc="Only predict consensus mutations when at least this many reads total are aligned to a genome position. (DEFAULT = consensus mode, 0; polymorphism mode, 0)")), ToolInput(tag="in_consensus_minimum_variant_coverage_each_strand", input_type=Int(optional=True), prefix="--consensus-minimum-variant-coverage-each-strand", doc=InputDocumentation(doc="Only predict consensus mutations when at least this many reads on each strand support the mutation. (DEFAULT = consensus mode, 0; polymorphism mode, 0)")), ToolInput(tag="in_consensus_minimum_total_coverage_each_strand", input_type=Int(optional=True), prefix="--consensus-minimum-total-coverage-each-strand", doc=InputDocumentation(doc="Only predict consensus mutations when at least this many reads on each strand are aligned to a genome position. (DEFAULT = consensus mode, 0; polymorphism mode, 0)")), ToolInput(tag="in_consensus_reject_in_del_homopolymer_length", input_type=Int(optional=True), prefix="--consensus-reject-indel-homopolymer-length", doc=InputDocumentation(doc="Reject insertion/deletion polymorphisms which could result from expansion/contraction of homopolymer repeats with this length or greater in the reference genome (0 = OFF) (DEFAULT = consensus mode, OFF; polymorphism mode, OFF)")), ToolInput(tag="in_consensus_reject_surrounding_homopolymer_length", input_type=Int(optional=True), prefix="--consensus-reject-surrounding-homopolymer-length", doc=InputDocumentation(doc="Reject polymorphic base substitutions that create a homopolymer with this many or more of one base in a row. The homopolymer must begin and end after the changed base. For example, TATTT->TTTTT would be rejected with a setting of 5, but ATTTT->TTTTT would not. (0 = OFF) (DEFAULT = consensus mode, OFF; polymorphism mode, OFF)")), ToolInput(tag="in_polymorphism_score_cut_off", input_type=Int(optional=True), prefix="--polymorphism-score-cutoff", doc=InputDocumentation(doc="Log10 E-value cutoff for test of polymorphism vs no polymorphism (DEFAULT = consensus mode, 10; polymorphism mode, 2)")), ToolInput(tag="in_polymorphism_frequency_cut_off", input_type=Float(optional=True), prefix="--polymorphism-frequency-cutoff", doc=InputDocumentation(doc="Only predict polymorphisms when the minor variant allele frequency is greater than this value. For example, a setting of 0.05 will reject all polymorphisms with a non-reference frequency of <0.05, and any variants with a non-reference frequency of ≥ 0.95 (which is 1 - 0.05) will be rejected as polymorphisms and instead predicted to be consensus mutations (DEFAULT = consensus mode, 0.2; polymorphism mode, 0.05)")), ToolInput(tag="in_polymorphism_minimum_variant_coverage", input_type=Int(optional=True), prefix="--polymorphism-minimum-variant-coverage", doc=InputDocumentation(doc="Only predict polymorphisms when at least this many reads support each alternative allele. (DEFAULT = consensus mode, 0; polymorphism mode, 0)")), ToolInput(tag="in_polymorphism_minimum_total_coverage", input_type=Int(optional=True), prefix="--polymorphism-minimum-total-coverage", doc=InputDocumentation(doc="Only predict polymorphisms when at least this many reads total are aligned to a genome position. (DEFAULT = consensus mode, 0; polymorphism mode, 0)")), ToolInput(tag="in_polymorphism_minimum_variant_coverage_each_strand", input_type=Int(optional=True), prefix="--polymorphism-minimum-variant-coverage-each-strand", doc=InputDocumentation(doc="Only predict polymorphisms when at least this many reads on each strand support each alternative allele. (DEFAULT = consensus mode, 0; polymorphism mode, 2)")), ToolInput(tag="in_polymorphism_minimum_total_coverage_each_strand", input_type=Int(optional=True), prefix="--polymorphism-minimum-total-coverage-each-strand", doc=InputDocumentation(doc="Only predict polymorphisms when at least this many reads on each strand are aligned to a genome position. (DEFAULT = consensus mode, 0; polymorphism mode, 0)")), ToolInput(tag="in_polymorphism_bias_cut_off", input_type=Int(optional=True), prefix="--polymorphism-bias-cutoff", doc=InputDocumentation(doc="P-value criterion for Fisher's exact test for strand bias AND K-S test for quality score bias. (0 = OFF) (DEFAULT = consensus mode, OFF; polymorphism mode, OFF)")), ToolInput(tag="in_polymorphism_no_indels", input_type=Boolean(optional=True), prefix="--polymorphism-no-indels", doc=InputDocumentation(doc="Do not predict insertion/deletion polymorphisms from read alignment evidence")), ToolInput(tag="in_polymorphism_reject_in_del_homopolymer_length", input_type=Int(optional=True), prefix="--polymorphism-reject-indel-homopolymer-length", doc=InputDocumentation(doc="Reject insertion/deletion polymorphisms which could result from expansion/contraction of homopolymer repeats with this length or greater in the reference genome (0 = OFF) (DEFAULT = consensus mode, OFF; polymorphism mode, 3)")), ToolInput(tag="in_polymorphism_reject_surrounding_homopolymer_length", input_type=Int(optional=True), prefix="--polymorphism-reject-surrounding-homopolymer-length", doc=InputDocumentation(doc="Reject polymorphic base substitutions that create a homopolymer with this many or more of one base in a row. The homopolymer must begin and end after the changed base. For example, TATTT->TTTTT would be rejected with a setting of 5, but ATTTT->TTTTT would not. (0 = OFF) (DEFAULT = consensus mode, OFF; polymorphism mode, 5)")), ToolInput(tag="in_max_displayed_reads", input_type=Int(optional=True), prefix="--max-displayed-reads", doc=InputDocumentation(doc="Maximum number of reads to display in the HTML output for an evidence item (DEFAULT=100)")), ToolInput(tag="in_brief_html_output", input_type=Boolean(optional=True), prefix="--brief-html-output", doc=InputDocumentation(doc="Don't create detailed output files for evidence (no read alignments or coverage plots)")), ToolInput(tag="in_header_genome_diff", input_type=File(optional=True), prefix="--header-genome-diff", doc=InputDocumentation(doc="Include header information from this GenomeDiff file in output.gd")), ToolInput(tag="in_no_javascript", input_type=Boolean(optional=True), prefix="--no-javascript", doc=InputDocumentation(doc="Don't include javascript in the HTML output")), ToolInput(tag="in_skip_ra_mc_prediction", input_type=Boolean(optional=True), prefix="--skip-RA-MC-prediction", doc=InputDocumentation(doc="Skip generating read alignment and missing coverage evidence.")), ToolInput(tag="in_skip_jc_prediction", input_type=Boolean(optional=True), prefix="--skip-JC-prediction", doc=InputDocumentation(doc="Skip generating new junction evidence.")), ToolInput(tag="in_skip_mc_prediction", input_type=Boolean(optional=True), prefix="--skip-MC-prediction", doc=InputDocumentation(doc="Skip generating missing coverage evidence.")), ToolInput(tag="in_keep_intermediates", input_type=Boolean(optional=True), prefix="--keep-intermediates", doc=InputDocumentation(doc="Do not delete intermediate files.")), ToolInput(tag="in_per_position_file", input_type=Boolean(optional=True), prefix="--per-position-file", doc=InputDocumentation(doc="Create additional file of per-position aligned bases")), ToolInput(tag="in_junction_debug", input_type=Boolean(optional=True), prefix="--junction-debug", doc=InputDocumentation(doc="Output additional junction debugging files")), ToolInput(tag="in_cnv", input_type=Boolean(optional=True), prefix="--cnv", doc=InputDocumentation(doc="Do experimental copy number variation prediction")), ToolInput(tag="in_cnv_tile_size", input_type=Int(optional=True), prefix="--cnv-tile-size", doc=InputDocumentation(doc="Tile size for copy number variation prediction (DEFAULT=500)")), ToolInput(tag="in_cnv_ignore_redundant", input_type=Boolean(optional=True), prefix="--cnv-ignore-redundant", doc=InputDocumentation(doc="Only consider non-redundant coverage when using cnv"))], outputs=[ToolOutput(tag="out_output", output_type=File(optional=True), selector=InputSelector(input_to_select="in_output", type_hint=File()), doc=OutputDocumentation(doc="Path to breseq output (DEFAULT=.)")), ToolOutput(tag="out_user_evidence_gd", output_type=File(optional=True), selector=InputSelector(input_to_select="in_user_evidence_gd", type_hint=File()), doc=OutputDocumentation(doc="User supplied Genome Diff file of JC and/or RA evidence items. The breseq output will report the support for these sequence changes even if they do not pass the normal filters for calling mutations in this sample.")), ToolOutput(tag="out_header_genome_diff", output_type=File(optional=True), selector=InputSelector(input_to_select="in_header_genome_diff", type_hint=File()), doc=OutputDocumentation(doc="Include header information from this GenomeDiff file in output.gd"))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Breseq_V0_1_0().translate("wdl", allow_empty_container=True)

