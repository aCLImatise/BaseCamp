version 1.0

task VarlociraptorCallCnvs {
  input {
    String? calls
    Int? max_dist
    Int? min_bayes_factor
    String? bcf_file_contain
    String? purity
    String? threads
  }
  command <<<
    varlociraptor call cnvs \
      ~{if defined(calls) then ("--calls " +  '"' + calls + '"') else ""} \
      ~{if defined(max_dist) then ("--max-dist " +  '"' + max_dist + '"') else ""} \
      ~{if defined(min_bayes_factor) then ("--min-bayes-factor " +  '"' + min_bayes_factor + '"') else ""} \
      ~{if defined(bcf_file_contain) then ("--output " +  '"' + bcf_file_contain + '"') else ""} \
      ~{if defined(purity) then ("--purity " +  '"' + purity + '"') else ""} \
      ~{if defined(threads) then ("--threads " +  '"' + threads + '"') else ""}
  >>>
  parameter_meta {
    calls: "VCF/BCF file (generated by varlociraptor call-tumor-normal) to process (if omitted, read from STDIN)."
    max_dist: "Maximum distance between supporting loci in a CNV. [default: 1000]"
    min_bayes_factor: "Minimum bayes factor (> 1.0) between likelihoods of CNV and no CNV to consider. The higher this value, the fewer candidate CNVs will be investigated. Note that this can be usually left unchanged, because every CNV is provided with a posterior probability that can be used for filtering, e.g., via 'varlociraptor filter- calls control-fdr'. [default: 1.01]"
    bcf_file_contain: "BCF file that shall contain the results (if omitted, write to STDOUT)."
    purity: "Tumor purity."
    threads: "Number of threads to use."
  }
}