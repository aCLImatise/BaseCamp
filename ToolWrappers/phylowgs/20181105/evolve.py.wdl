version 1.0

task Evolvepy {
  input {
    File? output_dir
    Int? write_backups_every
    Int? write_state_every
    Int? burnin_samples
    Int? mcmc_samples
    Int? mh_iterations
    String? random_seed
    File? tmp_dir
    File? params
    String ssm_file
    String cnv_file
  }
  command <<<
    evolve_py \
      ~{ssm_file} \
      ~{cnv_file} \
      ~{if defined(output_dir) then ("--output-dir " +  '"' + output_dir + '"') else ""} \
      ~{if defined(write_backups_every) then ("--write-backups-every " +  '"' + write_backups_every + '"') else ""} \
      ~{if defined(write_state_every) then ("--write-state-every " +  '"' + write_state_every + '"') else ""} \
      ~{if defined(burnin_samples) then ("--burnin-samples " +  '"' + burnin_samples + '"') else ""} \
      ~{if defined(mcmc_samples) then ("--mcmc-samples " +  '"' + mcmc_samples + '"') else ""} \
      ~{if defined(mh_iterations) then ("--mh-iterations " +  '"' + mh_iterations + '"') else ""} \
      ~{if defined(random_seed) then ("--random-seed " +  '"' + random_seed + '"') else ""} \
      ~{if defined(tmp_dir) then ("--tmp-dir " +  '"' + tmp_dir + '"') else ""} \
      ~{if defined(params) then ("--params " +  '"' + params + '"') else ""}
  >>>
  runtime {
    docker: "None"
  }
  parameter_meta {
    output_dir: "Path to output directory (default: None)"
    write_backups_every: "Number of iterations to go between writing backups of\\nprogram state (default: 100)"
    write_state_every: "Number of iterations between writing program state to\\ndisk. Higher values reduce IO burden at the cost of\\nlosing progress made if program is interrupted.\\n(default: 10)"
    burnin_samples: "Number of burnin samples (default: 1000)"
    mcmc_samples: "Number of MCMC samples (default: 2500)"
    mh_iterations: "Number of Metropolis-Hastings iterations (default:\\n5000)"
    random_seed: "Random seed for initializing MCMC sampler (default:\\nNone)"
    tmp_dir: "Path to directory for temporary files (default: None)"
    params: "JSON file listing run parameters, generated by the\\nparser (default: None)\\n"
    ssm_file: "File listing SSMs (simple somatic mutations, i.e.,\\nsingle nucleotide variants. For proper format, see\\nREADME.md."
    cnv_file: "File listing CNVs (copy number variations). For proper\\nformat, see README.md."
  }
  output {
    File out_stdout = stdout()
    File out_output_dir = "${in_output_dir}"
  }
}