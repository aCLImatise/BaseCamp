from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import Boolean, File, Directory, Int, String, Float

Xyalign_V0_1_0 = CommandToolBuilder(tool="xyalign", base_command=["xyalign"], inputs=[ToolInput(tag="in_bam", input_type=Boolean(optional=True), prefix="--bam", doc=InputDocumentation(doc="[BAM [BAM ...]]\nFull path to input bam files. If more than one\nprovided, only the first will be used for modules\nother than --CHROM_STATS")), ToolInput(tag="in_cram", input_type=Boolean(optional=True), prefix="--cram", doc=InputDocumentation(doc="[CRAM [CRAM ...]]\nFull path to input cram files. If more than one\nprovided, only the first will be used for modules\nother than --CHROM_STATS. Not currently supported.")), ToolInput(tag="in_sam", input_type=Boolean(optional=True), prefix="--sam", doc=InputDocumentation(doc="[SAM [SAM ...]]\nFull path to input sam files. If more than one\nprovided, only the first will be used for modules\nother than --CHROM_STATS. Not currently supported.")), ToolInput(tag="in_ref", input_type=File(optional=True), prefix="--ref", doc=InputDocumentation(doc="REQUIRED. Path to reference sequence (including file\nname).")), ToolInput(tag="in_output_dir", input_type=Directory(optional=True), prefix="--output_dir", doc=InputDocumentation(doc="REQUIRED. Output directory. XYalign will create a\ndirectory structure within this directory")), ToolInput(tag="in_chromosomes", input_type=Boolean(optional=True), prefix="--chromosomes", doc=InputDocumentation(doc="[CHROMOSOMES [CHROMOSOMES ...]], -c [CHROMOSOMES [CHROMOSOMES ...]]\nChromosomes to analyze (names must match reference\nexactly). For humans, we recommend at least chr19,\nchrX, chrY. Generally, we suggest including the sex\nchromosomes and at least one autosome. To analyze all\nchromosomes use '--chromosomes ALL' or '--chromosomes\nall'.")), ToolInput(tag="in_x_chromosome", input_type=Boolean(optional=True), prefix="--x_chromosome", doc=InputDocumentation(doc="[X_CHROMOSOME [X_CHROMOSOME ...]], -x [X_CHROMOSOME [X_CHROMOSOME ...]]\nNames of x-linked scaffolds in reference fasta (must\nmatch reference exactly).")), ToolInput(tag="in_y_chromosome", input_type=Boolean(optional=True), prefix="--y_chromosome", doc=InputDocumentation(doc="[Y_CHROMOSOME [Y_CHROMOSOME ...]], -y [Y_CHROMOSOME [Y_CHROMOSOME ...]]\nNames of y-linked scaffolds in reference fasta (must\nmatch reference exactly). Defaults to chrY. Give None\nif using an assembly without a Y chromosome")), ToolInput(tag="in_sample_id", input_type=File(optional=True), prefix="--sample_id", doc=InputDocumentation(doc="Name/ID of sample - for use in plot titles and file\nnaming. Default is sample")), ToolInput(tag="in_cpus", input_type=Int(optional=True), prefix="--cpus", doc=InputDocumentation(doc="Number of cores/threads to use. Default is 1")), ToolInput(tag="in_x_mx", input_type=Int(optional=True), prefix="--xmx", doc=InputDocumentation(doc="Memory to be provided to java programs via -Xmx. E.g.,\nuse the flag '--xmx 4g' to pass '-Xmx4g' as a flag\nwhen running java programs (currently just repair.sh).\nDefault is 'None' (i.e., nothing provided on the\ncommand line), which will allow repair.sh to\nautomatically allocate memory. Note that if you're\nusing --STRIP_READS on deep coverage whole genome\ndata, you might need quite a bit of memory, e.g. '--\nxmx 16g', '--xmx 32g', or more depending on how many\nreads are present per read group.")), ToolInput(tag="in_fast_q_compression", input_type=String(optional=True), prefix="--fastq_compression", doc=InputDocumentation(doc="Compression level for fastqs output from repair.sh.\nBetween (inclusive) 0 and 9. Default is 3. 1 through 9\nindicate compression levels. If 0, fastqs will be\nuncompressed.")), ToolInput(tag="in_single_end", input_type=Boolean(optional=True), prefix="--single_end", doc=InputDocumentation(doc="Include flag if reads are single-end and NOT paired-")), ToolInput(tag="in_no_cleanup", input_type=Boolean(optional=True), prefix="--no_cleanup", doc=InputDocumentation(doc="Include flag to preserve temporary files.")), ToolInput(tag="in_prepare_reference", input_type=Boolean(optional=True), prefix="--PREPARE_REFERENCE", doc=InputDocumentation(doc="This flag will limit XYalign to only preparing\nreference fastas for individuals with and without Y\nchromosomes. These fastas can then be passed with each\nsample to save subsequent processing time.")), ToolInput(tag="in_chrom_stats", input_type=Boolean(optional=True), prefix="--CHROM_STATS", doc=InputDocumentation(doc="This flag will limit XYalign to only analyzing\nprovided bam files for depth and mapq across entire\nchromosomes.")), ToolInput(tag="in_analyze_bam", input_type=Boolean(optional=True), prefix="--ANALYZE_BAM", doc=InputDocumentation(doc="This flag will limit XYalign to only analyzing the bam\nfile for depth, mapq, and (optionally) read balance\nand outputting plots.")), ToolInput(tag="in_characterize_sex_chrom_s", input_type=Boolean(optional=True), prefix="--CHARACTERIZE_SEX_CHROMS", doc=InputDocumentation(doc="This flag will limit XYalign to the steps required to\ncharacterize sex chromosome content (i.e., analyzing\nthe bam for depth, mapq, and read balance and running\nstatistical tests to help infer ploidy)")), ToolInput(tag="in_remapping", input_type=Boolean(optional=True), prefix="--REMAPPING", doc=InputDocumentation(doc="This flag will limit XYalign to only the steps\nrequired to strip reads and remap to masked\nreferences. If masked references are not provided,\nthey will be created.")), ToolInput(tag="in_strip_reads", input_type=Boolean(optional=True), prefix="--STRIP_READS", doc=InputDocumentation(doc="This flag will limit XYalign to only the steps\nrequired to strip reads from a provided bam file.")), ToolInput(tag="in_log_file", input_type=File(optional=True), prefix="--logfile", doc=InputDocumentation(doc="Name of logfile. Will overwrite if exists. Default is")), ToolInput(tag="in_platypus_path", input_type=File(optional=True), prefix="--platypus_path", doc=InputDocumentation(doc="Path to platypus. Default is 'platypus'. If platypus\nis not directly callable (e.g., '/path/to/platypus' or\n'/path/to/Playpus.py'), then provide path to python as\nwell (e.g., '/path/to/python /path/to/platypus'). In\naddition, be sure provided python is version 2. See\nthe documentation for more information about setting\nup an anaconda environment.")), ToolInput(tag="in_bwa_path", input_type=File(optional=True), prefix="--bwa_path", doc=InputDocumentation(doc="Path to bwa. Default is 'bwa'")), ToolInput(tag="in_sam_tools_path", input_type=File(optional=True), prefix="--samtools_path", doc=InputDocumentation(doc="Path to samtools. Default is 'samtools'")), ToolInput(tag="in_repairs_h_path", input_type=File(optional=True), prefix="--repairsh_path", doc=InputDocumentation(doc="Path to bbmap's repair.sh script. Default is\n'repair.sh'")), ToolInput(tag="in_shuffles_h_path", input_type=File(optional=True), prefix="--shufflesh_path", doc=InputDocumentation(doc="Path to bbmap's shuffle.sh script. Default is\n'shuffle.sh'")), ToolInput(tag="in_samba_mba_path", input_type=File(optional=True), prefix="--sambamba_path", doc=InputDocumentation(doc="Path to sambamba. Default is 'sambamba'")), ToolInput(tag="in_bed_tools_path", input_type=File(optional=True), prefix="--bedtools_path", doc=InputDocumentation(doc="Path to bedtools. Default is 'bedtools'")), ToolInput(tag="in_platypus_calling", input_type=String(optional=True), prefix="--platypus_calling", doc=InputDocumentation(doc="Platypus calling withing the pipeline (before\nprocessing, after processing, both, or neither).\nOptions: both, none, before, after.")), ToolInput(tag="in_no_variant_plots", input_type=Boolean(optional=True), prefix="--no_variant_plots", doc=InputDocumentation(doc="Include flag to prevent plotting read balance from VCF")), ToolInput(tag="in_skip_compatibility_check", input_type=Boolean(optional=True), prefix="--skip_compatibility_check", doc=InputDocumentation(doc="Include flag to prevent check of compatibility between\ninput bam and reference fasta")), ToolInput(tag="in_no_perm_test", input_type=Boolean(optional=True), prefix="--no_perm_test", doc=InputDocumentation(doc="Include flag to turn off permutation tests.")), ToolInput(tag="in_no_ks_test", input_type=Boolean(optional=True), prefix="--no_ks_test", doc=InputDocumentation(doc="Include flag to turn off KS Two Sample tests.")), ToolInput(tag="in_no_bootstrap", input_type=Boolean(optional=True), prefix="--no_bootstrap", doc=InputDocumentation(doc="Include flag to turn off bootstrap analyses. Requires\neither --y_present, --y_absent, or\n--sex_chrom_calling_threshold if running full\npipeline.")), ToolInput(tag="in_variant_site_quality", input_type=Int(optional=True), prefix="--variant_site_quality", doc=InputDocumentation(doc="Consider all SNPs with a site quality (QUAL) greater\nthan or equal to this value. Default is 30.")), ToolInput(tag="in_variant_genotype_quality", input_type=Int(optional=True), prefix="--variant_genotype_quality", doc=InputDocumentation(doc="Consider all SNPs with a sample genotype quality\ngreater than or equal to this value. Default is 30.")), ToolInput(tag="in_variant_depth", input_type=Int(optional=True), prefix="--variant_depth", doc=InputDocumentation(doc="Consider all SNPs with a sample depth greater than or\nequal to this value. Default is 4.")), ToolInput(tag="in_platypus_log_file", input_type=File(optional=True), prefix="--platypus_logfile", doc=InputDocumentation(doc="Prefix to use for Platypus log files. Will default to\nthe sample_id argument provided")), ToolInput(tag="in_homogenize_read_balance", input_type=Float(optional=True), prefix="--homogenize_read_balance", doc=InputDocumentation(doc="If True, read balance values will be transformed by\nsubtracting each value from 1. For example, 0.25 and\n0.75 would be treated equivalently. Default is False.")), ToolInput(tag="in_min_variant_count", input_type=Int(optional=True), prefix="--min_variant_count", doc=InputDocumentation(doc="Minimum number of variants in a window for the read\nbalance of that window to be plotted. Note that this\ndoes not affect plotting of variant counts. Default is\n1, though we note that many window averages will be\nmeaningless at this setting.")), ToolInput(tag="in_reference_mask", input_type=Boolean(optional=True), prefix="--reference_mask", doc=InputDocumentation(doc="[REFERENCE_MASK [REFERENCE_MASK ...]]\nBed file containing regions to replace with Ns in the\nsex chromosome reference. Examples might include the\npseudoautosomal regions on the Y to force all\nmapping/calling on those regions of the X chromosome.\nDefault is None.")), ToolInput(tag="in_xx_ref_out_name", input_type=Directory(optional=True), prefix="--xx_ref_out_name", doc=InputDocumentation(doc="Desired name for masked output fasta for samples\nWITHOUT a Y chromosome (e.g., XX, XXX, XO, etc.).\nDefaults to 'xyalign_noY.masked.fa'. Will be output in\nthe XYalign reference directory.")), ToolInput(tag="in_xy_ref_out_name", input_type=Directory(optional=True), prefix="--xy_ref_out_name", doc=InputDocumentation(doc="Desired name for masked output fasta for samples WITH\na Y chromosome (e.g., XY, XXY, etc.). Defaults to\n'xyalign_withY.masked.fa'. Will be output in the\nXYalign reference directory.")), ToolInput(tag="in_xx_ref_out", input_type=File(optional=True), prefix="--xx_ref_out", doc=InputDocumentation(doc="Desired path to and name of masked output fasta for\nsamples WITHOUT a Y chromosome (e.g., XX, XXX, XO,\netc.). Overwrites if exists. Use if you would like\noutput somewhere other than XYalign reference\ndirectory. Otherwise, use --xx_ref_name.")), ToolInput(tag="in_xy_ref_out", input_type=File(optional=True), prefix="--xy_ref_out", doc=InputDocumentation(doc="Desired path to and name of masked output fasta for\nsamples WITH a Y chromosome (e.g., XY, XXY, etc.).\nOverwrites if exists. Use if you would like output\nsomewhere other than XYalign reference directory.\nOtherwise, use --xy_ref_name.")), ToolInput(tag="in_xx_ref_in", input_type=File(optional=True), prefix="--xx_ref_in", doc=InputDocumentation(doc="Path to preprocessed reference fasta to be used for\nremapping in X0 or XX samples. Default is None. If\nnone, will produce a sample-specific reference for\nremapping.")), ToolInput(tag="in_xy_ref_in", input_type=File(optional=True), prefix="--xy_ref_in", doc=InputDocumentation(doc="Path to preprocessed reference fasta to be used for\nremapping in samples containing Y chromosome. Default\nis None. If none, will produce a sample-specific\nreference for remapping.")), ToolInput(tag="in_bwa_index", input_type=String(optional=True), prefix="--bwa_index", doc=InputDocumentation(doc="If True, index with BWA during PREPARE_REFERENCE. Only\nrelevantwhen running the PREPARE_REFERENCE module by\nitself. Default is False.")), ToolInput(tag="in_read_group_id", input_type=File(optional=True), prefix="--read_group_id", doc=InputDocumentation(doc="If read groups are present in a bam file, they are\nused by default in remapping steps. However, if read\ngroups are not present in a file, there are two\noptions for proceeding. If '--read_group_id None' is\nprovided (case sensitive), then no read groups will be\nused in subsequent mapping steps. Otherwise, any other\nstring provided to this flag will be used as a read\ngroup ID. Default is '--read_group_id xyalign'")), ToolInput(tag="in_bwa_flags", input_type=String(optional=True), prefix="--bwa_flags", doc=InputDocumentation(doc="Provide a string (in quotes, with spaces between\narguments) for additional flags desired for BWA\nmapping (other than -R and -t). Example: '-M -T 20 -v\n4'. Note that those are spaces between arguments.")), ToolInput(tag="in_sex_chrom_bam_only", input_type=File(optional=True), prefix="--sex_chrom_bam_only", doc=InputDocumentation(doc="This flag skips merging the new sex chromosome bam\nfile back into the original bam file (i.e., sex chrom\nswapping). This will output a bam file containing only\nthe newly remapped sex chromosomes.")), ToolInput(tag="in_sex_chrom_calling_threshold", input_type=Float(optional=True), prefix="--sex_chrom_calling_threshold", doc=InputDocumentation(doc="This is the *maximum* filtered X/Y depth ratio for an\nindividual to be considered as having heterogametic\nsex chromsomes (e.g., XY) for the REMAPPING module of\nXYalign. Note here that X and Y chromosomes are simply\nthe chromosomes that have been designated as X and Y\nvia --x_chromosome and --y_chromosome. Keep in mind\nthat the ideal threshold will vary according to sex\ndetermination mechanism, sequence homology between the\nsex chromosomes, reference genome, sequencing methods,\netc. See documentation for more detail. Default is\n2.0, which we found to be reasonable for exome, low-\ncoverage whole-genome, and high-coverage whole-genome\nhuman data.")), ToolInput(tag="in_y_present", input_type=Boolean(optional=True), prefix="--y_present", doc=InputDocumentation(doc="Overrides sex chr estimation by XYalign and remaps\nwith Y present.")), ToolInput(tag="in_y_absent", input_type=Boolean(optional=True), prefix="--y_absent", doc=InputDocumentation(doc="Overrides sex chr estimation by XY align and remaps\nwith Y absent.")), ToolInput(tag="in_window_size", input_type=Int(optional=True), prefix="--window_size", doc=InputDocumentation(doc="Window size (integer) for sliding window calculations.\nDefault is 50000. Default is None. If set to None,\nwill use targets provided using --target_bed.")), ToolInput(tag="in_target_bed", input_type=Int(optional=True), prefix="--target_bed", doc=InputDocumentation(doc="Bed file containing targets to use in sliding window\nanalyses instead of a fixed window width. Either this\nor --window_size needs to be set. Default is None,\nwhich will use window size provided with\n--window_size. If not None, and --window_size is None,\nanalyses will use targets in provided file. Must be\ntypical bed format, 0-based indexing, with the first\nthree columns containing the chromosome name, start\ncoordinate, stop coordinate.")), ToolInput(tag="in_exact_depth", input_type=Boolean(optional=True), prefix="--exact_depth", doc=InputDocumentation(doc="Calculate exact depth within windows, else use much\nfaster approximation. *Currently exact is not\nimplemented*. Default is False.")), ToolInput(tag="in_whole_genome_threshold", input_type=Boolean(optional=True), prefix="--whole_genome_threshold", doc=InputDocumentation(doc="This flag will calculate the depth filter threshold\nbased on all values from across the genome. By\ndefault, thresholds are calculated per chromosome.")), ToolInput(tag="in_mapq_cut_off", input_type=Int(optional=True), prefix="--mapq_cutoff", doc=InputDocumentation(doc="Minimum mean mapq threshold for a window to be\nconsidered high quality. Default is 20.")), ToolInput(tag="in_min_depth_filter", input_type=Int(optional=True), prefix="--min_depth_filter", doc=InputDocumentation(doc="Minimum depth threshold for a window to be considered\nhigh quality. Calculated as mean depth *\nmin_depth_filter. So, a min_depth_filter of 0.2 would\nrequire at least a minimum depth of 2 if the mean\ndepth was 10. Default is 0.0 to consider all windows.")), ToolInput(tag="in_max_depth_filter", input_type=Float(optional=True), prefix="--max_depth_filter", doc=InputDocumentation(doc="Maximum depth threshold for a window to be considered\nhigh quality. Calculated as mean depth *\nmax_depth_filter. So, a max_depth_filter of 4 would\nrequire depths to be less than or equal to 40 if the\nmean depth was 10. Default is 10000.0 to consider all\nwindows.")), ToolInput(tag="in_num_permutations", input_type=Int(optional=True), prefix="--num_permutations", doc=InputDocumentation(doc="Number of permutations to use for permutation\nanalyses. Default is 10000")), ToolInput(tag="in_num_bootstraps", input_type=Int(optional=True), prefix="--num_bootstraps", doc=InputDocumentation(doc="Number of bootstrap replicates to use when\nbootstrapping mean depth ratios among chromosomes.\nDefault is 10000")), ToolInput(tag="in_ignore_duplicates", input_type=Boolean(optional=True), prefix="--ignore_duplicates", doc=InputDocumentation(doc="Ignore duplicate reads in bam analyses. Default is to\ninclude duplicates.")), ToolInput(tag="in_marker_size", input_type=Int(optional=True), prefix="--marker_size", doc=InputDocumentation(doc="Marker size for genome-wide plots in matplotlib.\nDefault is 10.")), ToolInput(tag="in_marker_transparency", input_type=Float(optional=True), prefix="--marker_transparency", doc=InputDocumentation(doc="Transparency of markers in genome-wide plots. Alpha in\nmatplotlib. Default is 0.5")), ToolInput(tag="in_coordinate_scale", input_type=Int(optional=True), prefix="--coordinate_scale", doc=InputDocumentation(doc="For genome-wide scatter plots, divide all coordinates\nby this value.Default is 1000000, which will plot\neverything in megabases.")), ToolInput(tag="in_include_fixed", input_type=Float(optional=True), prefix="--include_fixed", doc=InputDocumentation(doc="Default is False, which removes read balances less\nthan or equal to 0.05 and equal to 1.0 for histogram\nplotting. True will include all values. Extreme values\nremoved by default because they often swamp out the\nsignal of the rest of the distribution.")), ToolInput(tag="in_use_counts", input_type=Boolean(optional=True), prefix="--use_counts", doc=InputDocumentation(doc="If True, get counts of reads per chromosome for\nCHROM_STATS, rather than calculating mean depth and\nmapq. Much faster, but provides less information.\nDefault is False\n")), ToolInput(tag="in_end_dot", input_type=String(), position=0, doc=InputDocumentation(doc="--version, -V         Print version and exit.")), ToolInput(tag="in_sample_xy_align_dot_log", input_type=String(), position=1, doc=InputDocumentation(doc="--reporting_level {DEBUG,INFO,ERROR,CRITICAL}")), ToolInput(tag="in_files_dot", input_type=String(), position=0, doc=InputDocumentation(doc="--no_bam_analysis     Include flag to prevent depth/mapq analysis of bam"))], outputs=[ToolOutput(tag="out_output_dir", output_type=Directory(optional=True), selector=InputSelector(input_to_select="in_output_dir", type_hint=File()), doc=OutputDocumentation(doc="REQUIRED. Output directory. XYalign will create a\ndirectory structure within this directory")), ToolOutput(tag="out_xx_ref_out_name", output_type=Directory(optional=True), selector=InputSelector(input_to_select="in_xx_ref_out_name", type_hint=File()), doc=OutputDocumentation(doc="Desired name for masked output fasta for samples\nWITHOUT a Y chromosome (e.g., XX, XXX, XO, etc.).\nDefaults to 'xyalign_noY.masked.fa'. Will be output in\nthe XYalign reference directory.")), ToolOutput(tag="out_xy_ref_out_name", output_type=Directory(optional=True), selector=InputSelector(input_to_select="in_xy_ref_out_name", type_hint=File()), doc=OutputDocumentation(doc="Desired name for masked output fasta for samples WITH\na Y chromosome (e.g., XY, XXY, etc.). Defaults to\n'xyalign_withY.masked.fa'. Will be output in the\nXYalign reference directory.")), ToolOutput(tag="out_xx_ref_out", output_type=File(optional=True), selector=InputSelector(input_to_select="in_xx_ref_out", type_hint=File()), doc=OutputDocumentation(doc="Desired path to and name of masked output fasta for\nsamples WITHOUT a Y chromosome (e.g., XX, XXX, XO,\netc.). Overwrites if exists. Use if you would like\noutput somewhere other than XYalign reference\ndirectory. Otherwise, use --xx_ref_name.")), ToolOutput(tag="out_xy_ref_out", output_type=File(optional=True), selector=InputSelector(input_to_select="in_xy_ref_out", type_hint=File()), doc=OutputDocumentation(doc="Desired path to and name of masked output fasta for\nsamples WITH a Y chromosome (e.g., XY, XXY, etc.).\nOverwrites if exists. Use if you would like output\nsomewhere other than XYalign reference directory.\nOtherwise, use --xy_ref_name.")), ToolOutput(tag="out_sex_chrom_bam_only", output_type=File(optional=True), selector=InputSelector(input_to_select="in_sex_chrom_bam_only", type_hint=File()), doc=OutputDocumentation(doc="This flag skips merging the new sex chromosome bam\nfile back into the original bam file (i.e., sex chrom\nswapping). This will output a bam file containing only\nthe newly remapped sex chromosomes."))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Xyalign_V0_1_0().translate("wdl", allow_empty_container=True)

