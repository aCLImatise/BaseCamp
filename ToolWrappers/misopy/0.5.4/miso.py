from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Int, Boolean, Directory, String

Miso_V0_1_0 = CommandToolBuilder(tool="miso", base_command=["miso"], inputs=[ToolInput(tag="in_run", input_type=File(optional=True), prefix="--run", doc=InputDocumentation(doc="Compute Psi values for a given GFF annotation of\neither whole mRNA isoforms or isoforms produced by\nsingle alternative splicing events. Expects two\narguments: an indexed GFF directory with genes to\nprocess, and a sorted, indexed BAM file (with headers)\nto run on.")), ToolInput(tag="in_event_type", input_type=Int(optional=True), prefix="--event-type", doc=InputDocumentation(doc="[OPTIONAL] Type of event (e.g. SE, RI, A3SS, ...)")), ToolInput(tag="in_use_cluster", input_type=Boolean(optional=True), prefix="--use-cluster", doc=InputDocumentation(doc="Run events on cluster.")), ToolInput(tag="in_chunk_jobs", input_type=Int(optional=True), prefix="--chunk-jobs", doc=InputDocumentation(doc="Size (in number of events) of each job to chunk events\nfile into. Only applies when running on cluster.")), ToolInput(tag="in_no_filter_events", input_type=Boolean(optional=True), prefix="--no-filter-events", doc=InputDocumentation(doc="Do not filter events for computing Psi. By default,\nMISO computes Psi only for events that have a\nsufficient number of junction reads. The default\nfilter varies by event type.")), ToolInput(tag="in_settings_filename", input_type=File(optional=True), prefix="--settings-filename", doc=InputDocumentation(doc="Filename specifying MISO settings.")), ToolInput(tag="in_read_len", input_type=Int(optional=True), prefix="--read-len", doc=InputDocumentation(doc="Length of sequenced reads.")), ToolInput(tag="in_paired_end", input_type=Int(optional=True), prefix="--paired-end", doc=InputDocumentation(doc="Run in paired-end mode. Takes mean and standard\ndeviation of insert length distribution.")), ToolInput(tag="in_overhang_len", input_type=Int(optional=True), prefix="--overhang-len", doc=InputDocumentation(doc="Length of overhang constraints imposed on junctions.")), ToolInput(tag="in_output_dir", input_type=Directory(optional=True), prefix="--output-dir", doc=InputDocumentation(doc="Directory for MISO output.")), ToolInput(tag="in_job_name", input_type=String(optional=True), prefix="--job-name", doc=InputDocumentation(doc="Name for jobs submitted to queue for SGE jobs. Default\nis misojob")), ToolInput(tag="in_s_gearray", input_type=Boolean(optional=True), prefix="--SGEarray", doc=InputDocumentation(doc="Use MISO on cluster with Sun Grid Engine. To be used\nin conjunction with --use-cluster option.")), ToolInput(tag="in_prefilter", input_type=Boolean(optional=True), prefix="--prefilter", doc=InputDocumentation(doc="Prefilter events based on coverage. If given as\nargument, run will begin by mapping BAM reads to event\nregions (using bedtools), and omit events that do not\nmeet coverage criteria from the run. By default,\nturned off. Note that events that do not meet the\ncoverage criteria will not be processed regardless,\nbut --prefilter simply does this filtering step at the\nstart of the run, potentially saving computation time\nso that low coverage events will not be processed or\ndistributed to jobs if MISO is run on a cluster. This\noptions requires bedtools to be installed and\navailable on path.")), ToolInput(tag="in_number_use_applies", input_type=Int(optional=True), prefix="-p", doc=InputDocumentation(doc="Number of processors to use. Only applies when running\nMISO on a single machine with multiple cores; does not\napply to runs submitted to cluster with --use-cluster.")), ToolInput(tag="in_no_wait", input_type=Boolean(optional=True), prefix="--no-wait", doc=InputDocumentation(doc="If passed in, do not wait on cluster jobs after they\nare submitted. By default, wait.")), ToolInput(tag="in_view_gene", input_type=File(optional=True), prefix="--view-gene", doc=InputDocumentation(doc="View the contents of a gene/event that has been\nindexed. Takes as input an indexed (.pickle) filename.\n"))], outputs=[ToolOutput(tag="out_output_dir", output_type=Directory(optional=True), selector=InputSelector(input_to_select="in_output_dir", type_hint=File()), doc=OutputDocumentation(doc="Directory for MISO output."))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Miso_V0_1_0().translate("wdl", allow_empty_container=True)

