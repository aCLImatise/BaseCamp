from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Int, Float, Boolean

Arem_V0_1_0 = CommandToolBuilder(tool="arem", base_command=["arem"], inputs=[ToolInput(tag="in_treatment", input_type=File(optional=True), prefix="--treatment", doc=InputDocumentation(doc="ChIP-seq treatment files. REQUIRED. When ELANDMULTIPET\nis selected, you must provide two files separated by\ncomma, e.g.\ns_1_1_eland_multi.txt,s_1_2_eland_multi.txt")), ToolInput(tag="in_control", input_type=File(optional=True), prefix="--control", doc=InputDocumentation(doc="Control files. When ELANDMULTIPET is selected, you\nmust provide two files separated by comma, e.g.\ns_2_1_eland_multi.txt,s_2_2_eland_multi.txt")), ToolInput(tag="in_name", input_type=File(optional=True), prefix="--name", doc=InputDocumentation(doc="Experiment name, which will be used to generate output\nfile names. DEFAULT: 'NA'")), ToolInput(tag="in_format", input_type=File(optional=True), prefix="--format", doc=InputDocumentation(doc="Format of tag file, 'AUTO', 'BED' or 'ELAND' or\n'ELANDMULTI' or 'ELANDMULTIPET' or 'ELANDEXPORT' or\n'SAM' or 'BAM' or 'BOWTIE'. The default AUTO option\nwill let AREM decide which format the file is. Please\ncheck the definition in 00README file if you choose EL\nAND/ELANDMULTI/ELANDMULTIPET/ELANDEXPORT/SAM/BAM/BOWTI\nE. DEFAULT: 'AUTO'")), ToolInput(tag="in_pet_dist", input_type=Int(optional=True), prefix="--petdist", doc=InputDocumentation(doc="Best distance between Pair-End Tags. Only available\nwhen format is 'ELANDMULTIPET'. DEFAULT: 200")), ToolInput(tag="in_g_size", input_type=Int(optional=True), prefix="--gsize", doc=InputDocumentation(doc="Effective genome size. It can be 1.0e+9 or 1000000000,\nor shortcuts:'hs' for human (2.7e9), 'mm' for mouse\n(1.87e9), 'ce' for C. elegans (9e7) and 'dm' for\nfruitfly (1.2e8), Default:hs")), ToolInput(tag="in_t_size", input_type=Int(optional=True), prefix="--tsize", doc=InputDocumentation(doc="Tag size. This will overide the auto detected tag\nsize. DEFAULT: 25")), ToolInput(tag="in_bw", input_type=Int(optional=True), prefix="--bw", doc=InputDocumentation(doc="Band width. This value is only used while building the\nshifting model. DEFAULT: 300")), ToolInput(tag="in_p_value", input_type=Float(optional=True), prefix="--pvalue", doc=InputDocumentation(doc="Pvalue cutoff for peak detection. DEFAULT: 1e-5")), ToolInput(tag="in_m_fold", input_type=Int(optional=True), prefix="--mfold", doc=InputDocumentation(doc="Select the regions within MFOLD range of high-\nconfidence enrichment ratio against background to\nbuild model. The regions must be lower than upper\nlimit, and higher than the lower limit. DEFAULT:10,30")), ToolInput(tag="in_no_lambda", input_type=Boolean(optional=True), prefix="--nolambda", doc=InputDocumentation(doc="If True, AREM will use fixed background lambda as\nlocal lambda for every peak region. Normally, AREM\ncalculates a dynamic local lambda to reflect the local\nbias due to potential chromatin structure.")), ToolInput(tag="in_s_local", input_type=Int(optional=True), prefix="--slocal", doc=InputDocumentation(doc="The small nearby region in basepairs to calculate\ndynamic lambda. This is used to capture the bias near\nthe peak summit region. Invalid if there is no control\ndata. DEFAULT: 1000")), ToolInput(tag="in_l_local", input_type=Int(optional=True), prefix="--llocal", doc=InputDocumentation(doc="The large nearby region in basepairs to calculate\ndynamic lambda. This is used to capture the surround\nbias. DEFAULT: 10000.")), ToolInput(tag="in_off_auto", input_type=Boolean(optional=True), prefix="--off-auto", doc=InputDocumentation(doc="Whether turn off the auto pair model process. If not\nset, when AREM failed to build paired model, it will\nuse the nomodel settings, the '--shiftsize' parameter\nto shift and extend each tags. DEFAULT: False")), ToolInput(tag="in_no_model", input_type=Boolean(optional=True), prefix="--nomodel", doc=InputDocumentation(doc="Whether or not to build the shifting model. If True,\nAREM will not build model. by default it means\nshifting size = 100, try to set shiftsize to change\nit. DEFAULT: False")), ToolInput(tag="in_shift_size", input_type=Int(optional=True), prefix="--shiftsize", doc=InputDocumentation(doc="The arbitrary shift size in bp. When nomodel is true,\nAREM will use this value as 1/2 of fragment size.\nDEFAULT: 100")), ToolInput(tag="in_keep_dup", input_type=Int(optional=True), prefix="--keep-dup", doc=InputDocumentation(doc="It controls the AREM behavior towards duplicate tags\nat the exact same location -- the same coordination\nand the same strand. The default 'auto' option makes\nMACS calculate the maximum tags at the exact same\nlocation based on binomal distribution using 1e-5 as\npvalue cutoff; and the 'all' option keeps every tags.\nIf an integer is given, at most this number of tags\nwill be kept at the same location. Default: auto")), ToolInput(tag="in_to_small", input_type=Boolean(optional=True), prefix="--to-small", doc=InputDocumentation(doc="When set, scale the larger dataset down to the smaller\ndataset, by default, the smaller dataset will be\nscaled towards the larger dataset. DEFAULT: False")), ToolInput(tag="in_wig", input_type=Boolean(optional=True), prefix="--wig", doc=InputDocumentation(doc="Whether or not to save extended fragment pileup at\nevery WIGEXTEND bps into a wiggle file. When --single-\nprofile is on, only one file for the whole genome is\nsaved. WARNING: this process is time/space consuming!!")), ToolInput(tag="in_bdg", input_type=Boolean(optional=True), prefix="--bdg", doc=InputDocumentation(doc="Whether or not to save extended fragment pileup at\nevery bp into a bedGraph file. When it's on, -w,\n--space and --call-subpeaks will be ignored. When\n--single-profile is on, only one file for the whole\ngenome is saved. WARNING: this process is time/space\nconsuming!!")), ToolInput(tag="in_single_profile", input_type=Boolean(optional=True), prefix="--single-profile", doc=InputDocumentation(doc="When set, a single wiggle file will be saved for\ntreatment and input. Default: False")), ToolInput(tag="in_space", input_type=Int(optional=True), prefix="--space", doc=InputDocumentation(doc="The resoluation for saving wiggle files, by default,\nMACS will save the raw tag count every 10 bps. Usable\nonly with '--wig' option.")), ToolInput(tag="in_call_sub_peaks", input_type=Boolean(optional=True), prefix="--call-subpeaks", doc=InputDocumentation(doc="If set, AREM will invoke Mali Salmon's PeakSplitter\nsoft through system call. If PeakSplitter can't be\nfound, an instruction will be shown for downloading\nand installing the PeakSplitter package. -w option\nneeds to be on and -B should be off to let it work.\nDEFAULT: False")), ToolInput(tag="in_verbose", input_type=Int(optional=True), prefix="--verbose", doc=InputDocumentation(doc="Set verbose level. 0: only show critical message, 1:\nshow additional warning message, 2: show process\ninformation, 3: show debug messages. DEFAULT:2")), ToolInput(tag="in_diag", input_type=Boolean(optional=True), prefix="--diag", doc=InputDocumentation(doc="Whether or not to produce a diagnosis report. It's up\nto 9X time consuming. Please check 00README file for\ndetail. DEFAULT: False")), ToolInput(tag="in_fe_min", input_type=Int(optional=True), prefix="--fe-min", doc=InputDocumentation(doc="For diagnostics, min fold enrichment to consider.\nDEFAULT: 0")), ToolInput(tag="in_fe_max", input_type=Int(optional=True), prefix="--fe-max", doc=InputDocumentation(doc="For diagnostics, max fold enrichment to consider.\nDEFAULT: maximum fold enrichment")), ToolInput(tag="in_fe_step", input_type=Int(optional=True), prefix="--fe-step", doc=InputDocumentation(doc="For diagnostics, fold enrichment step.  DEFAULT: 20")), ToolInput(tag="in_no_em", input_type=Boolean(optional=True), prefix="--no-EM", doc=InputDocumentation(doc="Do NOT iteratively align multi-reads by E-M. Multi-\nread probabilities will be based on quality scores or\nuniform (if --no-quals) DEFAULT : FALSE")), ToolInput(tag="in_em_converge_diff", input_type=Int(optional=True), prefix="--EM-converge-diff", doc=InputDocumentation(doc="The minimum entropy change between iterations before\nhalting E-M steps. DEFAULT : 1e-05")), ToolInput(tag="in_em_min_score", input_type=Int(optional=True), prefix="--EM-min-score", doc=InputDocumentation(doc="Minimum enrichment score. Windows below this threshold\nwill all look the same to the aligner. DEFAULT : 1.5")), ToolInput(tag="in_em_max_score", input_type=Int(optional=True), prefix="--EM-max-score", doc=InputDocumentation(doc="Maximum enrichment score. Windows above this threshold\nwill all look the same to the aligner, DEFAULT : No\nMaximum")), ToolInput(tag="in_em_show_graphs", input_type=Boolean(optional=True), prefix="--EM-show-graphs", doc=InputDocumentation(doc="generate diagnostic graphs for E-M. (requires\nMATPLOTLIB). DEFAULT : FALSE")), ToolInput(tag="in_quality_scale", input_type=Int(optional=True), prefix="--quality-scale", doc=InputDocumentation(doc="Initial alignment probabilities are determined by read\nquality and mismatches. Each possible alignment is\nassigned a probability from the product over all bases\nof either 1-p(ReadError_base) when there is no\nmismatch, or p(ReadError_base) when the called base\ndisagrees with the reference.  You may also select a\nuniform initialization. Read quality scale is the must\nbe one of ['auto', 'sanger+33', 'illumina+64'].\nDEFAULT : auto")), ToolInput(tag="in_random_multi", input_type=Boolean(optional=True), prefix="--random-multi", doc=InputDocumentation(doc="Convert all multi reads to unique reads by selecting\none alignment at random for each read. DEFAULT : False")), ToolInput(tag="in_no_multi", input_type=Boolean(optional=True), prefix="--no-multi", doc=InputDocumentation(doc="Throw away all reads that have more than one alignment")), ToolInput(tag="in_no_greedy_caller", input_type=Boolean(optional=True), prefix="--no-greedy-caller", doc=InputDocumentation(doc="Use AREM default peak caller instead of the greedy\ncaller. This normally results in wider, less enriched\npeaks, especially with multi-reads. DEFAULT : False")), ToolInput(tag="in_no_map_quals", input_type=Boolean(optional=True), prefix="--no-map-quals", doc=InputDocumentation(doc="Do not use mapping probabilities as priors in each\nupdate step; just use relative enrichment. DEFAULT :\nFalse")), ToolInput(tag="in_prior_snp", input_type=Float(optional=True), prefix="--prior-snp", doc=InputDocumentation(doc="Prior probability that a SNP occurs at any base in the\ngenome. DEFAULT : 0.001")), ToolInput(tag="in_write_read_probs", input_type=File(optional=True), prefix="--write-read-probs", doc=InputDocumentation(doc="Write out all final reads, including their alignment\nprobabilities as a BED file. DEFAULT : FALSE\n"))], outputs=[ToolOutput(tag="out_name", output_type=File(optional=True), selector=InputSelector(input_to_select="in_name", type_hint=File()), doc=OutputDocumentation(doc="Experiment name, which will be used to generate output\nfile names. DEFAULT: 'NA'")), ToolOutput(tag="out_write_read_probs", output_type=File(optional=True), selector=InputSelector(input_to_select="in_write_read_probs", type_hint=File()), doc=OutputDocumentation(doc="Write out all final reads, including their alignment\nprobabilities as a BED file. DEFAULT : FALSE\n"))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Arem_V0_1_0().translate("wdl", allow_empty_container=True)

