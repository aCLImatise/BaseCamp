from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Boolean, Int, Float, String

Ldsc_Py_V0_1_0 = CommandToolBuilder(tool="ldsc.py", base_command=["ldsc.py"], inputs=[ToolInput(tag="in_out", input_type=File(optional=True), prefix="--out", doc=InputDocumentation(doc="Output filename prefix. If --out is not set, LDSC will\nuse ldsc as the defualt output filename prefix.")), ToolInput(tag="in_b_file", input_type=File(optional=True), prefix="--bfile", doc=InputDocumentation(doc="Prefix for Plink .bed/.bim/.fam file")), ToolInput(tag="in_l_two", input_type=Boolean(optional=True), prefix="--l2", doc=InputDocumentation(doc="Estimate l2. Compatible with both jackknife and non-")), ToolInput(tag="in_keep", input_type=File(optional=True), prefix="--keep", doc=InputDocumentation(doc="File with individuals to include in LD Score\nestimation. The file should contain one individual ID\nper row.")), ToolInput(tag="in_ld_wind_snps", input_type=Int(optional=True), prefix="--ld-wind-snps", doc=InputDocumentation(doc="Specify the window size to be used for estimating LD\nScores in units of # of SNPs. You can only specify one\n--ld-wind-* option.")), ToolInput(tag="in_ld_wind_kb", input_type=Int(optional=True), prefix="--ld-wind-kb", doc=InputDocumentation(doc="Specify the window size to be used for estimating LD\nScores in units of kilobase-pairs (kb). You can only\nspecify one --ld-wind-* option.")), ToolInput(tag="in_ld_wind_cm", input_type=Int(optional=True), prefix="--ld-wind-cm", doc=InputDocumentation(doc="Specify the window size to be used for estimating LD\nScores in units of centiMorgans (cM). You can only\nspecify one --ld-wind-* option.")), ToolInput(tag="in_print_snps", input_type=Int(optional=True), prefix="--print-snps", doc=InputDocumentation(doc="This flag tells LDSC to only print LD Scores for the\nSNPs listed (one ID per row) in PRINT_SNPS. The sum\nr^2 will still include SNPs not in PRINT_SNPs. This is\nuseful for reducing the number of LD Scores that have\nto be read into memory when estimating h2 or rg.")), ToolInput(tag="in_an_not", input_type=File(optional=True), prefix="--annot", doc=InputDocumentation(doc="Filename prefix for annotation file for partitioned LD\nScore estimation. LDSC will automatically append\n.annot or .annot.gz to the filename prefix. See\ndocs/file_formats_ld for a definition of the .annot\nformat.")), ToolInput(tag="in_thin_an_not", input_type=Boolean(optional=True), prefix="--thin-annot", doc=InputDocumentation(doc="This flag says your annot files have only annotations,\nwith no SNP, CM, CHR, BP columns.")), ToolInput(tag="in_cts_bin", input_type=File(optional=True), prefix="--cts-bin", doc=InputDocumentation(doc="This flag tells LDSC to compute partitioned LD Scores,\nwhere the partition is defined by cutting one or\nseveral continuous variable[s] into bins. The argument\nto this flag should be the name of a single file or a\ncomma-separated list of files. The file format is two\ncolumns, with SNP IDs in the first column and the\ncontinuous variable in the second column.")), ToolInput(tag="in_cts_breaks", input_type=Float(optional=True), prefix="--cts-breaks", doc=InputDocumentation(doc="Use this flag to specify names for the continuous\nvariables cut into bins with --cts-bin. For each\ncontinuous variable, specify breaks as a comma-\nseparated list of breakpoints, and separate the\nbreakpoints for each variable with an x. For example,\nif binning on MAF and distance to gene (in kb), you\nmight set --cts-breaks 0.1,0.25,0.4x10,100,1000")), ToolInput(tag="in_cts_names", input_type=String(optional=True), prefix="--cts-names", doc=InputDocumentation(doc="Use this flag to specify names for the continuous\nvariables cut into bins with --cts-bin. The argument\nto this flag should be a comma-separated list of\nnames. For example, if binning on DAF and distance to\ngene, you might set --cts-bin DAF,DIST_TO_GENE")), ToolInput(tag="in_per_allele", input_type=Boolean(optional=True), prefix="--per-allele", doc=InputDocumentation(doc="Setting this flag causes LDSC to compute per-allele LD\nScores, i.e., \ell_j := \sum_k p_k(1-p_k)r^2_{jk},\nwhere p_k denotes the MAF of SNP j.")), ToolInput(tag="in_pq_exp", input_type=Int(optional=True), prefix="--pq-exp", doc=InputDocumentation(doc="Setting this flag causes LDSC to compute LD Scores\nwith the given scale factor, i.e., \ell_j := \sum_k\n(p_k(1-p_k))^a r^2_{jk}, where p_k denotes the MAF of\nSNP j and a is the argument to --pq-exp.")), ToolInput(tag="in_no_print_an_not", input_type=Boolean(optional=True), prefix="--no-print-annot", doc=InputDocumentation(doc="By defualt, seting --cts-bin or --cts-bin-add causes\nLDSC to print the resulting annot matrix. Setting\n--no-print-annot tells LDSC not to print the annot\nmatrix.")), ToolInput(tag="in_maf", input_type=String(optional=True), prefix="--maf", doc=InputDocumentation(doc="Minor allele frequency lower bound. Default is MAF >")), ToolInput(tag="in_h_two_cts", input_type=Int(optional=True), prefix="--h2-cts", doc=InputDocumentation(doc="Filename for a .sumstats[.gz] file for cell-type-\nspecific analysis. --h2-cts requires the --ref-ld-chr,\n--w-ld, and --ref-ld-chr-cts flags.")), ToolInput(tag="in_rg", input_type=String(optional=True), prefix="--rg", doc=InputDocumentation(doc="Comma-separated list of prefixes of .chisq filed for\ngenetic correlation estimation.")), ToolInput(tag="in_ref_ld", input_type=File(optional=True), prefix="--ref-ld", doc=InputDocumentation(doc="Use --ref-ld to tell LDSC which LD Scores to use as\nthe predictors in the LD Score regression. LDSC will\nautomatically append .l2.ldscore/.l2.ldscore.gz to the\nfilename prefix.")), ToolInput(tag="in_ref_ld_chr", input_type=File(optional=True), prefix="--ref-ld-chr", doc=InputDocumentation(doc="Same as --ref-ld, but will automatically concatenate\n.l2.ldscore files split across 22 chromosomes. LDSC\nwill automatically append .l2.ldscore/.l2.ldscore.gz\nto the filename prefix. If the filename prefix\ncontains the symbol @, LDSC will replace the @ symbol\nwith chromosome numbers. Otherwise, LDSC will append\nchromosome numbers to the end of the filename\nprefix.Example 1: --ref-ld-chr ld/ will read\nld/1.l2.ldscore.gz ... ld/22.l2.ldscore.gzExample 2:\n--ref-ld-chr ld/@_kg will read ld/1_kg.l2.ldscore.gz\n... ld/22_kg.l2.ldscore.gz")), ToolInput(tag="in_w_ld", input_type=File(optional=True), prefix="--w-ld", doc=InputDocumentation(doc="Filename prefix for file with LD Scores with sum r^2\ntaken over SNPs included in the regression. LDSC will\nautomatically append .l2.ldscore/.l2.ldscore.gz.")), ToolInput(tag="in_w_ld_chr", input_type=Int(optional=True), prefix="--w-ld-chr", doc=InputDocumentation(doc="Same as --w-ld, but will read files split into 22\nchromosomes in the same manner as --ref-ld-chr.")), ToolInput(tag="in_overlap_an_not", input_type=Boolean(optional=True), prefix="--overlap-annot", doc=InputDocumentation(doc="This flag informs LDSC that the partitioned LD Scores\nwere generates using an annot matrix with overlapping\ncategories (i.e., not all row sums equal 1), and\nprevents LDSC from displaying output that is\nmeaningless with overlapping categories.")), ToolInput(tag="in_print_coefficients", input_type=Boolean(optional=True), prefix="--print-coefficients", doc=InputDocumentation(doc="when categories are overlapping, print coefficients as\nwell as heritabilities.")), ToolInput(tag="in_frq_file", input_type=File(optional=True), prefix="--frqfile", doc=InputDocumentation(doc="For use with --overlap-annot. Provides allele\nfrequencies to prune to common snps if --not-M-5-50 is\nnot set.")), ToolInput(tag="in_frq_file_chr", input_type=File(optional=True), prefix="--frqfile-chr", doc=InputDocumentation(doc="Prefix for --frqfile files split over chromosome.")), ToolInput(tag="in_no_intercept", input_type=Boolean(optional=True), prefix="--no-intercept", doc=InputDocumentation(doc="If used with --h2, this constrains the LD Score\nregression intercept to equal 1. If used with --rg,\nthis constrains the LD Score regression intercepts for\nthe h2 estimates to be one and the intercept for the\ngenetic covariance estimate to be zero.")), ToolInput(tag="in_intercept_h_two", input_type=Int(optional=True), prefix="--intercept-h2", doc=InputDocumentation(doc="Intercepts for constrained-intercept single-trait LD\nScore regression.")), ToolInput(tag="in_intercept_genco_v", input_type=Int(optional=True), prefix="--intercept-gencov", doc=InputDocumentation(doc="Intercepts for constrained-intercept cross-trait LD\nScore regression. Must have same length as --rg. The\nfirst entry is ignored.")), ToolInput(tag="in_snps_you_want", input_type=Int(optional=True), prefix="--M", doc=InputDocumentation(doc="# of SNPs (if you don't want to use the .l2.M files\nthat came with your .l2.ldscore.gz files)")), ToolInput(tag="in_two_step", input_type=String(optional=True), prefix="--two-step", doc=InputDocumentation(doc="Test statistic bound for use with the two-step\nestimator. Not compatible with --no-intercept and\n--constrain-intercept.")), ToolInput(tag="in_chisq_max", input_type=Int(optional=True), prefix="--chisq-max", doc=InputDocumentation(doc="Max chi^2.")), ToolInput(tag="in_ref_ld_chr_cts", input_type=File(optional=True), prefix="--ref-ld-chr-cts", doc=InputDocumentation(doc="Name of a file that has a list of file name prefixes\nfor cell-type-specific analysis.")), ToolInput(tag="in_print_all_cts", input_type=Boolean(optional=True), prefix="--print-all-cts", doc=InputDocumentation(doc="For use with --h2/--rg. This flag tells LDSC to print\nthe covaraince matrix of the estimates.")), ToolInput(tag="in_print_delete_vals", input_type=Boolean(optional=True), prefix="--print-delete-vals", doc=InputDocumentation(doc="If this flag is set, LDSC will print the block\njackknife delete-values (i.e., the regression\ncoefficeints estimated from the data with a block\nremoved). The delete-values are formatted as a matrix\nwith (# of jackknife blocks) rows and (# of LD Scores)\ncolumns.")), ToolInput(tag="in_chunk_size", input_type=Int(optional=True), prefix="--chunk-size", doc=InputDocumentation(doc="Chunk size for LD Score calculation. Use the default.")), ToolInput(tag="in_pickle", input_type=Boolean(optional=True), prefix="--pickle", doc=InputDocumentation(doc="Store .l2.ldscore files as pickles instead of gzipped\ntab-delimited text.")), ToolInput(tag="in_yes_really", input_type=Boolean(optional=True), prefix="--yes-really", doc=InputDocumentation(doc="Yes, I really want to compute whole-chromosome LD")), ToolInput(tag="in_not_m_five_five_zero", input_type=Boolean(optional=True), prefix="--not-M-5-50", doc=InputDocumentation(doc="This flag tells LDSC to use the .l2.M file instead of\nthe .l2.M_5_50 file.")), ToolInput(tag="in_return_silly_things", input_type=Boolean(optional=True), prefix="--return-silly-things", doc=InputDocumentation(doc="Force ldsc to return silly genetic correlation\nestimates.")), ToolInput(tag="in_no_check_alleles", input_type=Boolean(optional=True), prefix="--no-check-alleles", doc=InputDocumentation(doc="For rg estimation, skip checking whether the alleles\nmatch. This check is redundant for pairs of chisq\nfiles generated using munge_sumstats.py and the same\nargument to the --merge-alleles flag.")), ToolInput(tag="in_samp_prev", input_type=String(optional=True), prefix="--samp-prev", doc=InputDocumentation(doc="Sample prevalence of binary phenotype (for conversion\nto liability scale).")), ToolInput(tag="in_pop_prev", input_type=String(optional=True), prefix="--pop-prev", doc=InputDocumentation(doc="Population prevalence of binary phenotype (for\nconversion to liability scale).\n")), ToolInput(tag="in_extract", input_type=String(optional=True), prefix="--extract", doc=InputDocumentation(doc="")), ToolInput(tag="in_jackknife_dot", input_type=String(), position=0, doc=InputDocumentation(doc="--extract EXTRACT     File with SNPs to include in LD Score estimation. The")), ToolInput(tag="in_zero_dot", input_type=Int(), position=0, doc=InputDocumentation(doc="--h2 H2               Filename for a .sumstats[.gz] file for one-phenotype")), ToolInput(tag="in_score_dot", input_type=String(), position=0, doc=InputDocumentation(doc="--invert-anyway       Force LDSC to attempt to invert ill-conditioned")), ToolInput(tag="in_matrices_dot", input_type=String(), position=1, doc=InputDocumentation(doc="--n-blocks N_BLOCKS   Number of block jackknife blocks."))], outputs=[ToolOutput(tag="out_out", output_type=File(optional=True), selector=InputSelector(input_to_select="in_out", type_hint=File()), doc=OutputDocumentation(doc="Output filename prefix. If --out is not set, LDSC will\nuse ldsc as the defualt output filename prefix."))], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Ldsc_Py_V0_1_0().translate("wdl", allow_empty_container=True)

