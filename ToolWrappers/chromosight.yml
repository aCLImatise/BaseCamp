!Command
command:
- chromosight
positional:
- !Positional
  description: 'quantify:'
  position: 0
  name: convolution.
  optional: false
- !Positional
  description: "The Hi-C contact map to detect patterns on, in\nbedgraph2d or cool\
    \ format."
  position: 0
  name: contact_map
  optional: false
- !Positional
  description: name of the output directory
  position: 1
  name: output
  optional: false
- !Positional
  description: "Tab-separated text files with columns chrom1, start1\nend1, chrom2,\
    \ start2, end2. Each line correspond to\na pair of positions (i.e. a position\
    \ in the matrix)."
  position: 0
  name: bed2d
  optional: false
- !Positional
  description: "Path to the contact map, in bedgraph2d or\ncool format."
  position: 1
  name: contact_map
  optional: false
- !Positional
  description: output directory where files should be generated.
  position: 2
  name: output
  optional: false
- !Positional
  description: "Path prefix for config files. If prefix is a/b,\nfiles a/b.json and\
    \ a/b.1.txt will be generated.\nIf a given pattern has N kernel matrices, N txt\n\
    files are created they will be named a/b.[1-N].txt."
  position: 0
  name: prefix
  optional: false
named:
- !Flag
  description: "Generate a preset config for the given pattern.\nPreset configs available\
    \ are \"loops\" and\n\"borders\". [default: loops]"
  synonyms:
  - -e
  - --preset
  args: !SimpleFlagArg
    name: loops
  optional: true
- !Flag
  description: "Show input contact map and uses double clicks from\nuser to build\
    \ the kernel. Warning: memory-heavy,\nreserve for small genomes or subsetted matrices."
  synonyms:
  - -c
  - --click
  args: !SimpleFlagArg
    name: contact_map
  optional: true
- !Flag
  description: "Re-compute matrix normalization (balancing) and\noverwrite weights\
    \ present in the cool files instead\nof reusing them."
  synonyms:
  - -F
  - --force-norm
  args: !EmptyFlagArg {}
  optional: true
- !Flag
  description: "Enable to consider interchromosomal contacts.\nWarning: Experimental\
    \ feature with high memory\nconsumption, only use with small matrices."
  synonyms:
  - -I
  - --inter
  args: !EmptyFlagArg {}
  optional: true
- !Flag
  description: "Minimum distance from the diagonal (in base pairs).\nat which detection\
    \ should operate. [default: auto]"
  synonyms:
  - -m
  - --min-dist
  args: !SimpleFlagArg
    name: auto
  optional: true
- !Flag
  description: "Maximum distance from the diagonal (in base pairs)\nfor detection.\
    \ [default: auto]"
  synonyms:
  - -M
  - --max-dist
  args: !SimpleFlagArg
    name: auto
  optional: true
- !Flag
  description: "Which pattern to detect. This will use preset\nconfigurations for\
    \ the given pattern. Possible\nvalues are: loops, borders, hairpins and\ncentromeres.\
    \ [default: loops]"
  synonyms:
  - -P
  - --pattern
  args: !SimpleFlagArg
    name: loops
  optional: true
- !Flag
  description: "Pearson correlation threshold when detecting patterns\nin the contact\
    \ map. Lower values leads to potentially\nmore detections, but more false positives.\
    \ [default: auto]"
  synonyms:
  - -p
  - --pearson
  args: !SimpleFlagArg
    name: auto
  optional: true
- !Flag
  description: "If greater than 1, subsample INT contacts from the\nmatrix. If between\
    \ 0 and 1, subsample a proportion of\ncontacts instead. Useful when comparing\
    \ matrices with\ndifferent coverages. [default: no]"
  synonyms:
  - -s
  - --subsample
  args: !SimpleFlagArg
    name: INT
  optional: true
- !Flag
  description: 'Number of CPUs to use in parallel. [default: 1]'
  synonyms:
  - -t
  - --threads
  args: !SimpleFlagArg
    name: '1'
  optional: true
- !Flag
  description: "Maximum percentage of non-detectable pixels (nan) in\nwindows allowed\
    \ to report patterns. [default: auto]"
  synonyms:
  - -u
  - --perc-undetected
  args: !SimpleFlagArg
    name: auto
  optional: true
- !Flag
  description: "Maximum percentage of empty (0) pixels in windows\nallowed to report\
    \ patterns. [default: auto]"
  synonyms:
  - -z
  - --perc-zero
  args: !SimpleFlagArg
    name: auto
  optional: true
- !Flag
  description: "Directory where to save matrix dumps during\nprocessing and detection.\
    \ Each dump is saved as\na compressed npz of a sparse matrix and can be\nloaded\
    \ using scipy.sparse.load_npz."
  synonyms:
  - -d
  - --dump
  args: !SimpleFlagArg
    name: DIR
  optional: true
- !Flag
  description: "How many iterations to perform after the first\ntemplate-based pass.\
    \ [default: 1]"
  synonyms:
  - -i
  - --iterations
  args: !SimpleFlagArg
    name: auto
  optional: true
- !Flag
  description: "Optionally give a path to a custom JSON kernel\nconfig path. Use this\
    \ to override pattern if\nyou do not want to use one of the preset\npatterns."
  synonyms:
  - -k
  - --kernel-config
  args: !SimpleFlagArg
    name: FILE
  optional: true
- !Flag
  description: Disable generation of pileup plots.
  synonyms:
  - -n
  - --no-plotting
  args: !EmptyFlagArg {}
  optional: true
- !Flag
  description: "Maximum number of median absolute deviations below\nthe median of\
    \ the bin sums distribution allowed to\nconsider detectable bins. [default: 5]"
  synonyms:
  - -N
  - --n-mads
  args: !SimpleFlagArg
    name: '5'
  optional: true
- !Flag
  description: "Minimum distance required between patterns, in\nbasepairs. If two\
    \ patterns are closer than this\ndistance in both axes, the one with the lowest\n\
    score is discarded. [default: auto]"
  synonyms:
  - -S
  - --min-separation
  args: !SimpleFlagArg
    name: auto
  optional: true
- !Flag
  description: "Use isotonic regression when detrending to reduce\nnoise at long ranges.\
    \ Do not enable this for circular\ngenomes."
  synonyms:
  - -T
  - --smooth-trend
  args: !EmptyFlagArg {}
  optional: true
- !Flag
  description: "Enable kernel factorisation via truncated svd.\nAccelerates detection,\
    \ at the cost of slight\ninaccuracies. Singular matrices are truncated to\nretain\
    \ 99.9% of the information in the kernel."
  synonyms:
  - -V
  - --tsvd
  args: !EmptyFlagArg {}
  optional: true
- !Flag
  description: "File format used to store individual windows\naround each pattern.\
    \ Window order matches\npatterns inside the associated text file.\nPossible formats\
    \ are json and npy. [default: json]"
  synonyms:
  - -w
  - --win-fmt
  args: !ChoiceFlagArg
    choices: !!set
      npy:
      json:
  optional: true
- !Flag
  description: "Window size (width), in pixels, to use for the\nkernel when computing\
    \ correlations. The pattern\nkernel will be resized to match this size. Linear\n\
    linear interpolation is used to fill between pixels.\nIf not specified, the default\
    \ kernel size will\nbe used instead. [default: auto]\n"
  synonyms:
  - -W
  - --win-size
  args: !SimpleFlagArg
    name: auto
  optional: true
parent:
subcommands: []
usage: []
help_flag: !Flag
  description: Display this help message.
  synonyms:
  - -h
  - --help
  args: !EmptyFlagArg {}
  optional: true
usage_flag:
version_flag: !Flag
  description: Display the program's current version.
  synonyms:
  - --version
  args: !EmptyFlagArg {}
  optional: true
help_text: "Pattern exploration and detection\n\nExplore and detect patterns (loops,\
  \ borders, centromeres, etc.) in Hi-C contact\nmaps with pattern matching.\n\nUsage:\n\
  \    chromosight detect  [--kernel-config=FILE] [--pattern=loops]\n            \
  \            [--pearson=auto] [--win-size=auto] [--iterations=auto]\n          \
  \              [--win-fmt={json,npy}] [--force-norm]\n                        [--subsample=no]\
  \ [--inter] [--tsvd] [--smooth-trend]\n                        [--n-mads=5] [--min-dist=0]\
  \ [--max-dist=auto]\n                        [--no-plotting] [--min-separation=auto]\
  \ [--dump=DIR]\n                        [--threads=1] [--perc-zero=auto]\n     \
  \                   [--perc-undetected=auto] <contact_map> [<output>]\n    chromosight\
  \ generate-config [--preset loops] [--click contact_map]\n                     \
  \   [--force-norm] [--win-size=auto] [--n-mads=5]\n                        [--threads=1]\
  \ <prefix>\n    chromosight quantify [--inter] [--pattern=loops] [--subsample=no]\n\
  \                         [--win-fmt=json] [--kernel-config=FILE] [--force-norm]\n\
  \                         [--threads=1] [--n-mads=5] [--win-size=auto]\n       \
  \                  [--perc-undetected=auto] [--perc-zero=auto]\n               \
  \          [--no-plotting] [--tsvd] <bed2d> <contact_map> <output>\n    chromosight\
  \ test\n\n    detect:\n        performs pattern detection on a Hi-C contact map\
  \ via template matching\n    generate-config:\n        Generate pre-filled config\
  \ files to use for detect and quantify.\n        A config consists of a JSON file\
  \ describing parameters for the\n        analysis and path pointing to kernel matrices\
  \ files. Those matrices\n        files are tsv files with numeric values as kernel\
  \ to use for\n        convolution.\n    quantify:\n        Given a list of pairs\
  \ of positions and a contact map, computes the\n        correlation coefficients\
  \ between those positions and the kernel of the\n        selected pattern.\n   \
  \ test:\n        Download example data and run loop detection on it.\n\nArguments\
  \ for detect:\n    -h, --help                  Display this help message.\n    --version\
  \                   Display the program's current version.\n    contact_map    \
  \             The Hi-C contact map to detect patterns on, in\n                 \
  \               bedgraph2d or cool format.\n    output                      name\
  \ of the output directory\n\nArguments for quantify:\n    bed2d                \
  \       Tab-separated text files with columns chrom1, start1\n                 \
  \               end1, chrom2, start2, end2. Each line correspond to\n          \
  \                      a pair of positions (i.e. a position in the matrix).\n  \
  \  contact_map                 Path to the contact map, in bedgraph2d or\n     \
  \                           cool format.\n    output                      output\
  \ directory where files should be generated.\n\nArguments for generate-config:\n\
  \    prefix                      Path prefix for config files. If prefix is a/b,\n\
  \                                files a/b.json and a/b.1.txt will be generated.\n\
  \                                If a given pattern has N kernel matrices, N txt\n\
  \                                files are created they will be named a/b.[1-N].txt.\n\
  \    -e, --preset=loops          Generate a preset config for the given pattern.\n\
  \                                Preset configs available are \"loops\" and\n  \
  \                              \"borders\". [default: loops]\n    -c, --click contact_map\
  \     Show input contact map and uses double clicks from\n                     \
  \           user to build the kernel. Warning: memory-heavy,\n                 \
  \               reserve for small genomes or subsetted matrices.\n\nBasic options:\n\
  \    -F, --force-norm            Re-compute matrix normalization (balancing) and\n\
  \                                overwrite weights present in the cool files instead\n\
  \                                of reusing them.\n    -I, --inter             \
  \    Enable to consider interchromosomal contacts.\n                           \
  \     Warning: Experimental feature with high memory\n                         \
  \       consumption, only use with small matrices.\n    -m, --min-dist=auto    \
  \     Minimum distance from the diagonal (in base pairs).\n                    \
  \            at which detection should operate. [default: auto]\n    -M, --max-dist=auto\
  \         Maximum distance from the diagonal (in base pairs)\n                 \
  \               for detection. [default: auto]\n    -P, --pattern=loops        \
  \ Which pattern to detect. This will use preset\n                              \
  \  configurations for the given pattern. Possible\n                            \
  \    values are: loops, borders, hairpins and\n                                centromeres.\
  \ [default: loops]\n    -p, --pearson=auto          Pearson correlation threshold\
  \ when detecting patterns\n                                in the contact map. Lower\
  \ values leads to potentially\n                                more detections,\
  \ but more false positives. [default: auto]\n    -s, --subsample=INT         If\
  \ greater than 1, subsample INT contacts from the\n                            \
  \    matrix. If between 0 and 1, subsample a proportion of\n                   \
  \             contacts instead. Useful when comparing matrices with\n          \
  \                      different coverages. [default: no]\n    -t, --threads=1 \
  \            Number of CPUs to use in parallel. [default: 1]\n    -u, --perc-undetected=auto\
  \  Maximum percentage of non-detectable pixels (nan) in\n                      \
  \          windows allowed to report patterns. [default: auto]\n    -z, --perc-zero=auto\
  \        Maximum percentage of empty (0) pixels in windows\n                   \
  \             allowed to report patterns. [default: auto]\n\nAdvanced options:\n\
  \    -d, --dump=DIR              Directory where to save matrix dumps during\n \
  \                               processing and detection. Each dump is saved as\n\
  \                                a compressed npz of a sparse matrix and can be\n\
  \                                loaded using scipy.sparse.load_npz.\n    -i, --iterations=auto\
  \       How many iterations to perform after the first\n                       \
  \         template-based pass. [default: 1]\n    -k, --kernel-config=FILE    Optionally\
  \ give a path to a custom JSON kernel\n                                config path.\
  \ Use this to override pattern if\n                                you do not want\
  \ to use one of the preset\n                                patterns.\n    -n, --no-plotting\
  \           Disable generation of pileup plots.\n    -N, --n-mads=5            \
  \  Maximum number of median absolute deviations below\n                        \
  \        the median of the bin sums distribution allowed to\n                  \
  \              consider detectable bins. [default: 5]\n    -S, --min-separation=auto\
  \   Minimum distance required between patterns, in\n                           \
  \     basepairs. If two patterns are closer than this\n                        \
  \        distance in both axes, the one with the lowest\n                      \
  \          score is discarded. [default: auto]\n    -T, --smooth-trend         \
  \ Use isotonic regression when detrending to reduce\n                          \
  \      noise at long ranges. Do not enable this for circular\n                 \
  \               genomes.\n    -V, --tsvd                  Enable kernel factorisation\
  \ via truncated svd.\n                                Accelerates detection, at\
  \ the cost of slight\n                                inaccuracies. Singular matrices\
  \ are truncated to\n                                retain 99.9% of the information\
  \ in the kernel.\n    -w, --win-fmt={json,npy}    File format used to store individual\
  \ windows\n                                around each pattern. Window order matches\n\
  \                                patterns inside the associated text file.\n   \
  \                             Possible formats are json and npy. [default: json]\n\
  \    -W, --win-size=auto         Window size (width), in pixels, to use for the\n\
  \                                kernel when computing correlations. The pattern\n\
  \                                kernel will be resized to match this size. Linear\n\
  \                                linear interpolation is used to fill between pixels.\n\
  \                                If not specified, the default kernel size will\n\
  \                                be used instead. [default: auto]\n"
generated_using:
- --help
