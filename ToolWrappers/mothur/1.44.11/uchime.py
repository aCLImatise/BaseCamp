from datetime import datetime
from typing import List, Optional, Dict, Any

from janis_core import *
from janis_core.types.common_data_types import File, Int, Float, Boolean

Uchime_V0_1_0 = CommandToolBuilder(tool="uchime", base_command=["uchime"], inputs=[ToolInput(tag="in_input", input_type=File(optional=True), prefix="--input", doc=InputDocumentation(doc="Query sequences in FASTA format.\nIf the --db option is not specificed, uchime uses de novo\ndetection. In de novo mode, relative abundance must be given\nby a string /ab=xxx/ somewhere in the label, where xxx is a\nfloating-point number, e.g. >F00QGH67HG/ab=1.2/.")), ToolInput(tag="in_db", input_type=File(optional=True), prefix="--db", doc=InputDocumentation(doc="Reference database in FASTA format.\nOptional, if not specified uchime uses de novo mode.\n***WARNING*** The database is searched ONLY on the plus strand.\nYou MUST include reverse-complemented sequences in the database\nif you want both strands to be searched.")), ToolInput(tag="in_ab_skew", input_type=Int(optional=True), prefix="--abskew", doc=InputDocumentation(doc="Minimum abundance skew. Default 1.9. De novo mode only.\nAbundance skew is:\nmin [ abund(parent1), abund(parent2) ] / abund(query).")), ToolInput(tag="in_uchi_me_out", input_type=File(optional=True), prefix="--uchimeout", doc=InputDocumentation(doc="Output in tabbed format with one record per query sequence.\nFirst field is score (h), second field is query label.\nFor details, see manual.")), ToolInput(tag="in_uchi_meal_ns", input_type=File(optional=True), prefix="--uchimealns", doc=InputDocumentation(doc="Multiple alignments of query sequences to parents in human-\nreadable format. Alignments show columns with differences\nthat support or contradict a chimeric model.")), ToolInput(tag="in_minh", input_type=Float(optional=True), prefix="--minh", doc=InputDocumentation(doc="Mininum score to report chimera. Default 0.3. Values from 0.1\nto 5 might be reasonable. Lower values increase sensitivity\nbut may report more false positives. If you decrease --xn,\nyou may need to increase --minh, and vice versa.")), ToolInput(tag="in_mind_iv", input_type=Int(optional=True), prefix="--mindiv", doc=InputDocumentation(doc="Minimum divergence ratio, default 0.5. Div ratio is 100% -\n%identity between query sequence and the closest candidate for\nbeing a parent. If you don't care about very close chimeras,\nthen you could increase --mindiv to, say, 1.0 or 2.0, and\nalso decrease --min h, say to 0.1, to increase sensitivity.\nHow well this works will depend on your data. Best is to\ntune parameters on a good benchmark.")), ToolInput(tag="in_xn", input_type=Float(optional=True), prefix="--xn", doc=InputDocumentation(doc="Weight of a no vote, also called the beta parameter. Default 8.0.\nDecreasing this weight to around 3 or 4 may give better\nperformance on denoised data.")), ToolInput(tag="in_dn", input_type=Int(optional=True), prefix="--dn", doc=InputDocumentation(doc="Pseudo-count prior on number of no votes. Default 1.4. Probably\nno good reason to change this unless you can retune to a good\nbenchmark for your data. Reasonable values are probably in the\nrange from 0.2 to 2.")), ToolInput(tag="in_x_a", input_type=Float(optional=True), prefix="--xa", doc=InputDocumentation(doc="Weight of an abstain vote. Default 1. So far, results do not\nseem to be very sensitive to this parameter, but if you have\na good training set might be worth trying. Reasonable values\nmight range from 0.1 to 2.")), ToolInput(tag="in_chunks", input_type=Int(optional=True), prefix="--chunks", doc=InputDocumentation(doc="Number of chunks to extract from the query sequence when searching\nfor parents. Default 4.")), ToolInput(tag="in_min_chunk", input_type=Int(optional=True), prefix="--minchunk", doc=InputDocumentation(doc="Minimum length of a chunk. Default 64.")), ToolInput(tag="in_id_smooth_window", input_type=Int(optional=True), prefix="--idsmoothwindow", doc=InputDocumentation(doc="Length of id smoothing window. Default 32.")), ToolInput(tag="in_min_smooth_id", input_type=Float(optional=True), prefix="--minsmoothid", doc=InputDocumentation(doc="Minimum factional identity over smoothed window of candidate parent.\nDefault 0.95.")), ToolInput(tag="in_maxp", input_type=Int(optional=True), prefix="--maxp", doc=InputDocumentation(doc="Maximum number of candidate parents to consider. Default 2. In tests so\nfar, increasing --maxp gives only a very small improvement in sensivity\nbut tends to increase the error rate quite a bit.")), ToolInput(tag="in_min_len", input_type=Int(optional=True), prefix="--minlen", doc=InputDocumentation(doc="Minimum and maximum sequence length. Defaults 10, 10000.\nApplies to both query and reference sequences.")), ToolInput(tag="in_ucl", input_type=Boolean(optional=True), prefix="--ucl", doc=InputDocumentation(doc="Use local-X alignments. Default is global-X. On tests so far, global-X\nis always better; this option is retained because it just might work\nwell on some future type of data.")), ToolInput(tag="in_query_fract", input_type=Float(optional=True), prefix="--queryfract", doc=InputDocumentation(doc="Minimum fraction of the query sequence that must be covered by a local-X\nalignment. Default 0.5. Applies only when --ucl is specified.")), ToolInput(tag="in_quiet", input_type=Boolean(optional=True), prefix="--quiet", doc=InputDocumentation(doc="Do not display progress messages on stderr.")), ToolInput(tag="in_log", input_type=File(optional=True), prefix="--log", doc=InputDocumentation(doc="Write miscellaneous information to the log file. Mostly of interest\nto me (the algorithm developer). Use --verbose to get more info.")), ToolInput(tag="in_self", input_type=Boolean(optional=True), prefix="--self", doc=InputDocumentation(doc="In reference database mode, exclude a reference sequence if it has\nthe same label as the query. This is useful for benchmarking by using\nthe ref db as a query to test for false positives."))], outputs=[], container=None, version="v0.1.0")


if __name__ == "__main__":
    # or "cwl"
    Uchime_V0_1_0().translate("wdl", allow_empty_container=True)

