version 1.0

task CentreseqTree {
  input {
    File? summary_report
    File? pro_kk_a_dir
    File? outdir
    Float? percentile
    Int? n_cpu
    Boolean? verbose
  }
  command <<<
    centreseq tree \
      ~{if defined(summary_report) then ("--summary-report " +  '"' + summary_report + '"') else ""} \
      ~{if defined(pro_kk_a_dir) then ("--prokka-dir " +  '"' + pro_kk_a_dir + '"') else ""} \
      ~{if defined(outdir) then ("--outdir " +  '"' + outdir + '"') else ""} \
      ~{if defined(percentile) then ("--percentile " +  '"' + percentile + '"') else ""} \
      ~{if defined(n_cpu) then ("--n-cpu " +  '"' + n_cpu + '"') else ""} \
      ~{true="--verbose" false="" verbose}
  >>>
  parameter_meta {
    summary_report: "Path to summary_report.csv file produced by the core pipeline  [required]"
    pro_kk_a_dir: "Path to the Prokka output directory generated by the core pipeline  [required]"
    outdir: "Root directory to store all output files [required]"
    percentile: "Filter summary report by n_members to the top nth percentile. Defaults to 99.0."
    n_cpu: "Number of CPUs to dedicate to parallelizable steps of the pipeline.Will take all available CPUs - 1 if not specified."
    verbose: "Set this flag to enable more verbose logging."
  }
}